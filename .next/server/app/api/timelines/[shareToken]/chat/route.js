"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/timelines/[shareToken]/chat/route";
exports.ids = ["app/api/timelines/[shareToken]/chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&page=%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&page=%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _home_runner_workspace_app_api_timelines_shareToken_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/timelines/[shareToken]/chat/route.ts */ \"(rsc)/./app/api/timelines/[shareToken]/chat/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/timelines/[shareToken]/chat/route\",\n        pathname: \"/api/timelines/[shareToken]/chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/timelines/[shareToken]/chat/route\"\n    },\n    resolvedPagePath: \"/home/runner/workspace/app/api/timelines/[shareToken]/chat/route.ts\",\n    nextConfigOutput,\n    userland: _home_runner_workspace_app_api_timelines_shareToken_chat_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/timelines/[shareToken]/chat/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0aW1lbGluZXMlMkYlNUJzaGFyZVRva2VuJTVEJTJGY2hhdCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdGltZWxpbmVzJTJGJTVCc2hhcmVUb2tlbiU1RCUyRmNoYXQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ0aW1lbGluZXMlMkYlNUJzaGFyZVRva2VuJTVEJTJGY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZob21lJTJGcnVubmVyJTJGd29ya3NwYWNlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNtQjtBQUNoRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL3dvcmtzcGFjZS8/Mjc0NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvaG9tZS9ydW5uZXIvd29ya3NwYWNlL2FwcC9hcGkvdGltZWxpbmVzL1tzaGFyZVRva2VuXS9jaGF0L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS90aW1lbGluZXMvW3NoYXJlVG9rZW5dL2NoYXQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS90aW1lbGluZXMvW3NoYXJlVG9rZW5dL2NoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3RpbWVsaW5lcy9bc2hhcmVUb2tlbl0vY2hhdC9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9ob21lL3J1bm5lci93b3Jrc3BhY2UvYXBwL2FwaS90aW1lbGluZXMvW3NoYXJlVG9rZW5dL2NoYXQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3RpbWVsaW5lcy9bc2hhcmVUb2tlbl0vY2hhdC9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&page=%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/timelines/[shareToken]/chat/route.ts":
/*!******************************************************!*\
  !*** ./app/api/timelines/[shareToken]/chat/route.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./lib/db.ts\");\n/* harmony import */ var _lib_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/schema */ \"(rsc)/./lib/schema.ts\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/conditions.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/sql/expressions/select.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @anthropic-ai/sdk */ \"(rsc)/./node_modules/@anthropic-ai/sdk/index.mjs\");\n/* harmony import */ var _lib_rate_limit__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/rate-limit */ \"(rsc)/./lib/rate-limit.ts\");\n\n\n\n\n\n\n\nconst anthropic = new _anthropic_ai_sdk__WEBPACK_IMPORTED_MODULE_3__[\"default\"]({\n    apiKey: process.env.ANTHROPIC_API_KEY\n});\nconst chatRequestSchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({\n    message: zod__WEBPACK_IMPORTED_MODULE_5__.string().min(1).max(5000),\n    clientEmail: zod__WEBPACK_IMPORTED_MODULE_5__.string().email().optional()\n});\nconst proposalSchema = zod__WEBPACK_IMPORTED_MODULE_5__.object({\n    type: zod__WEBPACK_IMPORTED_MODULE_5__.literal(\"scope_change\"),\n    summary: zod__WEBPACK_IMPORTED_MODULE_5__.string(),\n    changes: zod__WEBPACK_IMPORTED_MODULE_5__.array(zod__WEBPACK_IMPORTED_MODULE_5__.string()),\n    deltaCost: zod__WEBPACK_IMPORTED_MODULE_5__.number(),\n    deltaWeeks: zod__WEBPACK_IMPORTED_MODULE_5__.number(),\n    reasoning: zod__WEBPACK_IMPORTED_MODULE_5__.string()\n});\nasync function POST(request, { params }) {\n    try {\n        if (!process.env.ANTHROPIC_API_KEY) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"AI service is not configured. Please contact support.\"\n            }, {\n                status: 503\n            });\n        }\n        const ip = request.headers.get(\"x-forwarded-for\") || request.headers.get(\"x-real-ip\") || \"unknown\";\n        const rateLimitResult = (0,_lib_rate_limit__WEBPACK_IMPORTED_MODULE_4__.applyRateLimit)(ip, \"ai\", {\n            maxRequests: 10,\n            windowMs: 60000\n        });\n        if (!rateLimitResult.allowed) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Rate limit exceeded. Please try again later.\"\n            }, {\n                status: 429\n            });\n        }\n        const { shareToken } = params;\n        const body = await request.json();\n        const { message, clientEmail } = chatRequestSchema.parse(body);\n        const timeline = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query.projectTimelines.findFirst({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.projectTimelines.shareToken, shareToken),\n            with: {\n                project: {\n                    with: {\n                        organization: {\n                            with: {\n                                settings: true\n                            }\n                        }\n                    }\n                }\n            }\n        });\n        if (!timeline) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Timeline not found\"\n            }, {\n                status: 404\n            });\n        }\n        let session = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query.timelineChatSessions.findFirst({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatSessions.shareToken, shareToken)\n        });\n        if (!session) {\n            const [newSession] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.insert(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatSessions).values({\n                shareToken,\n                projectId: timeline.projectId,\n                timelineId: timeline.id,\n                clientEmail: clientEmail || null\n            }).returning();\n            session = newSession;\n        } else if (clientEmail && !session.clientEmail) {\n            [session] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.update(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatSessions).set({\n                clientEmail\n            }).where((0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatSessions.id, session.id)).returning();\n        }\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.insert(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatMessages).values({\n            sessionId: session.id,\n            role: \"user\",\n            content: message\n        });\n        const chatHistory = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query.timelineChatMessages.findMany({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatMessages.sessionId, session.id),\n            orderBy: [\n                (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.desc)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatMessages.createdAt)\n            ],\n            limit: 20\n        });\n        const timelineData = timeline.timelineData;\n        const project = timeline.project;\n        const orgSettings = project.organization.settings;\n        const systemPrompt = `You are an AI assistant helping a client explore scope changes for their project.\n\nProject: ${project.name}\nProject Type: ${project.projectType}\nCurrent Budget: $${project.budget?.toLocaleString() || \"Not specified\"}\nCurrent Timeline: ${project.estimatedWeeks} weeks\nHourly Rate: $${orgSettings?.defaultHourlyRate || 150}\n\nCurrent Project Timeline:\n${JSON.stringify(timelineData, null, 2)}\n\nYour role:\n1. Answer questions about the current scope and timeline\n2. When the client suggests changes (adding features, extending timeline, etc.), calculate the impact\n3. For scope changes, respond with a JSON proposal in this format:\n{\n  \"type\": \"scope_change\",\n  \"summary\": \"Brief description of the change\",\n  \"changes\": [\"Change 1\", \"Change 2\"],\n  \"deltaCost\": 5000,\n  \"deltaWeeks\": 2,\n  \"reasoning\": \"Explanation of the estimate\"\n}\n\n4. For general questions, respond conversationally without the JSON format\n\nBe helpful, professional, and transparent about costs and timeline impacts.`;\n        let messages = chatHistory.reverse().map((msg)=>({\n                role: msg.role,\n                content: msg.content\n            }));\n        while(messages.length > 0 && messages[0].role === \"assistant\"){\n            messages.shift();\n        }\n        if (messages.length === 0 || messages[messages.length - 1].role !== \"user\") {\n            messages.push({\n                role: \"user\",\n                content: message\n            });\n        }\n        const response = await anthropic.messages.create({\n            model: \"claude-3-5-sonnet-20241022\",\n            max_tokens: 2000,\n            system: systemPrompt,\n            messages\n        });\n        const assistantMessage = response.content[0].type === \"text\" ? response.content[0].text : \"\";\n        await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.insert(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatMessages).values({\n            sessionId: session.id,\n            role: \"assistant\",\n            content: assistantMessage\n        });\n        let proposal = null;\n        const jsonMatch = assistantMessage.match(/\\{[\\s\\S]*\"type\"\\s*:\\s*\"scope_change\"[\\s\\S]*\\}/);\n        if (jsonMatch) {\n            try {\n                const proposalData = JSON.parse(jsonMatch[0]);\n                const validatedProposal = proposalSchema.parse(proposalData);\n                const [newProposal] = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.insert(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineProposals).values({\n                    sessionId: session.id,\n                    baseTimelineId: timeline.id,\n                    proposalData: validatedProposal,\n                    deltaCost: validatedProposal.deltaCost.toString(),\n                    deltaWeeks: validatedProposal.deltaWeeks.toString(),\n                    status: \"draft\",\n                    summary: validatedProposal.summary\n                }).returning();\n                proposal = newProposal;\n            } catch (e) {\n                console.error(\"Failed to parse or validate proposal JSON:\", e);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            message: assistantMessage,\n            proposal: proposal ? {\n                id: proposal.id,\n                summary: proposal.summary,\n                deltaCost: parseFloat(proposal.deltaCost),\n                deltaWeeks: parseFloat(proposal.deltaWeeks),\n                proposalData: proposal.proposalData\n            } : null,\n            sessionId: session.id\n        });\n    } catch (error) {\n        console.error(\"Chat endpoint error:\", error);\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_5__.ZodError) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid request data\",\n                details: error.errors\n            }, {\n                status: 400\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to process chat message\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function GET(request, { params }) {\n    try {\n        const { shareToken } = params;\n        const session = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query.timelineChatSessions.findFirst({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatSessions.shareToken, shareToken)\n        });\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                messages: [],\n                proposals: [],\n                sessionId: null,\n                session: null\n            });\n        }\n        const messages = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query.timelineChatMessages.findMany({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatMessages.sessionId, session.id),\n            orderBy: [\n                (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.desc)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineChatMessages.createdAt)\n            ]\n        });\n        const proposals = await _lib_db__WEBPACK_IMPORTED_MODULE_1__.db.query.timelineProposals.findMany({\n            where: (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_6__.eq)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineProposals.sessionId, session.id),\n            orderBy: [\n                (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_7__.desc)(_lib_schema__WEBPACK_IMPORTED_MODULE_2__.timelineProposals.createdAt)\n            ]\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            sessionId: session.id,\n            session: {\n                clientEmail: session.clientEmail\n            },\n            messages: messages.reverse().map((msg)=>({\n                    id: msg.id,\n                    role: msg.role,\n                    content: msg.content,\n                    createdAt: msg.createdAt\n                })),\n            proposals: proposals.map((p)=>({\n                    id: p.id,\n                    summary: p.summary,\n                    deltaCost: parseFloat(p.deltaCost),\n                    deltaWeeks: parseFloat(p.deltaWeeks),\n                    proposalData: p.proposalData,\n                    status: p.status,\n                    createdAt: p.createdAt\n                }))\n        });\n    } catch (error) {\n        console.error(\"Get chat history error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch chat history\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3RpbWVsaW5lcy9bc2hhcmVUb2tlbl0vY2hhdC9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQXdEO0FBQzFCO0FBT1I7QUFDaUI7QUFDZjtBQUNrQjtBQUNRO0FBRWxELE1BQU1XLFlBQVksSUFBSUYseURBQVNBLENBQUM7SUFDOUJHLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0FBQ3ZDO0FBRUEsTUFBTUMsb0JBQW9CUix1Q0FBUSxDQUFDO0lBQ2pDVSxTQUFTVix1Q0FBUSxHQUFHWSxHQUFHLENBQUMsR0FBR0MsR0FBRyxDQUFDO0lBQy9CQyxhQUFhZCx1Q0FBUSxHQUFHZSxLQUFLLEdBQUdDLFFBQVE7QUFDMUM7QUFFQSxNQUFNQyxpQkFBaUJqQix1Q0FBUSxDQUFDO0lBQzlCa0IsTUFBTWxCLHdDQUFTLENBQUM7SUFDaEJvQixTQUFTcEIsdUNBQVE7SUFDakJxQixTQUFTckIsc0NBQU8sQ0FBQ0EsdUNBQVE7SUFDekJ1QixXQUFXdkIsdUNBQVE7SUFDbkJ5QixZQUFZekIsdUNBQVE7SUFDcEIwQixXQUFXMUIsdUNBQVE7QUFDckI7QUFFTyxlQUFlMkIsS0FDcEJDLE9BQW9CLEVBQ3BCLEVBQUVDLE1BQU0sRUFBc0M7SUFFOUMsSUFBSTtRQUNGLElBQUksQ0FBQ3hCLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCLEVBQUU7WUFDbEMsT0FBT2YscURBQVlBLENBQUNzQyxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXdELEdBQ2pFO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxNQUFNQyxLQUFLTCxRQUFRTSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxzQkFBc0JQLFFBQVFNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGdCQUFnQjtRQUN6RixNQUFNQyxrQkFBa0JsQywrREFBY0EsQ0FBQytCLElBQUksTUFBTTtZQUFFSSxhQUFhO1lBQUlDLFVBQVU7UUFBTTtRQUVwRixJQUFJLENBQUNGLGdCQUFnQkcsT0FB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LEdBQUdDLEdBQUcsQ0FBQ0MsQ0FBQUEsTUFBUTtvQkFDdkMxQixJQUFJMEIsSUFBSTFCLEVBQUU7b0JBQ1ZLLE1BQU1xQixJQUFJckIsSUFBSTtvQkFDZEMsU0FBU29CLElBQUlwQixPQUFPO29CQUNwQkksV0FBV2dCLElBQUloQixTQUFTO2dCQUMxQjtZQUNBMEMsV0FBV0EsVUFBVTNCLEdBQUcsQ0FBQzRCLENBQUFBLElBQU07b0JBQzdCckQsSUFBSXFELEVBQUVyRCxFQUFFO29CQUNSckMsU0FBUzBGLEVBQUUxRixPQUFPO29CQUNsQkcsV0FBV2lGLFdBQVdNLEVBQUV2RixTQUFTO29CQUNqQ0UsWUFBWStFLFdBQVdNLEVBQUVyRixVQUFVO29CQUNuQ3dFLGNBQWNhLEVBQUViLFlBQVk7b0JBQzVCakUsUUFBUThFLEVBQUU5RSxNQUFNO29CQUNoQm1DLFdBQVcyQyxFQUFFM0MsU0FBUztnQkFDeEI7UUFDRjtJQUVGLEVBQUUsT0FBT3BDLE9BQU87UUFDZHdFLFFBQVF4RSxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPdkMscURBQVlBLENBQUNzQyxJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBK0IsR0FDeEM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9hcHAvYXBpL3RpbWVsaW5lcy9bc2hhcmVUb2tlbl0vY2hhdC9yb3V0ZS50cz9kOTJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBkYiB9IGZyb20gJ0AvbGliL2RiJztcbmltcG9ydCB7XG4gIHRpbWVsaW5lQ2hhdFNlc3Npb25zLFxuICB0aW1lbGluZUNoYXRNZXNzYWdlcyxcbiAgdGltZWxpbmVQcm9wb3NhbHMsXG4gIHByb2plY3RUaW1lbGluZXMsXG4gIHByb2plY3RzLFxufSBmcm9tICdAL2xpYi9zY2hlbWEnO1xuaW1wb3J0IHsgZXEsIGRlc2MgfSBmcm9tICdkcml6emxlLW9ybSc7XG5pbXBvcnQgeyB6IH0gZnJvbSAnem9kJztcbmltcG9ydCBBbnRocm9waWMgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnO1xuaW1wb3J0IHsgYXBwbHlSYXRlTGltaXQgfSBmcm9tICdAL2xpYi9yYXRlLWxpbWl0JztcblxuY29uc3QgYW50aHJvcGljID0gbmV3IEFudGhyb3BpYyh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVksXG59KTtcblxuY29uc3QgY2hhdFJlcXVlc3RTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIG1lc3NhZ2U6IHouc3RyaW5nKCkubWluKDEpLm1heCg1MDAwKSxcbiAgY2xpZW50RW1haWw6IHouc3RyaW5nKCkuZW1haWwoKS5vcHRpb25hbCgpLFxufSk7XG5cbmNvbnN0IHByb3Bvc2FsU2NoZW1hID0gei5vYmplY3Qoe1xuICB0eXBlOiB6LmxpdGVyYWwoJ3Njb3BlX2NoYW5nZScpLFxuICBzdW1tYXJ5OiB6LnN0cmluZygpLFxuICBjaGFuZ2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICBkZWx0YUNvc3Q6IHoubnVtYmVyKCksXG4gIGRlbHRhV2Vla3M6IHoubnVtYmVyKCksXG4gIHJlYXNvbmluZzogei5zdHJpbmcoKSxcbn0pO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChcbiAgcmVxdWVzdDogTmV4dFJlcXVlc3QsXG4gIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IHNoYXJlVG9rZW46IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGlmICghcHJvY2Vzcy5lbnYuQU5USFJPUElDX0FQSV9LRVkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0FJIHNlcnZpY2UgaXMgbm90IGNvbmZpZ3VyZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuJyB9LFxuICAgICAgICB7IHN0YXR1czogNTAzIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgaXAgPSByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LWZvcndhcmRlZC1mb3InKSB8fCByZXF1ZXN0LmhlYWRlcnMuZ2V0KCd4LXJlYWwtaXAnKSB8fCAndW5rbm93bic7XG4gICAgY29uc3QgcmF0ZUxpbWl0UmVzdWx0ID0gYXBwbHlSYXRlTGltaXQoaXAsICdhaScsIHsgbWF4UmVxdWVzdHM6IDEwLCB3aW5kb3dNczogNjAwMDAgfSk7XG4gICAgXG4gICAgaWYgKCFyYXRlTGltaXRSZXN1bHQuYWxsb3dlZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnUmF0ZSBsaW1pdCBleGNlZWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MjkgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHNoYXJlVG9rZW4gfSA9IHBhcmFtcztcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBtZXNzYWdlLCBjbGllbnRFbWFpbCB9ID0gY2hhdFJlcXVlc3RTY2hlbWEucGFyc2UoYm9keSk7XG5cbiAgICBjb25zdCB0aW1lbGluZSA9IGF3YWl0IGRiLnF1ZXJ5LnByb2plY3RUaW1lbGluZXMuZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiBlcShwcm9qZWN0VGltZWxpbmVzLnNoYXJlVG9rZW4sIHNoYXJlVG9rZW4pLFxuICAgICAgd2l0aDoge1xuICAgICAgICBwcm9qZWN0OiB7XG4gICAgICAgICAgd2l0aDoge1xuICAgICAgICAgICAgb3JnYW5pemF0aW9uOiB7XG4gICAgICAgICAgICAgIHdpdGg6IHtcbiAgICAgICAgICAgICAgICBzZXR0aW5nczogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXRpbWVsaW5lKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdUaW1lbGluZSBub3QgZm91bmQnIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDQgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBsZXQgc2Vzc2lvbiA9IGF3YWl0IGRiLnF1ZXJ5LnRpbWVsaW5lQ2hhdFNlc3Npb25zLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogZXEodGltZWxpbmVDaGF0U2Vzc2lvbnMuc2hhcmVUb2tlbiwgc2hhcmVUb2tlbiksXG4gICAgfSk7XG5cbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIGNvbnN0IFtuZXdTZXNzaW9uXSA9IGF3YWl0IGRiXG4gICAgICAgIC5pbnNlcnQodGltZWxpbmVDaGF0U2Vzc2lvbnMpXG4gICAgICAgIC52YWx1ZXMoe1xuICAgICAgICAgIHNoYXJlVG9rZW4sXG4gICAgICAgICAgcHJvamVjdElkOiB0aW1lbGluZS5wcm9qZWN0SWQsXG4gICAgICAgICAgdGltZWxpbmVJZDogdGltZWxpbmUuaWQsXG4gICAgICAgICAgY2xpZW50RW1haWw6IGNsaWVudEVtYWlsIHx8IG51bGwsXG4gICAgICAgIH0pXG4gICAgICAgIC5yZXR1cm5pbmcoKTtcbiAgICAgIHNlc3Npb24gPSBuZXdTZXNzaW9uO1xuICAgIH0gZWxzZSBpZiAoY2xpZW50RW1haWwgJiYgIXNlc3Npb24uY2xpZW50RW1haWwpIHtcbiAgICAgIFtzZXNzaW9uXSA9IGF3YWl0IGRiXG4gICAgICAgIC51cGRhdGUodGltZWxpbmVDaGF0U2Vzc2lvbnMpXG4gICAgICAgIC5zZXQoeyBjbGllbnRFbWFpbCB9KVxuICAgICAgICAud2hlcmUoZXEodGltZWxpbmVDaGF0U2Vzc2lvbnMuaWQsIHNlc3Npb24uaWQpKVxuICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgfVxuXG4gICAgYXdhaXQgZGIuaW5zZXJ0KHRpbWVsaW5lQ2hhdE1lc3NhZ2VzKS52YWx1ZXMoe1xuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uLmlkLFxuICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgY29udGVudDogbWVzc2FnZSxcbiAgICB9KTtcblxuICAgIGNvbnN0IGNoYXRIaXN0b3J5ID0gYXdhaXQgZGIucXVlcnkudGltZWxpbmVDaGF0TWVzc2FnZXMuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IGVxKHRpbWVsaW5lQ2hhdE1lc3NhZ2VzLnNlc3Npb25JZCwgc2Vzc2lvbi5pZCksXG4gICAgICBvcmRlckJ5OiBbZGVzYyh0aW1lbGluZUNoYXRNZXNzYWdlcy5jcmVhdGVkQXQpXSxcbiAgICAgIGxpbWl0OiAyMCxcbiAgICB9KTtcblxuICAgIGNvbnN0IHRpbWVsaW5lRGF0YSA9IHRpbWVsaW5lLnRpbWVsaW5lRGF0YSBhcyBhbnk7XG4gICAgY29uc3QgcHJvamVjdCA9IHRpbWVsaW5lLnByb2plY3Q7XG4gICAgY29uc3Qgb3JnU2V0dGluZ3MgPSBwcm9qZWN0Lm9yZ2FuaXphdGlvbi5zZXR0aW5ncztcblxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIGFuIEFJIGFzc2lzdGFudCBoZWxwaW5nIGEgY2xpZW50IGV4cGxvcmUgc2NvcGUgY2hhbmdlcyBmb3IgdGhlaXIgcHJvamVjdC5cblxuUHJvamVjdDogJHtwcm9qZWN0Lm5hbWV9XG5Qcm9qZWN0IFR5cGU6ICR7cHJvamVjdC5wcm9qZWN0VHlwZX1cbkN1cnJlbnQgQnVkZ2V0OiAkJHtwcm9qZWN0LmJ1ZGdldD8udG9Mb2NhbGVTdHJpbmcoKSB8fCAnTm90IHNwZWNpZmllZCd9XG5DdXJyZW50IFRpbWVsaW5lOiAke3Byb2plY3QuZXN0aW1hdGVkV2Vla3N9IHdlZWtzXG5Ib3VybHkgUmF0ZTogJCR7b3JnU2V0dGluZ3M/LmRlZmF1bHRIb3VybHlSYXRlIHx8IDE1MH1cblxuQ3VycmVudCBQcm9qZWN0IFRpbWVsaW5lOlxuJHtKU09OLnN0cmluZ2lmeSh0aW1lbGluZURhdGEsIG51bGwsIDIpfVxuXG5Zb3VyIHJvbGU6XG4xLiBBbnN3ZXIgcXVlc3Rpb25zIGFib3V0IHRoZSBjdXJyZW50IHNjb3BlIGFuZCB0aW1lbGluZVxuMi4gV2hlbiB0aGUgY2xpZW50IHN1Z2dlc3RzIGNoYW5nZXMgKGFkZGluZyBmZWF0dXJlcywgZXh0ZW5kaW5nIHRpbWVsaW5lLCBldGMuKSwgY2FsY3VsYXRlIHRoZSBpbXBhY3RcbjMuIEZvciBzY29wZSBjaGFuZ2VzLCByZXNwb25kIHdpdGggYSBKU09OIHByb3Bvc2FsIGluIHRoaXMgZm9ybWF0Olxue1xuICBcInR5cGVcIjogXCJzY29wZV9jaGFuZ2VcIixcbiAgXCJzdW1tYXJ5XCI6IFwiQnJpZWYgZGVzY3JpcHRpb24gb2YgdGhlIGNoYW5nZVwiLFxuICBcImNoYW5nZXNcIjogW1wiQ2hhbmdlIDFcIiwgXCJDaGFuZ2UgMlwiXSxcbiAgXCJkZWx0YUNvc3RcIjogNTAwMCxcbiAgXCJkZWx0YVdlZWtzXCI6IDIsXG4gIFwicmVhc29uaW5nXCI6IFwiRXhwbGFuYXRpb24gb2YgdGhlIGVzdGltYXRlXCJcbn1cblxuNC4gRm9yIGdlbmVyYWwgcXVlc3Rpb25zLCByZXNwb25kIGNvbnZlcnNhdGlvbmFsbHkgd2l0aG91dCB0aGUgSlNPTiBmb3JtYXRcblxuQmUgaGVscGZ1bCwgcHJvZmVzc2lvbmFsLCBhbmQgdHJhbnNwYXJlbnQgYWJvdXQgY29zdHMgYW5kIHRpbWVsaW5lIGltcGFjdHMuYDtcblxuICAgIGxldCBtZXNzYWdlcyA9IGNoYXRIaXN0b3J5XG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAubWFwKChtc2cpID0+ICh7XG4gICAgICAgIHJvbGU6IG1zZy5yb2xlIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxuICAgICAgICBjb250ZW50OiBtc2cuY29udGVudCxcbiAgICAgIH0pKTtcblxuICAgIHdoaWxlIChtZXNzYWdlcy5sZW5ndGggPiAwICYmIG1lc3NhZ2VzWzBdLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XG4gICAgICBtZXNzYWdlcy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDAgfHwgbWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0ucm9sZSAhPT0gJ3VzZXInKSB7XG4gICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiBtZXNzYWdlIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYW50aHJvcGljLm1lc3NhZ2VzLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyJyxcbiAgICAgIG1heF90b2tlbnM6IDIwMDAsXG4gICAgICBzeXN0ZW06IHN5c3RlbVByb21wdCxcbiAgICAgIG1lc3NhZ2VzLFxuICAgIH0pO1xuXG4gICAgY29uc3QgYXNzaXN0YW50TWVzc2FnZSA9IHJlc3BvbnNlLmNvbnRlbnRbMF0udHlwZSA9PT0gJ3RleHQnIFxuICAgICAgPyByZXNwb25zZS5jb250ZW50WzBdLnRleHQgXG4gICAgICA6ICcnO1xuXG4gICAgYXdhaXQgZGIuaW5zZXJ0KHRpbWVsaW5lQ2hhdE1lc3NhZ2VzKS52YWx1ZXMoe1xuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uLmlkLFxuICAgICAgcm9sZTogJ2Fzc2lzdGFudCcsXG4gICAgICBjb250ZW50OiBhc3Npc3RhbnRNZXNzYWdlLFxuICAgIH0pO1xuXG4gICAgbGV0IHByb3Bvc2FsID0gbnVsbDtcbiAgICBjb25zdCBqc29uTWF0Y2ggPSBhc3Npc3RhbnRNZXNzYWdlLm1hdGNoKC9cXHtbXFxzXFxTXSpcInR5cGVcIlxccyo6XFxzKlwic2NvcGVfY2hhbmdlXCJbXFxzXFxTXSpcXH0vKTtcbiAgICBpZiAoanNvbk1hdGNoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwcm9wb3NhbERhdGEgPSBKU09OLnBhcnNlKGpzb25NYXRjaFswXSk7XG4gICAgICAgIGNvbnN0IHZhbGlkYXRlZFByb3Bvc2FsID0gcHJvcG9zYWxTY2hlbWEucGFyc2UocHJvcG9zYWxEYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IFtuZXdQcm9wb3NhbF0gPSBhd2FpdCBkYlxuICAgICAgICAgIC5pbnNlcnQodGltZWxpbmVQcm9wb3NhbHMpXG4gICAgICAgICAgLnZhbHVlcyh7XG4gICAgICAgICAgICBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsXG4gICAgICAgICAgICBiYXNlVGltZWxpbmVJZDogdGltZWxpbmUuaWQsXG4gICAgICAgICAgICBwcm9wb3NhbERhdGE6IHZhbGlkYXRlZFByb3Bvc2FsLFxuICAgICAgICAgICAgZGVsdGFDb3N0OiB2YWxpZGF0ZWRQcm9wb3NhbC5kZWx0YUNvc3QudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIGRlbHRhV2Vla3M6IHZhbGlkYXRlZFByb3Bvc2FsLmRlbHRhV2Vla3MudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogJ2RyYWZ0JyxcbiAgICAgICAgICAgIHN1bW1hcnk6IHZhbGlkYXRlZFByb3Bvc2FsLnN1bW1hcnksXG4gICAgICAgICAgfSlcbiAgICAgICAgICAucmV0dXJuaW5nKCk7XG4gICAgICAgIHByb3Bvc2FsID0gbmV3UHJvcG9zYWw7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBvciB2YWxpZGF0ZSBwcm9wb3NhbCBKU09OOicsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlOiBhc3Npc3RhbnRNZXNzYWdlLFxuICAgICAgcHJvcG9zYWw6IHByb3Bvc2FsID8ge1xuICAgICAgICBpZDogcHJvcG9zYWwuaWQsXG4gICAgICAgIHN1bW1hcnk6IHByb3Bvc2FsLnN1bW1hcnksXG4gICAgICAgIGRlbHRhQ29zdDogcGFyc2VGbG9hdChwcm9wb3NhbC5kZWx0YUNvc3QpLFxuICAgICAgICBkZWx0YVdlZWtzOiBwYXJzZUZsb2F0KHByb3Bvc2FsLmRlbHRhV2Vla3MpLFxuICAgICAgICBwcm9wb3NhbERhdGE6IHByb3Bvc2FsLnByb3Bvc2FsRGF0YSxcbiAgICAgIH0gOiBudWxsLFxuICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uLmlkLFxuICAgIH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignQ2hhdCBlbmRwb2ludCBlcnJvcjonLCBlcnJvcik7XG4gICAgXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCByZXF1ZXN0IGRhdGEnLCBkZXRhaWxzOiBlcnJvci5lcnJvcnMgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gcHJvY2VzcyBjaGF0IG1lc3NhZ2UnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoXG4gIHJlcXVlc3Q6IE5leHRSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyBzaGFyZVRva2VuOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNoYXJlVG9rZW4gfSA9IHBhcmFtcztcblxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBkYi5xdWVyeS50aW1lbGluZUNoYXRTZXNzaW9ucy5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IGVxKHRpbWVsaW5lQ2hhdFNlc3Npb25zLnNoYXJlVG9rZW4sIHNoYXJlVG9rZW4pLFxuICAgIH0pO1xuXG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgbWVzc2FnZXM6IFtdLCBcbiAgICAgICAgcHJvcG9zYWxzOiBbXSxcbiAgICAgICAgc2Vzc2lvbklkOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCBkYi5xdWVyeS50aW1lbGluZUNoYXRNZXNzYWdlcy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogZXEodGltZWxpbmVDaGF0TWVzc2FnZXMuc2Vzc2lvbklkLCBzZXNzaW9uLmlkKSxcbiAgICAgIG9yZGVyQnk6IFtkZXNjKHRpbWVsaW5lQ2hhdE1lc3NhZ2VzLmNyZWF0ZWRBdCldLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcHJvcG9zYWxzID0gYXdhaXQgZGIucXVlcnkudGltZWxpbmVQcm9wb3NhbHMuZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IGVxKHRpbWVsaW5lUHJvcG9zYWxzLnNlc3Npb25JZCwgc2Vzc2lvbi5pZCksXG4gICAgICBvcmRlckJ5OiBbZGVzYyh0aW1lbGluZVByb3Bvc2Fscy5jcmVhdGVkQXQpXSxcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBzZXNzaW9uSWQ6IHNlc3Npb24uaWQsXG4gICAgICBzZXNzaW9uOiB7XG4gICAgICAgIGNsaWVudEVtYWlsOiBzZXNzaW9uLmNsaWVudEVtYWlsLFxuICAgICAgfSxcbiAgICAgIG1lc3NhZ2VzOiBtZXNzYWdlcy5yZXZlcnNlKCkubWFwKG1zZyA9PiAoe1xuICAgICAgICBpZDogbXNnLmlkLFxuICAgICAgICByb2xlOiBtc2cucm9sZSxcbiAgICAgICAgY29udGVudDogbXNnLmNvbnRlbnQsXG4gICAgICAgIGNyZWF0ZWRBdDogbXNnLmNyZWF0ZWRBdCxcbiAgICAgIH0pKSxcbiAgICAgIHByb3Bvc2FsczogcHJvcG9zYWxzLm1hcChwID0+ICh7XG4gICAgICAgIGlkOiBwLmlkLFxuICAgICAgICBzdW1tYXJ5OiBwLnN1bW1hcnksXG4gICAgICAgIGRlbHRhQ29zdDogcGFyc2VGbG9hdChwLmRlbHRhQ29zdCksXG4gICAgICAgIGRlbHRhV2Vla3M6IHBhcnNlRmxvYXQocC5kZWx0YVdlZWtzKSxcbiAgICAgICAgcHJvcG9zYWxEYXRhOiBwLnByb3Bvc2FsRGF0YSxcbiAgICAgICAgc3RhdHVzOiBwLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZEF0OiBwLmNyZWF0ZWRBdCxcbiAgICAgIH0pKSxcbiAgICB9KTtcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0dldCBjaGF0IGhpc3RvcnkgZXJyb3I6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggY2hhdCBoaXN0b3J5JyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImRiIiwidGltZWxpbmVDaGF0U2Vzc2lvbnMiLCJ0aW1lbGluZUNoYXRNZXNzYWdlcyIsInRpbWVsaW5lUHJvcG9zYWxzIiwicHJvamVjdFRpbWVsaW5lcyIsImVxIiwiZGVzYyIsInoiLCJBbnRocm9waWMiLCJhcHBseVJhdGVMaW1pdCIsImFudGhyb3BpYyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsImNoYXRSZXF1ZXN0U2NoZW1hIiwib2JqZWN0IiwibWVzc2FnZSIsInN0cmluZyIsIm1pbiIsIm1heCIsImNsaWVudEVtYWlsIiwiZW1haWwiLCJvcHRpb25hbCIsInByb3Bvc2FsU2NoZW1hIiwidHlwZSIsImxpdGVyYWwiLCJzdW1tYXJ5IiwiY2hhbmdlcyIsImFycmF5IiwiZGVsdGFDb3N0IiwibnVtYmVyIiwiZGVsdGFXZWVrcyIsInJlYXNvbmluZyIsIlBPU1QiLCJyZXF1ZXN0IiwicGFyYW1zIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiaXAiLCJoZWFkZXJzIiwiZ2V0IiwicmF0ZUxpbWl0UmVzdWx0IiwibWF4UmVxdWVzdHMiLCJ3aW5kb3dNcyIsImFsbG93ZWQiLCJzaGFyZVRva2VuIiwiYm9keSIsInBhcnNlIiwidGltZWxpbmUiLCJxdWVyeSIsImZpbmRGaXJzdCIsIndoZXJlIiwid2l0aCIsInByb2plY3QiLCJvcmdhbml6YXRpb24iLCJzZXR0aW5ncyIsInNlc3Npb24iLCJuZXdTZXNzaW9uIiwiaW5zZXJ0IiwidmFsdWVzIiwicHJvamVjdElkIiwidGltZWxpbmVJZCIsImlkIiwicmV0dXJuaW5nIiwidXBkYXRlIiwic2V0Iiwic2Vzc2lvbklkIiwicm9sZSIsImNvbnRlbnQiLCJjaGF0SGlzdG9yeSIsImZpbmRNYW55Iiwib3JkZXJCeSIsImNyZWF0ZWRBdCIsImxpbWl0IiwidGltZWxpbmVEYXRhIiwib3JnU2V0dGluZ3MiLCJzeXN0ZW1Qcm9tcHQiLCJuYW1lIiwicHJvamVjdFR5cGUiLCJidWRnZXQiLCJ0b0xvY2FsZVN0cmluZyIsImVzdGltYXRlZFdlZWtzIiwiZGVmYXVsdEhvdXJseVJhdGUiLCJKU09OIiwic3RyaW5naWZ5IiwibWVzc2FnZXMiLCJyZXZlcnNlIiwibWFwIiwibXNnIiwibGVuZ3RoIiwic2hpZnQiLCJwdXNoIiwicmVzcG9uc2UiLCJjcmVhdGUiLCJtb2RlbCIsIm1heF90b2tlbnMiLCJzeXN0ZW0iLCJhc3Npc3RhbnRNZXNzYWdlIiwidGV4dCIsInByb3Bvc2FsIiwianNvbk1hdGNoIiwibWF0Y2giLCJwcm9wb3NhbERhdGEiLCJ2YWxpZGF0ZWRQcm9wb3NhbCIsIm5ld1Byb3Bvc2FsIiwiYmFzZVRpbWVsaW5lSWQiLCJ0b1N0cmluZyIsImUiLCJjb25zb2xlIiwicGFyc2VGbG9hdCIsIlpvZEVycm9yIiwiZGV0YWlscyIsImVycm9ycyIsIkdFVCIsInByb3Bvc2FscyIsInAiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/timelines/[shareToken]/chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   db: () => (/* binding */ db),\n/* harmony export */   pool: () => (/* binding */ pool)\n/* harmony export */ });\n/* harmony import */ var _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @neondatabase/serverless */ \"(rsc)/./node_modules/@neondatabase/serverless/index.mjs\");\n/* harmony import */ var drizzle_orm_neon_serverless__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/neon-serverless */ \"(rsc)/./node_modules/drizzle-orm/neon-serverless/driver.js\");\n/* harmony import */ var ws__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ws */ \"(rsc)/./node_modules/ws/wrapper.mjs\");\n/* harmony import */ var _lib_schema__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/schema */ \"(rsc)/./lib/schema.ts\");\n\n\n\n\n_neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.neonConfig.webSocketConstructor = ws__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\nif (!process.env.DATABASE_URL) {\n    throw new Error(\"DATABASE_URL must be set. Did you forget to provision a database?\");\n}\nconst pool = new _neondatabase_serverless__WEBPACK_IMPORTED_MODULE_0__.Pool({\n    connectionString: process.env.DATABASE_URL\n});\nconst db = (0,drizzle_orm_neon_serverless__WEBPACK_IMPORTED_MODULE_3__.drizzle)({\n    client: pool,\n    schema: _lib_schema__WEBPACK_IMPORTED_MODULE_2__\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQTREO0FBQ047QUFDbEM7QUFDbUI7QUFFdkNDLGdFQUFVQSxDQUFDSSxvQkFBb0IsR0FBR0YsMENBQUVBO0FBRXBDLElBQUksQ0FBQ0csUUFBUUMsR0FBRyxDQUFDQyxZQUFZLEVBQUU7SUFDN0IsTUFBTSxJQUFJQyxNQUNSO0FBRUo7QUFFTyxNQUFNQyxPQUFPLElBQUlWLDBEQUFJQSxDQUFDO0lBQUVXLGtCQUFrQkwsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0FBQUMsR0FBRztBQUN0RSxNQUFNSSxLQUFLVixvRUFBT0EsQ0FBQztJQUFFVyxRQUFRSDtJQUFNTixNQUFNQSwwQ0FBQUE7QUFBQyxHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbGliL2RiLnRzPzFkZjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUG9vbCwgbmVvbkNvbmZpZyB9IGZyb20gXCJAbmVvbmRhdGFiYXNlL3NlcnZlcmxlc3NcIjtcbmltcG9ydCB7IGRyaXp6bGUgfSBmcm9tIFwiZHJpenpsZS1vcm0vbmVvbi1zZXJ2ZXJsZXNzXCI7XG5pbXBvcnQgd3MgZnJvbSBcIndzXCI7XG5pbXBvcnQgKiBhcyBzY2hlbWEgZnJvbSBcIkAvbGliL3NjaGVtYVwiO1xuXG5uZW9uQ29uZmlnLndlYlNvY2tldENvbnN0cnVjdG9yID0gd3M7XG5cbmlmICghcHJvY2Vzcy5lbnYuREFUQUJBU0VfVVJMKSB7XG4gIHRocm93IG5ldyBFcnJvcihcbiAgICBcIkRBVEFCQVNFX1VSTCBtdXN0IGJlIHNldC4gRGlkIHlvdSBmb3JnZXQgdG8gcHJvdmlzaW9uIGEgZGF0YWJhc2U/XCJcbiAgKTtcbn1cblxuZXhwb3J0IGNvbnN0IHBvb2wgPSBuZXcgUG9vbCh7IGNvbm5lY3Rpb25TdHJpbmc6IHByb2Nlc3MuZW52LkRBVEFCQVNFX1VSTCB9KTtcbmV4cG9ydCBjb25zdCBkYiA9IGRyaXp6bGUoeyBjbGllbnQ6IHBvb2wsIHNjaGVtYSB9KTtcbiJdLCJuYW1lcyI6WyJQb29sIiwibmVvbkNvbmZpZyIsImRyaXp6bGUiLCJ3cyIsInNjaGVtYSIsIndlYlNvY2tldENvbnN0cnVjdG9yIiwicHJvY2VzcyIsImVudiIsIkRBVEFCQVNFX1VSTCIsIkVycm9yIiwicG9vbCIsImNvbm5lY3Rpb25TdHJpbmciLCJkYiIsImNsaWVudCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/db.ts\n");

/***/ }),

/***/ "(rsc)/./lib/rate-limit.ts":
/*!***************************!*\
  !*** ./lib/rate-limit.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   aiRateLimiter: () => (/* binding */ aiRateLimiter),\n/* harmony export */   authRateLimiter: () => (/* binding */ authRateLimiter),\n/* harmony export */   inviteRateLimiter: () => (/* binding */ inviteRateLimiter),\n/* harmony export */   rateLimit: () => (/* binding */ rateLimit)\n/* harmony export */ });\nconst rateLimitStore = new Map();\nconst MAX_STORE_SIZE = 10000;\nfunction cleanupExpiredRecords() {\n    const now = Date.now();\n    const keysToDelete = [];\n    for (const [key, record] of rateLimitStore.entries()){\n        if (now > record.resetTime) {\n            keysToDelete.push(key);\n        }\n    }\n    for (const key of keysToDelete){\n        rateLimitStore.delete(key);\n    }\n    if (rateLimitStore.size > MAX_STORE_SIZE) {\n        const oldestKeys = Array.from(rateLimitStore.keys()).slice(0, 1000);\n        for (const key of oldestKeys){\n            rateLimitStore.delete(key);\n        }\n    }\n}\nsetInterval(cleanupExpiredRecords, 60000);\nfunction rateLimit(config) {\n    return {\n        check: async (request)=>{\n            const now = Date.now();\n            const identifier = getClientIdentifier(request);\n            cleanupExpiredRecords();\n            const record = rateLimitStore.get(identifier);\n            if (!record || now > record.resetTime) {\n                rateLimitStore.set(identifier, {\n                    count: 1,\n                    resetTime: now + config.interval\n                });\n                return {\n                    success: true,\n                    remaining: config.maxRequests - 1\n                };\n            }\n            if (record.count >= config.maxRequests) {\n                return {\n                    success: false,\n                    remaining: 0,\n                    reset: Math.ceil((record.resetTime - now) / 1000)\n                };\n            }\n            record.count++;\n            return {\n                success: true,\n                remaining: config.maxRequests - record.count\n            };\n        }\n    };\n}\nfunction getClientIdentifier(request) {\n    const forwarded = request.headers.get(\"x-forwarded-for\");\n    const ip = forwarded ? forwarded.split(\",\")[0] : request.headers.get(\"x-real-ip\") || \"127.0.0.1\";\n    return `ip:${ip}`;\n}\nconst aiRateLimiter = rateLimit({\n    interval: 60 * 1000,\n    maxRequests: 10\n});\nconst authRateLimiter = rateLimit({\n    interval: 15 * 60 * 1000,\n    maxRequests: 5\n});\nconst inviteRateLimiter = rateLimit({\n    interval: 60 * 60 * 1000,\n    maxRequests: 10\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcmF0ZS1saW1pdC50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBT0EsTUFBTUEsaUJBQWlCLElBQUlDO0FBQzNCLE1BQU1DLGlCQUFpQjtBQUV2QixTQUFTQztJQUNQLE1BQU1DLE1BQU1DLEtBQUtELEdBQUc7SUFDcEIsTUFBTUUsZUFBeUIsRUFBRTtJQUVqQyxLQUFLLE1BQU0sQ0FBQ0MsS0FBS0MsT0FBTyxJQUFJUixlQUFlUyxPQUFPLEdBQUk7UUFDcEQsSUFBSUwsTUFBTUksT0FBT0UsU0FBUyxFQUFFO1lBQzFCSixhQUFhSyxJQUFJLENBQUNKO1FBQ3BCO0lBQ0Y7SUFFQSxLQUFLLE1BQU1BLE9BQU9ELGFBQWM7UUFDOUJOLGVBQWVZLE1BQU0sQ0FBQ0w7SUFDeEI7SUFFQSxJQUFJUCxlQUFlYSxJQUFJLEdBQUdYLGdCQUFnQjtRQUN4QyxNQUFNWSxhQUFhQyxNQUFNQyxJQUFJLENBQUNoQixlQUFlaUIsSUFBSSxJQUFJQyxLQUFLLENBQUMsR0FBRztRQUM5RCxLQUFLLE1BQU1YLE9BQU9PLFdBQVk7WUFDNUJkLGVBQWVZLE1BQU0sQ0FBQ0w7UUFDeEI7SUFDRjtBQUNGO0FBRUFZLFlBQVloQix1QkFBdUI7QUFFNUIsU0FBU2lCLFVBQVVDLE1BQXVCO0lBQy9DLE9BQU87UUFDTEMsT0FBTyxPQUFPQztZQUNaLE1BQU1uQixNQUFNQyxLQUFLRCxHQUFHO1lBQ3BCLE1BQU1vQixhQUFhQyxvQkFBb0JGO1lBRXZDcEI7WUFFQSxNQUFNSyxTQUFTUixlQUFlMEIsR0FBRyxDQUFDRjtZQUVsQyxJQUFJLENBQUNoQixVQUFVSixNQUFNSSxPQUFPRSxTQUFTLEVBQUU7Z0JBQ3JDVixlQUFlMkIsR0FBRyxDQUFDSCxZQUFZO29CQUM3QkksT0FBTztvQkFDUGxCLFdBQVdOLE1BQU1pQixPQUFPUSxRQUFRO2dCQUNsQztnQkFDQSxPQUFPO29CQUFFQyxTQUFTO29CQUFNQyxXQUFXVixPQUFPVyxXQUFXLEdBQUc7Z0JBQUU7WUFDNUQ7WUFFQSxJQUFJeEIsT0FBT29CLEtBQUssSUFBSVAsT0FBT1csV0FBVyxFQUFFO2dCQUN0QyxPQUFPO29CQUNMRixTQUFTO29CQUNUQyxXQUFXO29CQUNYRSxPQUFPQyxLQUFLQyxJQUFJLENBQUMsQ0FBQzNCLE9BQU9FLFNBQVMsR0FBR04sR0FBRSxJQUFLO2dCQUM5QztZQUNGO1lBRUFJLE9BQU9vQixLQUFLO1lBQ1osT0FBTztnQkFBRUUsU0FBUztnQkFBTUMsV0FBV1YsT0FBT1csV0FBVyxHQUFHeEIsT0FBT29CLEtBQUs7WUFBQztRQUN2RTtJQUNGO0FBQ0Y7QUFFQSxTQUFTSCxvQkFBb0JGLE9BQW9CO0lBQy9DLE1BQU1hLFlBQVliLFFBQVFjLE9BQU8sQ0FBQ1gsR0FBRyxDQUFDO0lBQ3RDLE1BQU1ZLEtBQUtGLFlBQVlBLFVBQVVHLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHaEIsUUFBUWMsT0FBTyxDQUFDWCxHQUFHLENBQUMsZ0JBQWdCO0lBQ3JGLE9BQU8sQ0FBQyxHQUFHLEVBQUVZLEdBQUcsQ0FBQztBQUNuQjtBQUVPLE1BQU1FLGdCQUFnQnBCLFVBQVU7SUFDckNTLFVBQVUsS0FBSztJQUNmRyxhQUFhO0FBQ2YsR0FBRztBQUVJLE1BQU1TLGtCQUFrQnJCLFVBQVU7SUFDdkNTLFVBQVUsS0FBSyxLQUFLO0lBQ3BCRyxhQUFhO0FBQ2YsR0FBRztBQUVJLE1BQU1VLG9CQUFvQnRCLFVBQVU7SUFDekNTLFVBQVUsS0FBSyxLQUFLO0lBQ3BCRyxhQUFhO0FBQ2YsR0FBRyIsInNvdXJjZXMiOlsid2VicGFjazovL3dvcmtzcGFjZS8uL2xpYi9yYXRlLWxpbWl0LnRzPzIyYzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcblxuaW50ZXJmYWNlIFJhdGVMaW1pdENvbmZpZyB7XG4gIGludGVydmFsOiBudW1iZXI7XG4gIG1heFJlcXVlc3RzOiBudW1iZXI7XG59XG5cbmNvbnN0IHJhdGVMaW1pdFN0b3JlID0gbmV3IE1hcDxzdHJpbmcsIHsgY291bnQ6IG51bWJlcjsgcmVzZXRUaW1lOiBudW1iZXIgfT4oKTtcbmNvbnN0IE1BWF9TVE9SRV9TSVpFID0gMTAwMDA7XG5cbmZ1bmN0aW9uIGNsZWFudXBFeHBpcmVkUmVjb3JkcygpIHtcbiAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgY29uc3Qga2V5c1RvRGVsZXRlOiBzdHJpbmdbXSA9IFtdO1xuICBcbiAgZm9yIChjb25zdCBba2V5LCByZWNvcmRdIG9mIHJhdGVMaW1pdFN0b3JlLmVudHJpZXMoKSkge1xuICAgIGlmIChub3cgPiByZWNvcmQucmVzZXRUaW1lKSB7XG4gICAgICBrZXlzVG9EZWxldGUucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICBcbiAgZm9yIChjb25zdCBrZXkgb2Yga2V5c1RvRGVsZXRlKSB7XG4gICAgcmF0ZUxpbWl0U3RvcmUuZGVsZXRlKGtleSk7XG4gIH1cbiAgXG4gIGlmIChyYXRlTGltaXRTdG9yZS5zaXplID4gTUFYX1NUT1JFX1NJWkUpIHtcbiAgICBjb25zdCBvbGRlc3RLZXlzID0gQXJyYXkuZnJvbShyYXRlTGltaXRTdG9yZS5rZXlzKCkpLnNsaWNlKDAsIDEwMDApO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIG9sZGVzdEtleXMpIHtcbiAgICAgIHJhdGVMaW1pdFN0b3JlLmRlbGV0ZShrZXkpO1xuICAgIH1cbiAgfVxufVxuXG5zZXRJbnRlcnZhbChjbGVhbnVwRXhwaXJlZFJlY29yZHMsIDYwMDAwKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHJhdGVMaW1pdChjb25maWc6IFJhdGVMaW1pdENvbmZpZykge1xuICByZXR1cm4ge1xuICAgIGNoZWNrOiBhc3luYyAocmVxdWVzdDogTmV4dFJlcXVlc3QpID0+IHtcbiAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBpZGVudGlmaWVyID0gZ2V0Q2xpZW50SWRlbnRpZmllcihyZXF1ZXN0KTtcbiAgICAgIFxuICAgICAgY2xlYW51cEV4cGlyZWRSZWNvcmRzKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlY29yZCA9IHJhdGVMaW1pdFN0b3JlLmdldChpZGVudGlmaWVyKTtcbiAgICAgIFxuICAgICAgaWYgKCFyZWNvcmQgfHwgbm93ID4gcmVjb3JkLnJlc2V0VGltZSkge1xuICAgICAgICByYXRlTGltaXRTdG9yZS5zZXQoaWRlbnRpZmllciwge1xuICAgICAgICAgIGNvdW50OiAxLFxuICAgICAgICAgIHJlc2V0VGltZTogbm93ICsgY29uZmlnLmludGVydmFsLFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgcmVtYWluaW5nOiBjb25maWcubWF4UmVxdWVzdHMgLSAxIH07XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChyZWNvcmQuY291bnQgPj0gY29uZmlnLm1heFJlcXVlc3RzKSB7XG4gICAgICAgIHJldHVybiB7IFxuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgICByZW1haW5pbmc6IDAsXG4gICAgICAgICAgcmVzZXQ6IE1hdGguY2VpbCgocmVjb3JkLnJlc2V0VGltZSAtIG5vdykgLyAxMDAwKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgXG4gICAgICByZWNvcmQuY291bnQrKztcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIHJlbWFpbmluZzogY29uZmlnLm1heFJlcXVlc3RzIC0gcmVjb3JkLmNvdW50IH07XG4gICAgfSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0Q2xpZW50SWRlbnRpZmllcihyZXF1ZXN0OiBOZXh0UmVxdWVzdCk6IHN0cmluZyB7XG4gIGNvbnN0IGZvcndhcmRlZCA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LWZvcndhcmRlZC1mb3JcIik7XG4gIGNvbnN0IGlwID0gZm9yd2FyZGVkID8gZm9yd2FyZGVkLnNwbGl0KFwiLFwiKVswXSA6IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXJlYWwtaXBcIikgfHwgXCIxMjcuMC4wLjFcIjtcbiAgcmV0dXJuIGBpcDoke2lwfWA7XG59XG5cbmV4cG9ydCBjb25zdCBhaVJhdGVMaW1pdGVyID0gcmF0ZUxpbWl0KHtcbiAgaW50ZXJ2YWw6IDYwICogMTAwMCxcbiAgbWF4UmVxdWVzdHM6IDEwLFxufSk7XG5cbmV4cG9ydCBjb25zdCBhdXRoUmF0ZUxpbWl0ZXIgPSByYXRlTGltaXQoe1xuICBpbnRlcnZhbDogMTUgKiA2MCAqIDEwMDAsXG4gIG1heFJlcXVlc3RzOiA1LFxufSk7XG5cbmV4cG9ydCBjb25zdCBpbnZpdGVSYXRlTGltaXRlciA9IHJhdGVMaW1pdCh7XG4gIGludGVydmFsOiA2MCAqIDYwICogMTAwMCxcbiAgbWF4UmVxdWVzdHM6IDEwLFxufSk7XG4iXSwibmFtZXMiOlsicmF0ZUxpbWl0U3RvcmUiLCJNYXAiLCJNQVhfU1RPUkVfU0laRSIsImNsZWFudXBFeHBpcmVkUmVjb3JkcyIsIm5vdyIsIkRhdGUiLCJrZXlzVG9EZWxldGUiLCJrZXkiLCJyZWNvcmQiLCJlbnRyaWVzIiwicmVzZXRUaW1lIiwicHVzaCIsImRlbGV0ZSIsInNpemUiLCJvbGRlc3RLZXlzIiwiQXJyYXkiLCJmcm9tIiwia2V5cyIsInNsaWNlIiwic2V0SW50ZXJ2YWwiLCJyYXRlTGltaXQiLCJjb25maWciLCJjaGVjayIsInJlcXVlc3QiLCJpZGVudGlmaWVyIiwiZ2V0Q2xpZW50SWRlbnRpZmllciIsImdldCIsInNldCIsImNvdW50IiwiaW50ZXJ2YWwiLCJzdWNjZXNzIiwicmVtYWluaW5nIiwibWF4UmVxdWVzdHMiLCJyZXNldCIsIk1hdGgiLCJjZWlsIiwiZm9yd2FyZGVkIiwiaGVhZGVycyIsImlwIiwic3BsaXQiLCJhaVJhdGVMaW1pdGVyIiwiYXV0aFJhdGVMaW1pdGVyIiwiaW52aXRlUmF0ZUxpbWl0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/rate-limit.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schema.ts":
/*!***********************!*\
  !*** ./lib/schema.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accounts: () => (/* binding */ accounts),\n/* harmony export */   accountsRelations: () => (/* binding */ accountsRelations),\n/* harmony export */   changeOrderStatusEnum: () => (/* binding */ changeOrderStatusEnum),\n/* harmony export */   chatMessageRoleEnum: () => (/* binding */ chatMessageRoleEnum),\n/* harmony export */   customProjectTypes: () => (/* binding */ customProjectTypes),\n/* harmony export */   customProjectTypesRelations: () => (/* binding */ customProjectTypesRelations),\n/* harmony export */   insertCustomProjectTypeSchema: () => (/* binding */ insertCustomProjectTypeSchema),\n/* harmony export */   insertOrganizationInviteSchema: () => (/* binding */ insertOrganizationInviteSchema),\n/* harmony export */   insertOrganizationSchema: () => (/* binding */ insertOrganizationSchema),\n/* harmony export */   insertOrganizationSettingsSchema: () => (/* binding */ insertOrganizationSettingsSchema),\n/* harmony export */   insertProjectChangeOrderSchema: () => (/* binding */ insertProjectChangeOrderSchema),\n/* harmony export */   insertProjectFormSchema: () => (/* binding */ insertProjectFormSchema),\n/* harmony export */   insertProjectSchema: () => (/* binding */ insertProjectSchema),\n/* harmony export */   insertProjectTimelineSchema: () => (/* binding */ insertProjectTimelineSchema),\n/* harmony export */   insertTimelineChatMessageSchema: () => (/* binding */ insertTimelineChatMessageSchema),\n/* harmony export */   insertTimelineChatSessionSchema: () => (/* binding */ insertTimelineChatSessionSchema),\n/* harmony export */   insertTimelineProposalSchema: () => (/* binding */ insertTimelineProposalSchema),\n/* harmony export */   insertUserSchema: () => (/* binding */ insertUserSchema),\n/* harmony export */   organizationInvites: () => (/* binding */ organizationInvites),\n/* harmony export */   organizationInvitesRelations: () => (/* binding */ organizationInvitesRelations),\n/* harmony export */   organizationMembers: () => (/* binding */ organizationMembers),\n/* harmony export */   organizationMembersRelations: () => (/* binding */ organizationMembersRelations),\n/* harmony export */   organizationSettings: () => (/* binding */ organizationSettings),\n/* harmony export */   organizationSettingsRelations: () => (/* binding */ organizationSettingsRelations),\n/* harmony export */   organizations: () => (/* binding */ organizations),\n/* harmony export */   organizationsRelations: () => (/* binding */ organizationsRelations),\n/* harmony export */   projectChangeOrders: () => (/* binding */ projectChangeOrders),\n/* harmony export */   projectForms: () => (/* binding */ projectForms),\n/* harmony export */   projectFormsRelations: () => (/* binding */ projectFormsRelations),\n/* harmony export */   projectStatusEnum: () => (/* binding */ projectStatusEnum),\n/* harmony export */   projectTimelines: () => (/* binding */ projectTimelines),\n/* harmony export */   projectTimelinesRelations: () => (/* binding */ projectTimelinesRelations),\n/* harmony export */   projectTypeEnum: () => (/* binding */ projectTypeEnum),\n/* harmony export */   projects: () => (/* binding */ projects),\n/* harmony export */   projectsRelations: () => (/* binding */ projectsRelations),\n/* harmony export */   proposalStatusEnum: () => (/* binding */ proposalStatusEnum),\n/* harmony export */   roleEnum: () => (/* binding */ roleEnum),\n/* harmony export */   sessions: () => (/* binding */ sessions),\n/* harmony export */   sessionsRelations: () => (/* binding */ sessionsRelations),\n/* harmony export */   timelineChatMessages: () => (/* binding */ timelineChatMessages),\n/* harmony export */   timelineChatSessions: () => (/* binding */ timelineChatSessions),\n/* harmony export */   timelineProposals: () => (/* binding */ timelineProposals),\n/* harmony export */   updateProjectSchema: () => (/* binding */ updateProjectSchema),\n/* harmony export */   users: () => (/* binding */ users),\n/* harmony export */   usersRelations: () => (/* binding */ usersRelations),\n/* harmony export */   verifications: () => (/* binding */ verifications)\n/* harmony export */ });\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/enum.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/table.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/text.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/boolean.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/timestamp.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/indexes.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/numeric.js\");\n/* harmony import */ var drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! drizzle-orm/pg-core */ \"(rsc)/./node_modules/drizzle-orm/pg-core/columns/jsonb.js\");\n/* harmony import */ var drizzle_orm__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! drizzle-orm */ \"(rsc)/./node_modules/drizzle-orm/relations.js\");\n/* harmony import */ var drizzle_zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! drizzle-zod */ \"(rsc)/./node_modules/drizzle-zod/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! nanoid */ \"(rsc)/./node_modules/nanoid/index.js\");\n\n\n\n\n\n// Enums\nconst roleEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgEnum)(\"role\", [\n    \"owner\",\n    \"member\"\n]);\nconst projectTypeEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgEnum)(\"project_type\", [\n    \"saas\",\n    \"mobile\",\n    \"web\",\n    \"ecommerce\",\n    \"custom\"\n]);\nconst projectStatusEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgEnum)(\"project_status\", [\n    \"draft\",\n    \"form_sent\",\n    \"scoping\",\n    \"approved\",\n    \"in_progress\",\n    \"completed\"\n]);\nconst chatMessageRoleEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgEnum)(\"chat_message_role\", [\n    \"user\",\n    \"assistant\",\n    \"system\"\n]);\nconst proposalStatusEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgEnum)(\"proposal_status\", [\n    \"draft\",\n    \"active\",\n    \"superseded\",\n    \"approved\",\n    \"rejected\"\n]);\nconst changeOrderStatusEnum = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_1__.pgEnum)(\"change_order_status\", [\n    \"draft\",\n    \"pending_approval\",\n    \"approved\",\n    \"rejected\"\n]);\n// Users table\nconst users = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"users\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey(),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"email\").notNull().unique(),\n    emailVerified: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_4__.boolean)(\"email_verified\").notNull().default(false),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"name\").notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n});\n// Sessions table (for BetterAuth)\nconst sessions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"session\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey(),\n    expiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"expires_at\", {\n        mode: \"string\"\n    }).notNull(),\n    token: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"token\").notNull().unique(),\n    ipAddress: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"ip_address\"),\n    userAgent: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"user_agent\"),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"user_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n});\n// Accounts table (for BetterAuth password storage)\nconst accounts = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"account\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey(),\n    accountId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"account_id\").notNull(),\n    providerId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"provider_id\").notNull(),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"user_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    accessToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"access_token\"),\n    refreshToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"refresh_token\"),\n    idToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id_token\"),\n    expiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"expires_at\", {\n        mode: \"string\"\n    }),\n    password: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"password\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n});\n// Verification tokens table (for BetterAuth)\nconst verifications = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"verification\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey(),\n    identifier: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"identifier\").notNull(),\n    value: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"value\").notNull(),\n    expiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"expires_at\", {\n        mode: \"string\"\n    }).notNull(),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n});\n// Organizations table\nconst organizations = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"organizations\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey(),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"name\").notNull(),\n    ownerId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"owner_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n});\n// Organization members table\nconst organizationMembers = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"organization_members\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey(),\n    organizationId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"organization_id\").notNull().references(()=>organizations.id, {\n        onDelete: \"cascade\"\n    }),\n    userId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"user_id\").notNull().references(()=>users.id, {\n        onDelete: \"cascade\"\n    }),\n    role: roleEnum(\"role\").notNull().default(\"member\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        organizationIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"org_members_org_idx\").on(table.organizationId),\n        userIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"org_members_user_idx\").on(table.userId)\n    }));\n// Projects table\nconst projects = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"projects\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    organizationId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"organization_id\").notNull().references(()=>organizations.id, {\n        onDelete: \"cascade\"\n    }),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"name\").notNull(),\n    clientName: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"client_name\").notNull(),\n    projectType: projectTypeEnum(\"project_type\").notNull(),\n    projectBrief: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"project_brief\").notNull(),\n    hourlyRate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"hourly_rate\", {\n        precision: 10,\n        scale: 2\n    }).notNull(),\n    status: projectStatusEnum(\"status\").notNull().default(\"draft\"),\n    createdBy: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"created_by\").notNull().references(()=>users.id),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        organizationIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"projects_org_idx\").on(table.organizationId),\n        createdByIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"projects_created_by_idx\").on(table.createdBy),\n        statusIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"projects_status_idx\").on(table.status)\n    }));\n// Project forms table\nconst projectForms = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"project_forms\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    projectId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"project_id\").notNull().unique().references(()=>projects.id, {\n        onDelete: \"cascade\"\n    }),\n    formData: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.jsonb)(\"form_data\").notNull(),\n    clientEmail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"client_email\"),\n    shareToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"share_token\").unique().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)(32)),\n    submittedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"submitted_at\", {\n        mode: \"string\"\n    }),\n    submittedData: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.jsonb)(\"submitted_data\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        projectIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"project_forms_project_idx\").on(table.projectId),\n        shareTokenIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"project_forms_share_token_idx\").on(table.shareToken)\n    }));\n// Project timelines table\nconst projectTimelines = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"project_timelines\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    projectId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"project_id\").notNull().references(()=>projects.id, {\n        onDelete: \"cascade\"\n    }),\n    timelineData: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.jsonb)(\"timeline_data\").notNull(),\n    totalWeeks: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"total_weeks\", {\n        precision: 10,\n        scale: 2\n    }).notNull(),\n    totalHours: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"total_hours\", {\n        precision: 10,\n        scale: 2\n    }).notNull(),\n    totalCost: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"total_cost\", {\n        precision: 10,\n        scale: 2\n    }).notNull(),\n    shareToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"share_token\").unique().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)(32)),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        projectIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"project_timelines_project_idx\").on(table.projectId),\n        shareTokenIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"project_timelines_share_token_idx\").on(table.shareToken)\n    }));\n// Organization settings table\nconst organizationSettings = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"organization_settings\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    organizationId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"organization_id\").notNull().unique().references(()=>organizations.id, {\n        onDelete: \"cascade\"\n    }),\n    defaultHourlyRate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"default_hourly_rate\", {\n        precision: 10,\n        scale: 2\n    }).notNull().default(\"150\"),\n    brandColor: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"brand_color\").notNull().default(\"#10b981\"),\n    logoUrl: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"logo_url\"),\n    customPrompts: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.jsonb)(\"custom_prompts\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        organizationIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"org_settings_org_idx\").on(table.organizationId)\n    }));\n// Custom project types table\nconst customProjectTypes = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"custom_project_types\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    organizationId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"organization_id\").notNull().references(()=>organizations.id, {\n        onDelete: \"cascade\"\n    }),\n    name: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"name\").notNull(),\n    description: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"description\"),\n    defaultHourlyRate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"default_hourly_rate\", {\n        precision: 10,\n        scale: 2\n    }),\n    aiPromptTemplate: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"ai_prompt_template\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        organizationIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"custom_project_types_org_idx\").on(table.organizationId)\n    }));\n// Organization invites table\nconst organizationInvites = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"organization_invites\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    organizationId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"organization_id\").notNull().references(()=>organizations.id, {\n        onDelete: \"cascade\"\n    }),\n    email: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"email\").notNull(),\n    role: roleEnum(\"role\").notNull().default(\"member\"),\n    inviteToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"invite_token\").notNull().unique().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)(32)),\n    invitedBy: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"invited_by\").notNull().references(()=>users.id),\n    expiresAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"expires_at\", {\n        mode: \"string\"\n    }).notNull(),\n    acceptedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"accepted_at\", {\n        mode: \"string\"\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        organizationIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"org_invites_org_idx\").on(table.organizationId),\n        inviteTokenIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"org_invites_token_idx\").on(table.inviteToken),\n        emailIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"org_invites_email_idx\").on(table.email)\n    }));\n// Relations\nconst usersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(users, ({ many })=>({\n        organizationMembers: many(organizationMembers),\n        ownedOrganizations: many(organizations),\n        sessions: many(sessions),\n        accounts: many(accounts),\n        createdProjects: many(projects)\n    }));\nconst organizationsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(organizations, ({ one, many })=>({\n        owner: one(users, {\n            fields: [\n                organizations.ownerId\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        members: many(organizationMembers),\n        projects: many(projects),\n        settings: one(organizationSettings, {\n            fields: [\n                organizations.id\n            ],\n            references: [\n                organizationSettings.organizationId\n            ]\n        }),\n        customProjectTypes: many(customProjectTypes),\n        invites: many(organizationInvites)\n    }));\nconst organizationMembersRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(organizationMembers, ({ one })=>({\n        organization: one(organizations, {\n            fields: [\n                organizationMembers.organizationId\n            ],\n            references: [\n                organizations.id\n            ]\n        }),\n        user: one(users, {\n            fields: [\n                organizationMembers.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst sessionsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(sessions, ({ one })=>({\n        user: one(users, {\n            fields: [\n                sessions.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst accountsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(accounts, ({ one })=>({\n        user: one(users, {\n            fields: [\n                accounts.userId\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\nconst projectsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(projects, ({ one, many })=>({\n        organization: one(organizations, {\n            fields: [\n                projects.organizationId\n            ],\n            references: [\n                organizations.id\n            ]\n        }),\n        creator: one(users, {\n            fields: [\n                projects.createdBy\n            ],\n            references: [\n                users.id\n            ]\n        }),\n        form: one(projectForms, {\n            fields: [\n                projects.id\n            ],\n            references: [\n                projectForms.projectId\n            ]\n        }),\n        timelines: many(projectTimelines)\n    }));\nconst projectFormsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(projectForms, ({ one })=>({\n        project: one(projects, {\n            fields: [\n                projectForms.projectId\n            ],\n            references: [\n                projects.id\n            ]\n        })\n    }));\nconst projectTimelinesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(projectTimelines, ({ one })=>({\n        project: one(projects, {\n            fields: [\n                projectTimelines.projectId\n            ],\n            references: [\n                projects.id\n            ]\n        })\n    }));\nconst organizationSettingsRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(organizationSettings, ({ one })=>({\n        organization: one(organizations, {\n            fields: [\n                organizationSettings.organizationId\n            ],\n            references: [\n                organizations.id\n            ]\n        })\n    }));\nconst customProjectTypesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(customProjectTypes, ({ one })=>({\n        organization: one(organizations, {\n            fields: [\n                customProjectTypes.organizationId\n            ],\n            references: [\n                organizations.id\n            ]\n        })\n    }));\nconst organizationInvitesRelations = (0,drizzle_orm__WEBPACK_IMPORTED_MODULE_10__.relations)(organizationInvites, ({ one })=>({\n        organization: one(organizations, {\n            fields: [\n                organizationInvites.organizationId\n            ],\n            references: [\n                organizations.id\n            ]\n        }),\n        invitedByUser: one(users, {\n            fields: [\n                organizationInvites.invitedBy\n            ],\n            references: [\n                users.id\n            ]\n        })\n    }));\n// Zod schemas for validation\nconst insertUserSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(users, {\n    email: zod__WEBPACK_IMPORTED_MODULE_11__.string().email(),\n    name: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1)\n}).pick({\n    email: true,\n    name: true\n});\nconst insertOrganizationSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(organizations, {\n    name: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1)\n}).pick({\n    name: true\n});\nconst insertProjectSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(projects, {\n    name: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1),\n    clientName: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1),\n    projectBrief: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(10),\n    // Numeric field: keep as string for precision, validate decimal format (strict for new entries)\n    hourlyRate: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d{1,2})?$/, \"Must be a valid dollar amount\")\n}).omit({\n    id: true,\n    createdBy: true,\n    createdAt: true,\n    updatedAt: true\n});\n// Update schema - more lenient to accept values as returned by Drizzle numeric columns\nconst updateProjectSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(projects, {\n    name: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1).optional(),\n    clientName: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1).optional(),\n    projectBrief: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(10).optional(),\n    // More lenient regex - accepts any valid decimal number (Drizzle numeric returns varying precision)\n    hourlyRate: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d+)?$/, \"Must be a valid number\").optional(),\n    projectType: zod__WEBPACK_IMPORTED_MODULE_11__[\"enum\"]([\n        \"saas\",\n        \"mobile\",\n        \"web\",\n        \"ecommerce\",\n        \"custom\"\n    ]).optional(),\n    status: zod__WEBPACK_IMPORTED_MODULE_11__[\"enum\"]([\n        \"draft\",\n        \"form_sent\",\n        \"scoping\",\n        \"approved\",\n        \"in_progress\",\n        \"completed\"\n    ]).optional()\n}).omit({\n    id: true,\n    organizationId: true,\n    createdBy: true,\n    createdAt: true,\n    updatedAt: true\n});\nconst insertProjectFormSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(projectForms, {\n    formData: zod__WEBPACK_IMPORTED_MODULE_11__.any(),\n    clientEmail: zod__WEBPACK_IMPORTED_MODULE_11__.string().email().optional(),\n    submittedData: zod__WEBPACK_IMPORTED_MODULE_11__.any().optional()\n}).omit({\n    id: true,\n    shareToken: true,\n    createdAt: true,\n    updatedAt: true\n});\nconst insertProjectTimelineSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(projectTimelines, {\n    timelineData: zod__WEBPACK_IMPORTED_MODULE_11__.any(),\n    // Numeric fields: keep as strings for precision, validate decimal format\n    totalWeeks: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d{1,2})?$/, \"Must be a valid number\"),\n    totalHours: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d{1,2})?$/, \"Must be a valid number\"),\n    totalCost: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d{1,2})?$/, \"Must be a valid dollar amount\")\n}).omit({\n    id: true,\n    shareToken: true,\n    createdAt: true,\n    updatedAt: true\n});\nconst insertOrganizationSettingsSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(organizationSettings, {\n    // Numeric field: keep as string for precision, validate decimal format\n    defaultHourlyRate: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d{1,2})?$/, \"Must be a valid dollar amount\").optional(),\n    brandColor: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^#[0-9A-Fa-f]{6}$/).optional(),\n    logoUrl: zod__WEBPACK_IMPORTED_MODULE_11__.string().url().optional().or(zod__WEBPACK_IMPORTED_MODULE_11__.literal(\"\")),\n    customPrompts: zod__WEBPACK_IMPORTED_MODULE_11__.any().optional()\n}).omit({\n    id: true,\n    createdAt: true,\n    updatedAt: true\n});\nconst insertCustomProjectTypeSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(customProjectTypes, {\n    name: zod__WEBPACK_IMPORTED_MODULE_11__.string().min(1),\n    description: zod__WEBPACK_IMPORTED_MODULE_11__.string().optional(),\n    defaultHourlyRate: zod__WEBPACK_IMPORTED_MODULE_11__.string().regex(/^\\d+(\\.\\d{1,2})?$/, \"Must be a valid dollar amount\").optional(),\n    aiPromptTemplate: zod__WEBPACK_IMPORTED_MODULE_11__.string().optional()\n}).omit({\n    id: true,\n    createdAt: true,\n    updatedAt: true\n});\nconst insertOrganizationInviteSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(organizationInvites, {\n    email: zod__WEBPACK_IMPORTED_MODULE_11__.string().email(),\n    role: zod__WEBPACK_IMPORTED_MODULE_11__[\"enum\"]([\n        \"owner\",\n        \"member\"\n    ]).optional()\n}).omit({\n    id: true,\n    inviteToken: true,\n    invitedBy: true,\n    expiresAt: true,\n    acceptedAt: true,\n    createdAt: true\n});\n// Timeline Chat Sessions table\nconst timelineChatSessions = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"timeline_chat_sessions\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    shareToken: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"share_token\").notNull().unique(),\n    projectId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"project_id\").notNull().references(()=>projects.id, {\n        onDelete: \"cascade\"\n    }),\n    timelineId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"timeline_id\").notNull().unique().references(()=>projectTimelines.id, {\n        onDelete: \"cascade\"\n    }),\n    clientEmail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"client_email\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        shareTokenIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"chat_sessions_share_token_idx\").on(table.shareToken),\n        timelineIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"chat_sessions_timeline_idx\").on(table.timelineId)\n    }));\n// Timeline Chat Messages table\nconst timelineChatMessages = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"timeline_chat_messages\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"session_id\").notNull().references(()=>timelineChatSessions.id, {\n        onDelete: \"cascade\"\n    }),\n    role: chatMessageRoleEnum(\"role\").notNull(),\n    content: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"content\").notNull(),\n    metadata: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.jsonb)(\"metadata\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        sessionIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"chat_messages_session_idx\").on(table.sessionId)\n    }));\n// Timeline Proposals table\nconst timelineProposals = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"timeline_proposals\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    sessionId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"session_id\").notNull().references(()=>timelineChatSessions.id, {\n        onDelete: \"cascade\"\n    }),\n    baseTimelineId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"base_timeline_id\").notNull().references(()=>projectTimelines.id, {\n        onDelete: \"cascade\"\n    }),\n    proposalData: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_9__.jsonb)(\"proposal_data\").notNull(),\n    deltaCost: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"delta_cost\", {\n        precision: 10,\n        scale: 2\n    }).notNull(),\n    deltaWeeks: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_8__.numeric)(\"delta_weeks\", {\n        precision: 10,\n        scale: 2\n    }).notNull(),\n    status: proposalStatusEnum(\"status\").notNull().default(\"draft\"),\n    summary: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"summary\"),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        sessionIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"proposals_session_idx\").on(table.sessionId),\n        baseTimelineIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"proposals_base_timeline_idx\").on(table.baseTimelineId),\n        statusIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"proposals_status_idx\").on(table.status)\n    }));\n// Project Change Orders table\nconst projectChangeOrders = (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_2__.pgTable)(\"project_change_orders\", {\n    id: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"id\").primaryKey().$defaultFn(()=>(0,nanoid__WEBPACK_IMPORTED_MODULE_7__.nanoid)()),\n    projectId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"project_id\").notNull().references(()=>projects.id, {\n        onDelete: \"cascade\"\n    }),\n    proposalId: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"proposal_id\").notNull().references(()=>timelineProposals.id, {\n        onDelete: \"cascade\"\n    }),\n    requestedBy: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"requested_by\").references(()=>users.id),\n    clientEmail: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"client_email\"),\n    clientNotes: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"client_notes\"),\n    status: changeOrderStatusEnum(\"status\").notNull().default(\"draft\"),\n    approvedBy: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_3__.text)(\"approved_by\").references(()=>users.id),\n    approvedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"approved_at\", {\n        mode: \"string\"\n    }),\n    createdAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"created_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow(),\n    updatedAt: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_5__.timestamp)(\"updated_at\", {\n        mode: \"string\"\n    }).notNull().defaultNow()\n}, (table)=>({\n        projectIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"change_orders_project_idx\").on(table.projectId),\n        proposalIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"change_orders_proposal_idx\").on(table.proposalId),\n        statusIdx: (0,drizzle_orm_pg_core__WEBPACK_IMPORTED_MODULE_6__.index)(\"change_orders_status_idx\").on(table.status)\n    }));\n// Insert schemas\nconst insertTimelineChatSessionSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(timelineChatSessions).omit({\n    id: true,\n    createdAt: true,\n    updatedAt: true\n});\nconst insertTimelineChatMessageSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(timelineChatMessages).omit({\n    id: true,\n    createdAt: true\n});\nconst insertTimelineProposalSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(timelineProposals).omit({\n    id: true,\n    createdAt: true\n});\nconst insertProjectChangeOrderSchema = (0,drizzle_zod__WEBPACK_IMPORTED_MODULE_0__.createInsertSchema)(projectChangeOrders).omit({\n    id: true,\n    createdAt: true,\n    updatedAt: true\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TThJLCtCQUErQmhLLCtEQUFrQkEsQ0FBQ2dKLG1CQUFtQnJCLElBQUksQ0FBQztJQUNyRmpILElBQUk7SUFDSlEsV0FBVztBQUNiLEdBQUc7QUFFSSxNQUFNK0ksaUNBQWlDakssK0RBQWtCQSxDQUFDdUoscUJBQXFCNUIsSUFBSSxDQUFDO0lBQ3pGakgsSUFBSTtJQUNKUSxXQUFXO0lBQ1hHLFdBQVc7QUFDYixHQUFHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbGliL3NjaGVtYS50cz83MWEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHBnVGFibGUsIHRleHQsIHRpbWVzdGFtcCwgdmFyY2hhciwgcGdFbnVtLCBib29sZWFuLCBudW1lcmljLCBqc29uYiwgaW5kZXggfSBmcm9tIFwiZHJpenpsZS1vcm0vcGctY29yZVwiO1xuaW1wb3J0IHsgcmVsYXRpb25zIH0gZnJvbSBcImRyaXp6bGUtb3JtXCI7XG5pbXBvcnQgeyBjcmVhdGVJbnNlcnRTY2hlbWEgfSBmcm9tIFwiZHJpenpsZS16b2RcIjtcbmltcG9ydCB7IHogfSBmcm9tIFwiem9kXCI7XG5pbXBvcnQgeyBuYW5vaWQgfSBmcm9tIFwibmFub2lkXCI7XG5cbi8vIEVudW1zXG5leHBvcnQgY29uc3Qgcm9sZUVudW0gPSBwZ0VudW0oXCJyb2xlXCIsIFtcIm93bmVyXCIsIFwibWVtYmVyXCJdKTtcbmV4cG9ydCBjb25zdCBwcm9qZWN0VHlwZUVudW0gPSBwZ0VudW0oXCJwcm9qZWN0X3R5cGVcIiwgW1wic2Fhc1wiLCBcIm1vYmlsZVwiLCBcIndlYlwiLCBcImVjb21tZXJjZVwiLCBcImN1c3RvbVwiXSk7XG5leHBvcnQgY29uc3QgcHJvamVjdFN0YXR1c0VudW0gPSBwZ0VudW0oXCJwcm9qZWN0X3N0YXR1c1wiLCBbXG4gIFwiZHJhZnRcIixcbiAgXCJmb3JtX3NlbnRcIixcbiAgXCJzY29waW5nXCIsXG4gIFwiYXBwcm92ZWRcIixcbiAgXCJpbl9wcm9ncmVzc1wiLFxuICBcImNvbXBsZXRlZFwiLFxuXSk7XG5leHBvcnQgY29uc3QgY2hhdE1lc3NhZ2VSb2xlRW51bSA9IHBnRW51bShcImNoYXRfbWVzc2FnZV9yb2xlXCIsIFtcInVzZXJcIiwgXCJhc3Npc3RhbnRcIiwgXCJzeXN0ZW1cIl0pO1xuZXhwb3J0IGNvbnN0IHByb3Bvc2FsU3RhdHVzRW51bSA9IHBnRW51bShcInByb3Bvc2FsX3N0YXR1c1wiLCBbXCJkcmFmdFwiLCBcImFjdGl2ZVwiLCBcInN1cGVyc2VkZWRcIiwgXCJhcHByb3ZlZFwiLCBcInJlamVjdGVkXCJdKTtcbmV4cG9ydCBjb25zdCBjaGFuZ2VPcmRlclN0YXR1c0VudW0gPSBwZ0VudW0oXCJjaGFuZ2Vfb3JkZXJfc3RhdHVzXCIsIFtcImRyYWZ0XCIsIFwicGVuZGluZ19hcHByb3ZhbFwiLCBcImFwcHJvdmVkXCIsIFwicmVqZWN0ZWRcIl0pO1xuXG4vLyBVc2VycyB0YWJsZVxuZXhwb3J0IGNvbnN0IHVzZXJzID0gcGdUYWJsZShcInVzZXJzXCIsIHtcbiAgaWQ6IHRleHQoXCJpZFwiKS5wcmltYXJ5S2V5KCksXG4gIGVtYWlsOiB0ZXh0KFwiZW1haWxcIikubm90TnVsbCgpLnVuaXF1ZSgpLFxuICBlbWFpbFZlcmlmaWVkOiBib29sZWFuKFwiZW1haWxfdmVyaWZpZWRcIikubm90TnVsbCgpLmRlZmF1bHQoZmFsc2UpLFxuICBuYW1lOiB0ZXh0KFwibmFtZVwiKS5ub3ROdWxsKCksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSk7XG5cbi8vIFNlc3Npb25zIHRhYmxlIChmb3IgQmV0dGVyQXV0aClcbmV4cG9ydCBjb25zdCBzZXNzaW9ucyA9IHBnVGFibGUoXCJzZXNzaW9uXCIsIHtcbiAgaWQ6IHRleHQoXCJpZFwiKS5wcmltYXJ5S2V5KCksXG4gIGV4cGlyZXNBdDogdGltZXN0YW1wKFwiZXhwaXJlc19hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLFxuICB0b2tlbjogdGV4dChcInRva2VuXCIpLm5vdE51bGwoKS51bmlxdWUoKSxcbiAgaXBBZGRyZXNzOiB0ZXh0KFwiaXBfYWRkcmVzc1wiKSxcbiAgdXNlckFnZW50OiB0ZXh0KFwidXNlcl9hZ2VudFwiKSxcbiAgdXNlcklkOiB0ZXh0KFwidXNlcl9pZFwiKVxuICAgIC5ub3ROdWxsKClcbiAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSk7XG5cbi8vIEFjY291bnRzIHRhYmxlIChmb3IgQmV0dGVyQXV0aCBwYXNzd29yZCBzdG9yYWdlKVxuZXhwb3J0IGNvbnN0IGFjY291bnRzID0gcGdUYWJsZShcImFjY291bnRcIiwge1xuICBpZDogdGV4dChcImlkXCIpLnByaW1hcnlLZXkoKSxcbiAgYWNjb3VudElkOiB0ZXh0KFwiYWNjb3VudF9pZFwiKS5ub3ROdWxsKCksXG4gIHByb3ZpZGVySWQ6IHRleHQoXCJwcm92aWRlcl9pZFwiKS5ub3ROdWxsKCksXG4gIHVzZXJJZDogdGV4dChcInVzZXJfaWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICBhY2Nlc3NUb2tlbjogdGV4dChcImFjY2Vzc190b2tlblwiKSxcbiAgcmVmcmVzaFRva2VuOiB0ZXh0KFwicmVmcmVzaF90b2tlblwiKSxcbiAgaWRUb2tlbjogdGV4dChcImlkX3Rva2VuXCIpLFxuICBleHBpcmVzQXQ6IHRpbWVzdGFtcChcImV4cGlyZXNfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLFxuICBwYXNzd29yZDogdGV4dChcInBhc3N3b3JkXCIpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKFwidXBkYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0pO1xuXG4vLyBWZXJpZmljYXRpb24gdG9rZW5zIHRhYmxlIChmb3IgQmV0dGVyQXV0aClcbmV4cG9ydCBjb25zdCB2ZXJpZmljYXRpb25zID0gcGdUYWJsZShcInZlcmlmaWNhdGlvblwiLCB7XG4gIGlkOiB0ZXh0KFwiaWRcIikucHJpbWFyeUtleSgpLFxuICBpZGVudGlmaWVyOiB0ZXh0KFwiaWRlbnRpZmllclwiKS5ub3ROdWxsKCksXG4gIHZhbHVlOiB0ZXh0KFwidmFsdWVcIikubm90TnVsbCgpLFxuICBleHBpcmVzQXQ6IHRpbWVzdGFtcChcImV4cGlyZXNfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcChcInVwZGF0ZWRfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG59KTtcblxuLy8gT3JnYW5pemF0aW9ucyB0YWJsZVxuZXhwb3J0IGNvbnN0IG9yZ2FuaXphdGlvbnMgPSBwZ1RhYmxlKFwib3JnYW5pemF0aW9uc1wiLCB7XG4gIGlkOiB0ZXh0KFwiaWRcIikucHJpbWFyeUtleSgpLFxuICBuYW1lOiB0ZXh0KFwibmFtZVwiKS5ub3ROdWxsKCksXG4gIG93bmVySWQ6IHRleHQoXCJvd25lcl9pZFwiKVxuICAgIC5ub3ROdWxsKClcbiAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0pO1xuXG4vLyBPcmdhbml6YXRpb24gbWVtYmVycyB0YWJsZVxuZXhwb3J0IGNvbnN0IG9yZ2FuaXphdGlvbk1lbWJlcnMgPSBwZ1RhYmxlKFwib3JnYW5pemF0aW9uX21lbWJlcnNcIiwge1xuICBpZDogdGV4dChcImlkXCIpLnByaW1hcnlLZXkoKSxcbiAgb3JnYW5pemF0aW9uSWQ6IHRleHQoXCJvcmdhbml6YXRpb25faWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gb3JnYW5pemF0aW9ucy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIHVzZXJJZDogdGV4dChcInVzZXJfaWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICByb2xlOiByb2xlRW51bShcInJvbGVcIikubm90TnVsbCgpLmRlZmF1bHQoXCJtZW1iZXJcIiksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0sICh0YWJsZSkgPT4gKHtcbiAgb3JnYW5pemF0aW9uSWR4OiBpbmRleChcIm9yZ19tZW1iZXJzX29yZ19pZHhcIikub24odGFibGUub3JnYW5pemF0aW9uSWQpLFxuICB1c2VySWR4OiBpbmRleChcIm9yZ19tZW1iZXJzX3VzZXJfaWR4XCIpLm9uKHRhYmxlLnVzZXJJZCksXG59KSk7XG5cbi8vIFByb2plY3RzIHRhYmxlXG5leHBvcnQgY29uc3QgcHJvamVjdHMgPSBwZ1RhYmxlKFwicHJvamVjdHNcIiwge1xuICBpZDogdGV4dChcImlkXCIpLnByaW1hcnlLZXkoKS4kZGVmYXVsdEZuKCgpID0+IG5hbm9pZCgpKSxcbiAgb3JnYW5pemF0aW9uSWQ6IHRleHQoXCJvcmdhbml6YXRpb25faWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gb3JnYW5pemF0aW9ucy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIG5hbWU6IHRleHQoXCJuYW1lXCIpLm5vdE51bGwoKSxcbiAgY2xpZW50TmFtZTogdGV4dChcImNsaWVudF9uYW1lXCIpLm5vdE51bGwoKSxcbiAgcHJvamVjdFR5cGU6IHByb2plY3RUeXBlRW51bShcInByb2plY3RfdHlwZVwiKS5ub3ROdWxsKCksXG4gIHByb2plY3RCcmllZjogdGV4dChcInByb2plY3RfYnJpZWZcIikubm90TnVsbCgpLFxuICBob3VybHlSYXRlOiBudW1lcmljKFwiaG91cmx5X3JhdGVcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KS5ub3ROdWxsKCksXG4gIHN0YXR1czogcHJvamVjdFN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJkcmFmdFwiKSxcbiAgY3JlYXRlZEJ5OiB0ZXh0KFwiY3JlYXRlZF9ieVwiKVxuICAgIC5ub3ROdWxsKClcbiAgICAucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSwgKHRhYmxlKSA9PiAoe1xuICBvcmdhbml6YXRpb25JZHg6IGluZGV4KFwicHJvamVjdHNfb3JnX2lkeFwiKS5vbih0YWJsZS5vcmdhbml6YXRpb25JZCksXG4gIGNyZWF0ZWRCeUlkeDogaW5kZXgoXCJwcm9qZWN0c19jcmVhdGVkX2J5X2lkeFwiKS5vbih0YWJsZS5jcmVhdGVkQnkpLFxuICBzdGF0dXNJZHg6IGluZGV4KFwicHJvamVjdHNfc3RhdHVzX2lkeFwiKS5vbih0YWJsZS5zdGF0dXMpLFxufSkpO1xuXG4vLyBQcm9qZWN0IGZvcm1zIHRhYmxlXG5leHBvcnQgY29uc3QgcHJvamVjdEZvcm1zID0gcGdUYWJsZShcInByb2plY3RfZm9ybXNcIiwge1xuICBpZDogdGV4dChcImlkXCIpLnByaW1hcnlLZXkoKS4kZGVmYXVsdEZuKCgpID0+IG5hbm9pZCgpKSxcbiAgcHJvamVjdElkOiB0ZXh0KFwicHJvamVjdF9pZFwiKVxuICAgIC5ub3ROdWxsKClcbiAgICAudW5pcXVlKClcbiAgICAucmVmZXJlbmNlcygoKSA9PiBwcm9qZWN0cy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIGZvcm1EYXRhOiBqc29uYihcImZvcm1fZGF0YVwiKS5ub3ROdWxsKCksXG4gIGNsaWVudEVtYWlsOiB0ZXh0KFwiY2xpZW50X2VtYWlsXCIpLFxuICBzaGFyZVRva2VuOiB0ZXh0KFwic2hhcmVfdG9rZW5cIikudW5pcXVlKCkuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoMzIpKSxcbiAgc3VibWl0dGVkQXQ6IHRpbWVzdGFtcChcInN1Ym1pdHRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSksXG4gIHN1Ym1pdHRlZERhdGE6IGpzb25iKFwic3VibWl0dGVkX2RhdGFcIiksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSwgKHRhYmxlKSA9PiAoe1xuICBwcm9qZWN0SWR4OiBpbmRleChcInByb2plY3RfZm9ybXNfcHJvamVjdF9pZHhcIikub24odGFibGUucHJvamVjdElkKSxcbiAgc2hhcmVUb2tlbklkeDogaW5kZXgoXCJwcm9qZWN0X2Zvcm1zX3NoYXJlX3Rva2VuX2lkeFwiKS5vbih0YWJsZS5zaGFyZVRva2VuKSxcbn0pKTtcblxuLy8gUHJvamVjdCB0aW1lbGluZXMgdGFibGVcbmV4cG9ydCBjb25zdCBwcm9qZWN0VGltZWxpbmVzID0gcGdUYWJsZShcInByb2plY3RfdGltZWxpbmVzXCIsIHtcbiAgaWQ6IHRleHQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoKSksXG4gIHByb2plY3RJZDogdGV4dChcInByb2plY3RfaWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gcHJvamVjdHMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICB0aW1lbGluZURhdGE6IGpzb25iKFwidGltZWxpbmVfZGF0YVwiKS5ub3ROdWxsKCksXG4gIHRvdGFsV2Vla3M6IG51bWVyaWMoXCJ0b3RhbF93ZWVrc1wiLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pLm5vdE51bGwoKSxcbiAgdG90YWxIb3VyczogbnVtZXJpYyhcInRvdGFsX2hvdXJzXCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSkubm90TnVsbCgpLFxuICB0b3RhbENvc3Q6IG51bWVyaWMoXCJ0b3RhbF9jb3N0XCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSkubm90TnVsbCgpLFxuICBzaGFyZVRva2VuOiB0ZXh0KFwic2hhcmVfdG9rZW5cIikudW5pcXVlKCkuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoMzIpKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcChcInVwZGF0ZWRfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG59LCAodGFibGUpID0+ICh7XG4gIHByb2plY3RJZHg6IGluZGV4KFwicHJvamVjdF90aW1lbGluZXNfcHJvamVjdF9pZHhcIikub24odGFibGUucHJvamVjdElkKSxcbiAgc2hhcmVUb2tlbklkeDogaW5kZXgoXCJwcm9qZWN0X3RpbWVsaW5lc19zaGFyZV90b2tlbl9pZHhcIikub24odGFibGUuc2hhcmVUb2tlbiksXG59KSk7XG5cbi8vIE9yZ2FuaXphdGlvbiBzZXR0aW5ncyB0YWJsZVxuZXhwb3J0IGNvbnN0IG9yZ2FuaXphdGlvblNldHRpbmdzID0gcGdUYWJsZShcIm9yZ2FuaXphdGlvbl9zZXR0aW5nc1wiLCB7XG4gIGlkOiB0ZXh0KFwiaWRcIikucHJpbWFyeUtleSgpLiRkZWZhdWx0Rm4oKCkgPT4gbmFub2lkKCkpLFxuICBvcmdhbml6YXRpb25JZDogdGV4dChcIm9yZ2FuaXphdGlvbl9pZFwiKVxuICAgIC5ub3ROdWxsKClcbiAgICAudW5pcXVlKClcbiAgICAucmVmZXJlbmNlcygoKSA9PiBvcmdhbml6YXRpb25zLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgZGVmYXVsdEhvdXJseVJhdGU6IG51bWVyaWMoXCJkZWZhdWx0X2hvdXJseV9yYXRlXCIsIHsgcHJlY2lzaW9uOiAxMCwgc2NhbGU6IDIgfSkubm90TnVsbCgpLmRlZmF1bHQoXCIxNTBcIiksXG4gIGJyYW5kQ29sb3I6IHRleHQoXCJicmFuZF9jb2xvclwiKS5ub3ROdWxsKCkuZGVmYXVsdChcIiMxMGI5ODFcIiksXG4gIGxvZ29Vcmw6IHRleHQoXCJsb2dvX3VybFwiKSxcbiAgY3VzdG9tUHJvbXB0czoganNvbmIoXCJjdXN0b21fcHJvbXB0c1wiKSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxuICB1cGRhdGVkQXQ6IHRpbWVzdGFtcChcInVwZGF0ZWRfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG59LCAodGFibGUpID0+ICh7XG4gIG9yZ2FuaXphdGlvbklkeDogaW5kZXgoXCJvcmdfc2V0dGluZ3Nfb3JnX2lkeFwiKS5vbih0YWJsZS5vcmdhbml6YXRpb25JZCksXG59KSk7XG5cbi8vIEN1c3RvbSBwcm9qZWN0IHR5cGVzIHRhYmxlXG5leHBvcnQgY29uc3QgY3VzdG9tUHJvamVjdFR5cGVzID0gcGdUYWJsZShcImN1c3RvbV9wcm9qZWN0X3R5cGVzXCIsIHtcbiAgaWQ6IHRleHQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoKSksXG4gIG9yZ2FuaXphdGlvbklkOiB0ZXh0KFwib3JnYW5pemF0aW9uX2lkXCIpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IG9yZ2FuaXphdGlvbnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICBuYW1lOiB0ZXh0KFwibmFtZVwiKS5ub3ROdWxsKCksXG4gIGRlc2NyaXB0aW9uOiB0ZXh0KFwiZGVzY3JpcHRpb25cIiksXG4gIGRlZmF1bHRIb3VybHlSYXRlOiBudW1lcmljKFwiZGVmYXVsdF9ob3VybHlfcmF0ZVwiLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pLFxuICBhaVByb21wdFRlbXBsYXRlOiB0ZXh0KFwiYWlfcHJvbXB0X3RlbXBsYXRlXCIpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKFwidXBkYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0sICh0YWJsZSkgPT4gKHtcbiAgb3JnYW5pemF0aW9uSWR4OiBpbmRleChcImN1c3RvbV9wcm9qZWN0X3R5cGVzX29yZ19pZHhcIikub24odGFibGUub3JnYW5pemF0aW9uSWQpLFxufSkpO1xuXG4vLyBPcmdhbml6YXRpb24gaW52aXRlcyB0YWJsZVxuZXhwb3J0IGNvbnN0IG9yZ2FuaXphdGlvbkludml0ZXMgPSBwZ1RhYmxlKFwib3JnYW5pemF0aW9uX2ludml0ZXNcIiwge1xuICBpZDogdGV4dChcImlkXCIpLnByaW1hcnlLZXkoKS4kZGVmYXVsdEZuKCgpID0+IG5hbm9pZCgpKSxcbiAgb3JnYW5pemF0aW9uSWQ6IHRleHQoXCJvcmdhbml6YXRpb25faWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gb3JnYW5pemF0aW9ucy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIGVtYWlsOiB0ZXh0KFwiZW1haWxcIikubm90TnVsbCgpLFxuICByb2xlOiByb2xlRW51bShcInJvbGVcIikubm90TnVsbCgpLmRlZmF1bHQoXCJtZW1iZXJcIiksXG4gIGludml0ZVRva2VuOiB0ZXh0KFwiaW52aXRlX3Rva2VuXCIpLm5vdE51bGwoKS51bmlxdWUoKS4kZGVmYXVsdEZuKCgpID0+IG5hbm9pZCgzMikpLFxuICBpbnZpdGVkQnk6IHRleHQoXCJpbnZpdGVkX2J5XCIpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IHVzZXJzLmlkKSxcbiAgZXhwaXJlc0F0OiB0aW1lc3RhbXAoXCJleHBpcmVzX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCksXG4gIGFjY2VwdGVkQXQ6IHRpbWVzdGFtcChcImFjY2VwdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KSxcbiAgY3JlYXRlZEF0OiB0aW1lc3RhbXAoXCJjcmVhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSwgKHRhYmxlKSA9PiAoe1xuICBvcmdhbml6YXRpb25JZHg6IGluZGV4KFwib3JnX2ludml0ZXNfb3JnX2lkeFwiKS5vbih0YWJsZS5vcmdhbml6YXRpb25JZCksXG4gIGludml0ZVRva2VuSWR4OiBpbmRleChcIm9yZ19pbnZpdGVzX3Rva2VuX2lkeFwiKS5vbih0YWJsZS5pbnZpdGVUb2tlbiksXG4gIGVtYWlsSWR4OiBpbmRleChcIm9yZ19pbnZpdGVzX2VtYWlsX2lkeFwiKS5vbih0YWJsZS5lbWFpbCksXG59KSk7XG5cbi8vIFJlbGF0aW9uc1xuZXhwb3J0IGNvbnN0IHVzZXJzUmVsYXRpb25zID0gcmVsYXRpb25zKHVzZXJzLCAoeyBtYW55IH0pID0+ICh7XG4gIG9yZ2FuaXphdGlvbk1lbWJlcnM6IG1hbnkob3JnYW5pemF0aW9uTWVtYmVycyksXG4gIG93bmVkT3JnYW5pemF0aW9uczogbWFueShvcmdhbml6YXRpb25zKSxcbiAgc2Vzc2lvbnM6IG1hbnkoc2Vzc2lvbnMpLFxuICBhY2NvdW50czogbWFueShhY2NvdW50cyksXG4gIGNyZWF0ZWRQcm9qZWN0czogbWFueShwcm9qZWN0cyksXG59KSk7XG5cbmV4cG9ydCBjb25zdCBvcmdhbml6YXRpb25zUmVsYXRpb25zID0gcmVsYXRpb25zKG9yZ2FuaXphdGlvbnMsICh7IG9uZSwgbWFueSB9KSA9PiAoe1xuICBvd25lcjogb25lKHVzZXJzLCB7XG4gICAgZmllbGRzOiBbb3JnYW5pemF0aW9ucy5vd25lcklkXSxcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxuICB9KSxcbiAgbWVtYmVyczogbWFueShvcmdhbml6YXRpb25NZW1iZXJzKSxcbiAgcHJvamVjdHM6IG1hbnkocHJvamVjdHMpLFxuICBzZXR0aW5nczogb25lKG9yZ2FuaXphdGlvblNldHRpbmdzLCB7XG4gICAgZmllbGRzOiBbb3JnYW5pemF0aW9ucy5pZF0sXG4gICAgcmVmZXJlbmNlczogW29yZ2FuaXphdGlvblNldHRpbmdzLm9yZ2FuaXphdGlvbklkXSxcbiAgfSksXG4gIGN1c3RvbVByb2plY3RUeXBlczogbWFueShjdXN0b21Qcm9qZWN0VHlwZXMpLFxuICBpbnZpdGVzOiBtYW55KG9yZ2FuaXphdGlvbkludml0ZXMpLFxufSkpO1xuXG5leHBvcnQgY29uc3Qgb3JnYW5pemF0aW9uTWVtYmVyc1JlbGF0aW9ucyA9IHJlbGF0aW9ucyhcbiAgb3JnYW5pemF0aW9uTWVtYmVycyxcbiAgKHsgb25lIH0pID0+ICh7XG4gICAgb3JnYW5pemF0aW9uOiBvbmUob3JnYW5pemF0aW9ucywge1xuICAgICAgZmllbGRzOiBbb3JnYW5pemF0aW9uTWVtYmVycy5vcmdhbml6YXRpb25JZF0sXG4gICAgICByZWZlcmVuY2VzOiBbb3JnYW5pemF0aW9ucy5pZF0sXG4gICAgfSksXG4gICAgdXNlcjogb25lKHVzZXJzLCB7XG4gICAgICBmaWVsZHM6IFtvcmdhbml6YXRpb25NZW1iZXJzLnVzZXJJZF0sXG4gICAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxuICAgIH0pLFxuICB9KVxuKTtcblxuZXhwb3J0IGNvbnN0IHNlc3Npb25zUmVsYXRpb25zID0gcmVsYXRpb25zKHNlc3Npb25zLCAoeyBvbmUgfSkgPT4gKHtcbiAgdXNlcjogb25lKHVzZXJzLCB7XG4gICAgZmllbGRzOiBbc2Vzc2lvbnMudXNlcklkXSxcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxuICB9KSxcbn0pKTtcblxuZXhwb3J0IGNvbnN0IGFjY291bnRzUmVsYXRpb25zID0gcmVsYXRpb25zKGFjY291bnRzLCAoeyBvbmUgfSkgPT4gKHtcbiAgdXNlcjogb25lKHVzZXJzLCB7XG4gICAgZmllbGRzOiBbYWNjb3VudHMudXNlcklkXSxcbiAgICByZWZlcmVuY2VzOiBbdXNlcnMuaWRdLFxuICB9KSxcbn0pKTtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RzUmVsYXRpb25zID0gcmVsYXRpb25zKHByb2plY3RzLCAoeyBvbmUsIG1hbnkgfSkgPT4gKHtcbiAgb3JnYW5pemF0aW9uOiBvbmUob3JnYW5pemF0aW9ucywge1xuICAgIGZpZWxkczogW3Byb2plY3RzLm9yZ2FuaXphdGlvbklkXSxcbiAgICByZWZlcmVuY2VzOiBbb3JnYW5pemF0aW9ucy5pZF0sXG4gIH0pLFxuICBjcmVhdG9yOiBvbmUodXNlcnMsIHtcbiAgICBmaWVsZHM6IFtwcm9qZWN0cy5jcmVhdGVkQnldLFxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXG4gIH0pLFxuICBmb3JtOiBvbmUocHJvamVjdEZvcm1zLCB7XG4gICAgZmllbGRzOiBbcHJvamVjdHMuaWRdLFxuICAgIHJlZmVyZW5jZXM6IFtwcm9qZWN0Rm9ybXMucHJvamVjdElkXSxcbiAgfSksXG4gIHRpbWVsaW5lczogbWFueShwcm9qZWN0VGltZWxpbmVzKSxcbn0pKTtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RGb3Jtc1JlbGF0aW9ucyA9IHJlbGF0aW9ucyhwcm9qZWN0Rm9ybXMsICh7IG9uZSB9KSA9PiAoe1xuICBwcm9qZWN0OiBvbmUocHJvamVjdHMsIHtcbiAgICBmaWVsZHM6IFtwcm9qZWN0Rm9ybXMucHJvamVjdElkXSxcbiAgICByZWZlcmVuY2VzOiBbcHJvamVjdHMuaWRdLFxuICB9KSxcbn0pKTtcblxuZXhwb3J0IGNvbnN0IHByb2plY3RUaW1lbGluZXNSZWxhdGlvbnMgPSByZWxhdGlvbnMocHJvamVjdFRpbWVsaW5lcywgKHsgb25lIH0pID0+ICh7XG4gIHByb2plY3Q6IG9uZShwcm9qZWN0cywge1xuICAgIGZpZWxkczogW3Byb2plY3RUaW1lbGluZXMucHJvamVjdElkXSxcbiAgICByZWZlcmVuY2VzOiBbcHJvamVjdHMuaWRdLFxuICB9KSxcbn0pKTtcblxuZXhwb3J0IGNvbnN0IG9yZ2FuaXphdGlvblNldHRpbmdzUmVsYXRpb25zID0gcmVsYXRpb25zKG9yZ2FuaXphdGlvblNldHRpbmdzLCAoeyBvbmUgfSkgPT4gKHtcbiAgb3JnYW5pemF0aW9uOiBvbmUob3JnYW5pemF0aW9ucywge1xuICAgIGZpZWxkczogW29yZ2FuaXphdGlvblNldHRpbmdzLm9yZ2FuaXphdGlvbklkXSxcbiAgICByZWZlcmVuY2VzOiBbb3JnYW5pemF0aW9ucy5pZF0sXG4gIH0pLFxufSkpO1xuXG5leHBvcnQgY29uc3QgY3VzdG9tUHJvamVjdFR5cGVzUmVsYXRpb25zID0gcmVsYXRpb25zKGN1c3RvbVByb2plY3RUeXBlcywgKHsgb25lIH0pID0+ICh7XG4gIG9yZ2FuaXphdGlvbjogb25lKG9yZ2FuaXphdGlvbnMsIHtcbiAgICBmaWVsZHM6IFtjdXN0b21Qcm9qZWN0VHlwZXMub3JnYW5pemF0aW9uSWRdLFxuICAgIHJlZmVyZW5jZXM6IFtvcmdhbml6YXRpb25zLmlkXSxcbiAgfSksXG59KSk7XG5cbmV4cG9ydCBjb25zdCBvcmdhbml6YXRpb25JbnZpdGVzUmVsYXRpb25zID0gcmVsYXRpb25zKG9yZ2FuaXphdGlvbkludml0ZXMsICh7IG9uZSB9KSA9PiAoe1xuICBvcmdhbml6YXRpb246IG9uZShvcmdhbml6YXRpb25zLCB7XG4gICAgZmllbGRzOiBbb3JnYW5pemF0aW9uSW52aXRlcy5vcmdhbml6YXRpb25JZF0sXG4gICAgcmVmZXJlbmNlczogW29yZ2FuaXphdGlvbnMuaWRdLFxuICB9KSxcbiAgaW52aXRlZEJ5VXNlcjogb25lKHVzZXJzLCB7XG4gICAgZmllbGRzOiBbb3JnYW5pemF0aW9uSW52aXRlcy5pbnZpdGVkQnldLFxuICAgIHJlZmVyZW5jZXM6IFt1c2Vycy5pZF0sXG4gIH0pLFxufSkpO1xuXG4vLyBab2Qgc2NoZW1hcyBmb3IgdmFsaWRhdGlvblxuZXhwb3J0IGNvbnN0IGluc2VydFVzZXJTY2hlbWEgPSBjcmVhdGVJbnNlcnRTY2hlbWEodXNlcnMsIHtcbiAgZW1haWw6IHouc3RyaW5nKCkuZW1haWwoKSxcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSksXG59KS5waWNrKHtcbiAgZW1haWw6IHRydWUsXG4gIG5hbWU6IHRydWUsXG59KTtcblxuZXhwb3J0IGNvbnN0IGluc2VydE9yZ2FuaXphdGlvblNjaGVtYSA9IGNyZWF0ZUluc2VydFNjaGVtYShvcmdhbml6YXRpb25zLCB7XG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLFxufSkucGljayh7XG4gIG5hbWU6IHRydWUsXG59KTtcblxuZXhwb3J0IGNvbnN0IGluc2VydFByb2plY3RTY2hlbWEgPSBjcmVhdGVJbnNlcnRTY2hlbWEocHJvamVjdHMsIHtcbiAgbmFtZTogei5zdHJpbmcoKS5taW4oMSksXG4gIGNsaWVudE5hbWU6IHouc3RyaW5nKCkubWluKDEpLFxuICBwcm9qZWN0QnJpZWY6IHouc3RyaW5nKCkubWluKDEwKSxcbiAgLy8gTnVtZXJpYyBmaWVsZDoga2VlcCBhcyBzdHJpbmcgZm9yIHByZWNpc2lvbiwgdmFsaWRhdGUgZGVjaW1hbCBmb3JtYXQgKHN0cmljdCBmb3IgbmV3IGVudHJpZXMpXG4gIGhvdXJseVJhdGU6IHouc3RyaW5nKCkucmVnZXgoL15cXGQrKFxcLlxcZHsxLDJ9KT8kLywgXCJNdXN0IGJlIGEgdmFsaWQgZG9sbGFyIGFtb3VudFwiKSxcbn0pLm9taXQoe1xuICBpZDogdHJ1ZSxcbiAgY3JlYXRlZEJ5OiB0cnVlLCAvLyBQb3B1bGF0ZWQgZnJvbSBzZXNzaW9uIG9uIHNlcnZlclxuICBjcmVhdGVkQXQ6IHRydWUsXG4gIHVwZGF0ZWRBdDogdHJ1ZSxcbn0pO1xuXG4vLyBVcGRhdGUgc2NoZW1hIC0gbW9yZSBsZW5pZW50IHRvIGFjY2VwdCB2YWx1ZXMgYXMgcmV0dXJuZWQgYnkgRHJpenpsZSBudW1lcmljIGNvbHVtbnNcbmV4cG9ydCBjb25zdCB1cGRhdGVQcm9qZWN0U2NoZW1hID0gY3JlYXRlSW5zZXJ0U2NoZW1hKHByb2plY3RzLCB7XG4gIG5hbWU6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gIGNsaWVudE5hbWU6IHouc3RyaW5nKCkubWluKDEpLm9wdGlvbmFsKCksXG4gIHByb2plY3RCcmllZjogei5zdHJpbmcoKS5taW4oMTApLm9wdGlvbmFsKCksXG4gIC8vIE1vcmUgbGVuaWVudCByZWdleCAtIGFjY2VwdHMgYW55IHZhbGlkIGRlY2ltYWwgbnVtYmVyIChEcml6emxlIG51bWVyaWMgcmV0dXJucyB2YXJ5aW5nIHByZWNpc2lvbilcbiAgaG91cmx5UmF0ZTogei5zdHJpbmcoKS5yZWdleCgvXlxcZCsoXFwuXFxkKyk/JC8sIFwiTXVzdCBiZSBhIHZhbGlkIG51bWJlclwiKS5vcHRpb25hbCgpLFxuICBwcm9qZWN0VHlwZTogei5lbnVtKFtcInNhYXNcIiwgXCJtb2JpbGVcIiwgXCJ3ZWJcIiwgXCJlY29tbWVyY2VcIiwgXCJjdXN0b21cIl0pLm9wdGlvbmFsKCksXG4gIHN0YXR1czogei5lbnVtKFtcImRyYWZ0XCIsIFwiZm9ybV9zZW50XCIsIFwic2NvcGluZ1wiLCBcImFwcHJvdmVkXCIsIFwiaW5fcHJvZ3Jlc3NcIiwgXCJjb21wbGV0ZWRcIl0pLm9wdGlvbmFsKCksXG59KS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIG9yZ2FuaXphdGlvbklkOiB0cnVlLFxuICBjcmVhdGVkQnk6IHRydWUsXG4gIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgdXBkYXRlZEF0OiB0cnVlLFxufSk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRQcm9qZWN0Rm9ybVNjaGVtYSA9IGNyZWF0ZUluc2VydFNjaGVtYShwcm9qZWN0Rm9ybXMsIHtcbiAgZm9ybURhdGE6IHouYW55KCksXG4gIGNsaWVudEVtYWlsOiB6LnN0cmluZygpLmVtYWlsKCkub3B0aW9uYWwoKSxcbiAgc3VibWl0dGVkRGF0YTogei5hbnkoKS5vcHRpb25hbCgpLFxufSkub21pdCh7XG4gIGlkOiB0cnVlLFxuICBzaGFyZVRva2VuOiB0cnVlLFxuICBjcmVhdGVkQXQ6IHRydWUsXG4gIHVwZGF0ZWRBdDogdHJ1ZSxcbn0pO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0UHJvamVjdFRpbWVsaW5lU2NoZW1hID0gY3JlYXRlSW5zZXJ0U2NoZW1hKHByb2plY3RUaW1lbGluZXMsIHtcbiAgdGltZWxpbmVEYXRhOiB6LmFueSgpLFxuICAvLyBOdW1lcmljIGZpZWxkczoga2VlcCBhcyBzdHJpbmdzIGZvciBwcmVjaXNpb24sIHZhbGlkYXRlIGRlY2ltYWwgZm9ybWF0XG4gIHRvdGFsV2Vla3M6IHouc3RyaW5nKCkucmVnZXgoL15cXGQrKFxcLlxcZHsxLDJ9KT8kLywgXCJNdXN0IGJlIGEgdmFsaWQgbnVtYmVyXCIpLFxuICB0b3RhbEhvdXJzOiB6LnN0cmluZygpLnJlZ2V4KC9eXFxkKyhcXC5cXGR7MSwyfSk/JC8sIFwiTXVzdCBiZSBhIHZhbGlkIG51bWJlclwiKSxcbiAgdG90YWxDb3N0OiB6LnN0cmluZygpLnJlZ2V4KC9eXFxkKyhcXC5cXGR7MSwyfSk/JC8sIFwiTXVzdCBiZSBhIHZhbGlkIGRvbGxhciBhbW91bnRcIiksXG59KS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIHNoYXJlVG9rZW46IHRydWUsXG4gIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgdXBkYXRlZEF0OiB0cnVlLFxufSk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRPcmdhbml6YXRpb25TZXR0aW5nc1NjaGVtYSA9IGNyZWF0ZUluc2VydFNjaGVtYShvcmdhbml6YXRpb25TZXR0aW5ncywge1xuICAvLyBOdW1lcmljIGZpZWxkOiBrZWVwIGFzIHN0cmluZyBmb3IgcHJlY2lzaW9uLCB2YWxpZGF0ZSBkZWNpbWFsIGZvcm1hdFxuICBkZWZhdWx0SG91cmx5UmF0ZTogei5zdHJpbmcoKS5yZWdleCgvXlxcZCsoXFwuXFxkezEsMn0pPyQvLCBcIk11c3QgYmUgYSB2YWxpZCBkb2xsYXIgYW1vdW50XCIpLm9wdGlvbmFsKCksXG4gIGJyYW5kQ29sb3I6IHouc3RyaW5nKCkucmVnZXgoL14jWzAtOUEtRmEtZl17Nn0kLykub3B0aW9uYWwoKSxcbiAgbG9nb1VybDogei5zdHJpbmcoKS51cmwoKS5vcHRpb25hbCgpLm9yKHoubGl0ZXJhbChcIlwiKSksXG4gIGN1c3RvbVByb21wdHM6IHouYW55KCkub3B0aW9uYWwoKSxcbn0pLm9taXQoe1xuICBpZDogdHJ1ZSxcbiAgY3JlYXRlZEF0OiB0cnVlLFxuICB1cGRhdGVkQXQ6IHRydWUsXG59KTtcblxuZXhwb3J0IGNvbnN0IGluc2VydEN1c3RvbVByb2plY3RUeXBlU2NoZW1hID0gY3JlYXRlSW5zZXJ0U2NoZW1hKGN1c3RvbVByb2plY3RUeXBlcywge1xuICBuYW1lOiB6LnN0cmluZygpLm1pbigxKSxcbiAgZGVzY3JpcHRpb246IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgZGVmYXVsdEhvdXJseVJhdGU6IHouc3RyaW5nKCkucmVnZXgoL15cXGQrKFxcLlxcZHsxLDJ9KT8kLywgXCJNdXN0IGJlIGEgdmFsaWQgZG9sbGFyIGFtb3VudFwiKS5vcHRpb25hbCgpLFxuICBhaVByb21wdFRlbXBsYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG59KS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgdXBkYXRlZEF0OiB0cnVlLFxufSk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRPcmdhbml6YXRpb25JbnZpdGVTY2hlbWEgPSBjcmVhdGVJbnNlcnRTY2hlbWEob3JnYW5pemF0aW9uSW52aXRlcywge1xuICBlbWFpbDogei5zdHJpbmcoKS5lbWFpbCgpLFxuICByb2xlOiB6LmVudW0oW1wib3duZXJcIiwgXCJtZW1iZXJcIl0pLm9wdGlvbmFsKCksXG59KS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIGludml0ZVRva2VuOiB0cnVlLFxuICBpbnZpdGVkQnk6IHRydWUsXG4gIGV4cGlyZXNBdDogdHJ1ZSxcbiAgYWNjZXB0ZWRBdDogdHJ1ZSxcbiAgY3JlYXRlZEF0OiB0cnVlLFxufSk7XG5cbi8vIFRpbWVsaW5lIENoYXQgU2Vzc2lvbnMgdGFibGVcbmV4cG9ydCBjb25zdCB0aW1lbGluZUNoYXRTZXNzaW9ucyA9IHBnVGFibGUoXCJ0aW1lbGluZV9jaGF0X3Nlc3Npb25zXCIsIHtcbiAgaWQ6IHRleHQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoKSksXG4gIHNoYXJlVG9rZW46IHRleHQoXCJzaGFyZV90b2tlblwiKS5ub3ROdWxsKCkudW5pcXVlKCksXG4gIHByb2plY3RJZDogdGV4dChcInByb2plY3RfaWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gcHJvamVjdHMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICB0aW1lbGluZUlkOiB0ZXh0KFwidGltZWxpbmVfaWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnVuaXF1ZSgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gcHJvamVjdFRpbWVsaW5lcy5pZCwgeyBvbkRlbGV0ZTogXCJjYXNjYWRlXCIgfSksXG4gIGNsaWVudEVtYWlsOiB0ZXh0KFwiY2xpZW50X2VtYWlsXCIpLFxuICBjcmVhdGVkQXQ6IHRpbWVzdGFtcChcImNyZWF0ZWRfYXRcIiwgeyBtb2RlOiBcInN0cmluZ1wiIH0pLm5vdE51bGwoKS5kZWZhdWx0Tm93KCksXG4gIHVwZGF0ZWRBdDogdGltZXN0YW1wKFwidXBkYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0sICh0YWJsZSkgPT4gKHtcbiAgc2hhcmVUb2tlbklkeDogaW5kZXgoXCJjaGF0X3Nlc3Npb25zX3NoYXJlX3Rva2VuX2lkeFwiKS5vbih0YWJsZS5zaGFyZVRva2VuKSxcbiAgdGltZWxpbmVJZHg6IGluZGV4KFwiY2hhdF9zZXNzaW9uc190aW1lbGluZV9pZHhcIikub24odGFibGUudGltZWxpbmVJZCksXG59KSk7XG5cbi8vIFRpbWVsaW5lIENoYXQgTWVzc2FnZXMgdGFibGVcbmV4cG9ydCBjb25zdCB0aW1lbGluZUNoYXRNZXNzYWdlcyA9IHBnVGFibGUoXCJ0aW1lbGluZV9jaGF0X21lc3NhZ2VzXCIsIHtcbiAgaWQ6IHRleHQoXCJpZFwiKS5wcmltYXJ5S2V5KCkuJGRlZmF1bHRGbigoKSA9PiBuYW5vaWQoKSksXG4gIHNlc3Npb25JZDogdGV4dChcInNlc3Npb25faWRcIilcbiAgICAubm90TnVsbCgpXG4gICAgLnJlZmVyZW5jZXMoKCkgPT4gdGltZWxpbmVDaGF0U2Vzc2lvbnMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICByb2xlOiBjaGF0TWVzc2FnZVJvbGVFbnVtKFwicm9sZVwiKS5ub3ROdWxsKCksXG4gIGNvbnRlbnQ6IHRleHQoXCJjb250ZW50XCIpLm5vdE51bGwoKSxcbiAgbWV0YWRhdGE6IGpzb25iKFwibWV0YWRhdGFcIiksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0sICh0YWJsZSkgPT4gKHtcbiAgc2Vzc2lvbklkeDogaW5kZXgoXCJjaGF0X21lc3NhZ2VzX3Nlc3Npb25faWR4XCIpLm9uKHRhYmxlLnNlc3Npb25JZCksXG59KSk7XG5cbi8vIFRpbWVsaW5lIFByb3Bvc2FscyB0YWJsZVxuZXhwb3J0IGNvbnN0IHRpbWVsaW5lUHJvcG9zYWxzID0gcGdUYWJsZShcInRpbWVsaW5lX3Byb3Bvc2Fsc1wiLCB7XG4gIGlkOiB0ZXh0KFwiaWRcIikucHJpbWFyeUtleSgpLiRkZWZhdWx0Rm4oKCkgPT4gbmFub2lkKCkpLFxuICBzZXNzaW9uSWQ6IHRleHQoXCJzZXNzaW9uX2lkXCIpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IHRpbWVsaW5lQ2hhdFNlc3Npb25zLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgYmFzZVRpbWVsaW5lSWQ6IHRleHQoXCJiYXNlX3RpbWVsaW5lX2lkXCIpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IHByb2plY3RUaW1lbGluZXMuaWQsIHsgb25EZWxldGU6IFwiY2FzY2FkZVwiIH0pLFxuICBwcm9wb3NhbERhdGE6IGpzb25iKFwicHJvcG9zYWxfZGF0YVwiKS5ub3ROdWxsKCksXG4gIGRlbHRhQ29zdDogbnVtZXJpYyhcImRlbHRhX2Nvc3RcIiwgeyBwcmVjaXNpb246IDEwLCBzY2FsZTogMiB9KS5ub3ROdWxsKCksXG4gIGRlbHRhV2Vla3M6IG51bWVyaWMoXCJkZWx0YV93ZWVrc1wiLCB7IHByZWNpc2lvbjogMTAsIHNjYWxlOiAyIH0pLm5vdE51bGwoKSxcbiAgc3RhdHVzOiBwcm9wb3NhbFN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJkcmFmdFwiKSxcbiAgc3VtbWFyeTogdGV4dChcInN1bW1hcnlcIiksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbn0sICh0YWJsZSkgPT4gKHtcbiAgc2Vzc2lvbklkeDogaW5kZXgoXCJwcm9wb3NhbHNfc2Vzc2lvbl9pZHhcIikub24odGFibGUuc2Vzc2lvbklkKSxcbiAgYmFzZVRpbWVsaW5lSWR4OiBpbmRleChcInByb3Bvc2Fsc19iYXNlX3RpbWVsaW5lX2lkeFwiKS5vbih0YWJsZS5iYXNlVGltZWxpbmVJZCksXG4gIHN0YXR1c0lkeDogaW5kZXgoXCJwcm9wb3NhbHNfc3RhdHVzX2lkeFwiKS5vbih0YWJsZS5zdGF0dXMpLFxufSkpO1xuXG4vLyBQcm9qZWN0IENoYW5nZSBPcmRlcnMgdGFibGVcbmV4cG9ydCBjb25zdCBwcm9qZWN0Q2hhbmdlT3JkZXJzID0gcGdUYWJsZShcInByb2plY3RfY2hhbmdlX29yZGVyc1wiLCB7XG4gIGlkOiB0ZXh0KFwiaWRcIikucHJpbWFyeUtleSgpLiRkZWZhdWx0Rm4oKCkgPT4gbmFub2lkKCkpLFxuICBwcm9qZWN0SWQ6IHRleHQoXCJwcm9qZWN0X2lkXCIpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IHByb2plY3RzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgcHJvcG9zYWxJZDogdGV4dChcInByb3Bvc2FsX2lkXCIpXG4gICAgLm5vdE51bGwoKVxuICAgIC5yZWZlcmVuY2VzKCgpID0+IHRpbWVsaW5lUHJvcG9zYWxzLmlkLCB7IG9uRGVsZXRlOiBcImNhc2NhZGVcIiB9KSxcbiAgcmVxdWVzdGVkQnk6IHRleHQoXCJyZXF1ZXN0ZWRfYnlcIikucmVmZXJlbmNlcygoKSA9PiB1c2Vycy5pZCksXG4gIGNsaWVudEVtYWlsOiB0ZXh0KFwiY2xpZW50X2VtYWlsXCIpLFxuICBjbGllbnROb3RlczogdGV4dChcImNsaWVudF9ub3Rlc1wiKSxcbiAgc3RhdHVzOiBjaGFuZ2VPcmRlclN0YXR1c0VudW0oXCJzdGF0dXNcIikubm90TnVsbCgpLmRlZmF1bHQoXCJkcmFmdFwiKSxcbiAgYXBwcm92ZWRCeTogdGV4dChcImFwcHJvdmVkX2J5XCIpLnJlZmVyZW5jZXMoKCkgPT4gdXNlcnMuaWQpLFxuICBhcHByb3ZlZEF0OiB0aW1lc3RhbXAoXCJhcHByb3ZlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSksXG4gIGNyZWF0ZWRBdDogdGltZXN0YW1wKFwiY3JlYXRlZF9hdFwiLCB7IG1vZGU6IFwic3RyaW5nXCIgfSkubm90TnVsbCgpLmRlZmF1bHROb3coKSxcbiAgdXBkYXRlZEF0OiB0aW1lc3RhbXAoXCJ1cGRhdGVkX2F0XCIsIHsgbW9kZTogXCJzdHJpbmdcIiB9KS5ub3ROdWxsKCkuZGVmYXVsdE5vdygpLFxufSwgKHRhYmxlKSA9PiAoe1xuICBwcm9qZWN0SWR4OiBpbmRleChcImNoYW5nZV9vcmRlcnNfcHJvamVjdF9pZHhcIikub24odGFibGUucHJvamVjdElkKSxcbiAgcHJvcG9zYWxJZHg6IGluZGV4KFwiY2hhbmdlX29yZGVyc19wcm9wb3NhbF9pZHhcIikub24odGFibGUucHJvcG9zYWxJZCksXG4gIHN0YXR1c0lkeDogaW5kZXgoXCJjaGFuZ2Vfb3JkZXJzX3N0YXR1c19pZHhcIikub24odGFibGUuc3RhdHVzKSxcbn0pKTtcblxuLy8gSW5zZXJ0IHNjaGVtYXNcbmV4cG9ydCBjb25zdCBpbnNlcnRUaW1lbGluZUNoYXRTZXNzaW9uU2NoZW1hID0gY3JlYXRlSW5zZXJ0U2NoZW1hKHRpbWVsaW5lQ2hhdFNlc3Npb25zKS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgdXBkYXRlZEF0OiB0cnVlLFxufSk7XG5cbmV4cG9ydCBjb25zdCBpbnNlcnRUaW1lbGluZUNoYXRNZXNzYWdlU2NoZW1hID0gY3JlYXRlSW5zZXJ0U2NoZW1hKHRpbWVsaW5lQ2hhdE1lc3NhZ2VzKS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIGNyZWF0ZWRBdDogdHJ1ZSxcbn0pO1xuXG5leHBvcnQgY29uc3QgaW5zZXJ0VGltZWxpbmVQcm9wb3NhbFNjaGVtYSA9IGNyZWF0ZUluc2VydFNjaGVtYSh0aW1lbGluZVByb3Bvc2Fscykub21pdCh7XG4gIGlkOiB0cnVlLFxuICBjcmVhdGVkQXQ6IHRydWUsXG59KTtcblxuZXhwb3J0IGNvbnN0IGluc2VydFByb2plY3RDaGFuZ2VPcmRlclNjaGVtYSA9IGNyZWF0ZUluc2VydFNjaGVtYShwcm9qZWN0Q2hhbmdlT3JkZXJzKS5vbWl0KHtcbiAgaWQ6IHRydWUsXG4gIGNyZWF0ZWRBdDogdHJ1ZSxcbiAgdXBkYXRlZEF0OiB0cnVlLFxufSk7XG5cbi8vIFR5cGVzXG5leHBvcnQgdHlwZSBVc2VyID0gdHlwZW9mIHVzZXJzLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIEluc2VydFVzZXIgPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRVc2VyU2NoZW1hPjtcbmV4cG9ydCB0eXBlIE9yZ2FuaXphdGlvbiA9IHR5cGVvZiBvcmdhbml6YXRpb25zLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIEluc2VydE9yZ2FuaXphdGlvbiA9IHouaW5mZXI8dHlwZW9mIGluc2VydE9yZ2FuaXphdGlvblNjaGVtYT47XG5leHBvcnQgdHlwZSBPcmdhbml6YXRpb25NZW1iZXIgPSB0eXBlb2Ygb3JnYW5pemF0aW9uTWVtYmVycy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBTZXNzaW9uID0gdHlwZW9mIHNlc3Npb25zLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIEFjY291bnQgPSB0eXBlb2YgYWNjb3VudHMuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgUHJvamVjdCA9IHR5cGVvZiBwcm9qZWN0cy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBJbnNlcnRQcm9qZWN0ID0gei5pbmZlcjx0eXBlb2YgaW5zZXJ0UHJvamVjdFNjaGVtYT47XG5leHBvcnQgdHlwZSBVcGRhdGVQcm9qZWN0ID0gei5pbmZlcjx0eXBlb2YgdXBkYXRlUHJvamVjdFNjaGVtYT47XG5leHBvcnQgdHlwZSBQcm9qZWN0Rm9ybSA9IHR5cGVvZiBwcm9qZWN0Rm9ybXMuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgSW5zZXJ0UHJvamVjdEZvcm0gPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRQcm9qZWN0Rm9ybVNjaGVtYT47XG5leHBvcnQgdHlwZSBQcm9qZWN0VGltZWxpbmUgPSB0eXBlb2YgcHJvamVjdFRpbWVsaW5lcy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBJbnNlcnRQcm9qZWN0VGltZWxpbmUgPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRQcm9qZWN0VGltZWxpbmVTY2hlbWE+O1xuZXhwb3J0IHR5cGUgT3JnYW5pemF0aW9uU2V0dGluZ3MgPSB0eXBlb2Ygb3JnYW5pemF0aW9uU2V0dGluZ3MuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgSW5zZXJ0T3JnYW5pemF0aW9uU2V0dGluZ3MgPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRPcmdhbml6YXRpb25TZXR0aW5nc1NjaGVtYT47XG5leHBvcnQgdHlwZSBDdXN0b21Qcm9qZWN0VHlwZSA9IHR5cGVvZiBjdXN0b21Qcm9qZWN0VHlwZXMuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgSW5zZXJ0Q3VzdG9tUHJvamVjdFR5cGUgPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRDdXN0b21Qcm9qZWN0VHlwZVNjaGVtYT47XG5leHBvcnQgdHlwZSBPcmdhbml6YXRpb25JbnZpdGUgPSB0eXBlb2Ygb3JnYW5pemF0aW9uSW52aXRlcy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBJbnNlcnRPcmdhbml6YXRpb25JbnZpdGUgPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRPcmdhbml6YXRpb25JbnZpdGVTY2hlbWE+O1xuZXhwb3J0IHR5cGUgVGltZWxpbmVDaGF0U2Vzc2lvbiA9IHR5cGVvZiB0aW1lbGluZUNoYXRTZXNzaW9ucy4kaW5mZXJTZWxlY3Q7XG5leHBvcnQgdHlwZSBJbnNlcnRUaW1lbGluZUNoYXRTZXNzaW9uID0gei5pbmZlcjx0eXBlb2YgaW5zZXJ0VGltZWxpbmVDaGF0U2Vzc2lvblNjaGVtYT47XG5leHBvcnQgdHlwZSBUaW1lbGluZUNoYXRNZXNzYWdlID0gdHlwZW9mIHRpbWVsaW5lQ2hhdE1lc3NhZ2VzLiRpbmZlclNlbGVjdDtcbmV4cG9ydCB0eXBlIEluc2VydFRpbWVsaW5lQ2hhdE1lc3NhZ2UgPSB6LmluZmVyPHR5cGVvZiBpbnNlcnRUaW1lbGluZUNoYXRNZXNzYWdlU2NoZW1hPjtcbmV4cG9ydCB0eXBlIFRpbWVsaW5lUHJvcG9zYWwgPSB0eXBlb2YgdGltZWxpbmVQcm9wb3NhbHMuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgSW5zZXJ0VGltZWxpbmVQcm9wb3NhbCA9IHouaW5mZXI8dHlwZW9mIGluc2VydFRpbWVsaW5lUHJvcG9zYWxTY2hlbWE+O1xuZXhwb3J0IHR5cGUgUHJvamVjdENoYW5nZU9yZGVyID0gdHlwZW9mIHByb2plY3RDaGFuZ2VPcmRlcnMuJGluZmVyU2VsZWN0O1xuZXhwb3J0IHR5cGUgSW5zZXJ0UHJvamVjdENoYW5nZU9yZGVyID0gei5pbmZlcjx0eXBlb2YgaW5zZXJ0UHJvamVjdENoYW5nZU9yZGVyU2NoZW1hPjtcbiJdLCJuYW1lcyI6WyJwZ1RhYmxlIiwidGV4dCIsInRpbWVzdGFtcCIsInBnRW51bSIsImJvb2xlYW4iLCJudW1lcmljIiwianNvbmIiLCJpbmRleCIsInJlbGF0aW9ucyIsImNyZWF0ZUluc2VydFNjaGVtYSIsInoiLCJuYW5vaWQiLCJyb2xlRW51bSIsInByb2plY3RUeXBlRW51bSIsInByb2plY3RTdGF0dXNFbnVtIiwiY2hhdE1lc3NhZ2VSb2xlRW51bSIsInByb3Bvc2FsU3RhdHVzRW51bSIsImNoYW5nZU9yZGVyU3RhdHVzRW51bSIsInVzZXJzIiwiaWQiLCJwcmltYXJ5S2V5IiwiZW1haWwiLCJub3ROdWxsIiwidW5pcXVlIiwiZW1haWxWZXJpZmllZCIsImRlZmF1bHQiLCJuYW1lIiwiY3JlYXRlZEF0IiwibW9kZSIsImRlZmF1bHROb3ciLCJ1cGRhdGVkQXQiLCJzZXNzaW9ucyIsImV4cGlyZXNBdCIsInRva2VuIiwiaXBBZGRyZXNzIiwidXNlckFnZW50IiwidXNlcklkIiwicmVmZXJlbmNlcyIsIm9uRGVsZXRlIiwiYWNjb3VudHMiLCJhY2NvdW50SWQiLCJwcm92aWRlcklkIiwiYWNjZXNzVG9rZW4iLCJyZWZyZXNoVG9rZW4iLCJpZFRva2VuIiwicGFzc3dvcmQiLCJ2ZXJpZmljYXRpb25zIiwiaWRlbnRpZmllciIsInZhbHVlIiwib3JnYW5pemF0aW9ucyIsIm93bmVySWQiLCJvcmdhbml6YXRpb25NZW1iZXJzIiwib3JnYW5pemF0aW9uSWQiLCJyb2xlIiwidGFibGUiLCJvcmdhbml6YXRpb25JZHgiLCJvbiIsInVzZXJJZHgiLCJwcm9qZWN0cyIsIiRkZWZhdWx0Rm4iLCJjbGllbnROYW1lIiwicHJvamVjdFR5cGUiLCJwcm9qZWN0QnJpZWYiLCJob3VybHlSYXRlIiwicHJlY2lzaW9uIiwic2NhbGUiLCJzdGF0dXMiLCJjcmVhdGVkQnkiLCJjcmVhdGVkQnlJZHgiLCJzdGF0dXNJZHgiLCJwcm9qZWN0Rm9ybXMiLCJwcm9qZWN0SWQiLCJmb3JtRGF0YSIsImNsaWVudEVtYWlsIiwic2hhcmVUb2tlbiIsInN1Ym1pdHRlZEF0Iiwic3VibWl0dGVkRGF0YSIsInByb2plY3RJZHgiLCJzaGFyZVRva2VuSWR4IiwicHJvamVjdFRpbWVsaW5lcyIsInRpbWVsaW5lRGF0YSIsInRvdGFsV2Vla3MiLCJ0b3RhbEhvdXJzIiwidG90YWxDb3N0Iiwib3JnYW5pemF0aW9uU2V0dGluZ3MiLCJkZWZhdWx0SG91cmx5UmF0ZSIsImJyYW5kQ29sb3IiLCJsb2dvVXJsIiwiY3VzdG9tUHJvbXB0cyIsImN1c3RvbVByb2plY3RUeXBlcyIsImRlc2NyaXB0aW9uIiwiYWlQcm9tcHRUZW1wbGF0ZSIsIm9yZ2FuaXphdGlvbkludml0ZXMiLCJpbnZpdGVUb2tlbiIsImludml0ZWRCeSIsImFjY2VwdGVkQXQiLCJpbnZpdGVUb2tlbklkeCIsImVtYWlsSWR4IiwidXNlcnNSZWxhdGlvbnMiLCJtYW55Iiwib3duZWRPcmdhbml6YXRpb25zIiwiY3JlYXRlZFByb2plY3RzIiwib3JnYW5pemF0aW9uc1JlbGF0aW9ucyIsIm9uZSIsIm93bmVyIiwiZmllbGRzIiwibWVtYmVycyIsInNldHRpbmdzIiwiaW52aXRlcyIsIm9yZ2FuaXphdGlvbk1lbWJlcnNSZWxhdGlvbnMiLCJvcmdhbml6YXRpb24iLCJ1c2VyIiwic2Vzc2lvbnNSZWxhdGlvbnMiLCJhY2NvdW50c1JlbGF0aW9ucyIsInByb2plY3RzUmVsYXRpb25zIiwiY3JlYXRvciIsImZvcm0iLCJ0aW1lbGluZXMiLCJwcm9qZWN0Rm9ybXNSZWxhdGlvbnMiLCJwcm9qZWN0IiwicHJvamVjdFRpbWVsaW5lc1JlbGF0aW9ucyIsIm9yZ2FuaXphdGlvblNldHRpbmdzUmVsYXRpb25zIiwiY3VzdG9tUHJvamVjdFR5cGVzUmVsYXRpb25zIiwib3JnYW5pemF0aW9uSW52aXRlc1JlbGF0aW9ucyIsImludml0ZWRCeVVzZXIiLCJpbnNlcnRVc2VyU2NoZW1hIiwic3RyaW5nIiwibWluIiwicGljayIsImluc2VydE9yZ2FuaXphdGlvblNjaGVtYSIsImluc2VydFByb2plY3RTY2hlbWEiLCJyZWdleCIsIm9taXQiLCJ1cGRhdGVQcm9qZWN0U2NoZW1hIiwib3B0aW9uYWwiLCJlbnVtIiwiaW5zZXJ0UHJvamVjdEZvcm1TY2hlbWEiLCJhbnkiLCJpbnNlcnRQcm9qZWN0VGltZWxpbmVTY2hlbWEiLCJpbnNlcnRPcmdhbml6YXRpb25TZXR0aW5nc1NjaGVtYSIsInVybCIsIm9yIiwibGl0ZXJhbCIsImluc2VydEN1c3RvbVByb2plY3RUeXBlU2NoZW1hIiwiaW5zZXJ0T3JnYW5pemF0aW9uSW52aXRlU2NoZW1hIiwidGltZWxpbmVDaGF0U2Vzc2lvbnMiLCJ0aW1lbGluZUlkIiwidGltZWxpbmVJZHgiLCJ0aW1lbGluZUNoYXRNZXNzYWdlcyIsInNlc3Npb25JZCIsImNvbnRlbnQiLCJtZXRhZGF0YSIsInNlc3Npb25JZHgiLCJ0aW1lbGluZVByb3Bvc2FscyIsImJhc2VUaW1lbGluZUlkIiwicHJvcG9zYWxEYXRhIiwiZGVsdGFDb3N0IiwiZGVsdGFXZWVrcyIsInN1bW1hcnkiLCJiYXNlVGltZWxpbmVJZHgiLCJwcm9qZWN0Q2hhbmdlT3JkZXJzIiwicHJvcG9zYWxJZCIsInJlcXVlc3RlZEJ5IiwiY2xpZW50Tm90ZXMiLCJhcHByb3ZlZEJ5IiwiYXBwcm92ZWRBdCIsInByb3Bvc2FsSWR4IiwiaW5zZXJ0VGltZWxpbmVDaGF0U2Vzc2lvblNjaGVtYSIsImluc2VydFRpbWVsaW5lQ2hhdE1lc3NhZ2VTY2hlbWEiLCJpbnNlcnRUaW1lbGluZVByb3Bvc2FsU2NoZW1hIiwiaW5zZXJ0UHJvamVjdENoYW5nZU9yZGVyU2NoZW1hIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/schema.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/zod","vendor-chunks/drizzle-orm","vendor-chunks/@neondatabase","vendor-chunks/ws","vendor-chunks/drizzle-zod","vendor-chunks/node-gyp-build","vendor-chunks/utf-8-validate","vendor-chunks/nanoid","vendor-chunks/bufferutil","vendor-chunks/@anthropic-ai"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&page=%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftimelines%2F%5BshareToken%5D%2Fchat%2Froute.ts&appDir=%2Fhome%2Frunner%2Fworkspace%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2Fhome%2Frunner%2Fworkspace&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();
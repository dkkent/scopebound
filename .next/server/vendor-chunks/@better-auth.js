"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@better-auth";
exports.ids = ["vendor-chunks/@better-auth"];
exports.modules = {

/***/ "(ssr)/./node_modules/@better-auth/core/dist/env/index.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/env/index.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ENV: () => (/* binding */ ENV),\n/* harmony export */   TTY_COLORS: () => (/* binding */ TTY_COLORS),\n/* harmony export */   createLogger: () => (/* binding */ createLogger),\n/* harmony export */   env: () => (/* binding */ env),\n/* harmony export */   getBooleanEnvVar: () => (/* binding */ getBooleanEnvVar),\n/* harmony export */   getColorDepth: () => (/* binding */ getColorDepth),\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   isTest: () => (/* binding */ isTest),\n/* harmony export */   levels: () => (/* binding */ levels),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   nodeENV: () => (/* binding */ nodeENV),\n/* harmony export */   shouldPublishLog: () => (/* binding */ shouldPublishLog)\n/* harmony export */ });\nconst _envShim = /* @__PURE__ */ Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || //@ts-expect-error\nglobalThis.Deno?.env.toObject() || //@ts-expect-error\nglobalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n  get(_, prop) {\n    const env2 = _getEnv();\n    return env2[prop] ?? _envShim[prop];\n  },\n  has(_, prop) {\n    const env2 = _getEnv();\n    return prop in env2 || prop in _envShim;\n  },\n  set(_, prop, value) {\n    const env2 = _getEnv(true);\n    env2[prop] = value;\n    return true;\n  },\n  deleteProperty(_, prop) {\n    if (!prop) {\n      return false;\n    }\n    const env2 = _getEnv(true);\n    delete env2[prop];\n    return true;\n  },\n  ownKeys() {\n    const env2 = _getEnv(true);\n    return Object.keys(env2);\n  }\n});\nfunction toBoolean(val) {\n  return val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && \"development\" || \"\";\nconst isProduction = nodeENV === \"production\";\nconst isDevelopment = () => nodeENV === \"dev\" || nodeENV === \"development\";\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\nfunction getEnvVar(key, fallback) {\n  if (typeof process !== \"undefined\" && process.env) {\n    return process.env[key] ?? fallback;\n  }\n  if (typeof Deno !== \"undefined\") {\n    return Deno.env.get(key) ?? fallback;\n  }\n  if (typeof Bun !== \"undefined\") {\n    return Bun.env[key] ?? fallback;\n  }\n  return fallback;\n}\nfunction getBooleanEnvVar(key, fallback = true) {\n  const value = getEnvVar(key);\n  if (!value) return fallback;\n  return value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\nconst ENV = Object.freeze({\n  get BETTER_AUTH_SECRET() {\n    return getEnvVar(\"BETTER_AUTH_SECRET\");\n  },\n  get AUTH_SECRET() {\n    return getEnvVar(\"AUTH_SECRET\");\n  },\n  get BETTER_AUTH_TELEMETRY() {\n    return getEnvVar(\"BETTER_AUTH_TELEMETRY\");\n  },\n  get BETTER_AUTH_TELEMETRY_ID() {\n    return getEnvVar(\"BETTER_AUTH_TELEMETRY_ID\");\n  },\n  get NODE_ENV() {\n    return getEnvVar(\"NODE_ENV\", \"development\");\n  },\n  get PACKAGE_VERSION() {\n    return getEnvVar(\"PACKAGE_VERSION\", \"0.0.0\");\n  },\n  get BETTER_AUTH_TELEMETRY_ENDPOINT() {\n    return getEnvVar(\n      \"BETTER_AUTH_TELEMETRY_ENDPOINT\",\n      \"https://telemetry.better-auth.com/v1/track\"\n    );\n  }\n});\n\nconst COLORS_2 = 1;\nconst COLORS_16 = 4;\nconst COLORS_256 = 8;\nconst COLORS_16m = 24;\nconst TERM_ENVS = {\n  eterm: COLORS_16,\n  cons25: COLORS_16,\n  console: COLORS_16,\n  cygwin: COLORS_16,\n  dtterm: COLORS_16,\n  gnome: COLORS_16,\n  hurd: COLORS_16,\n  jfbterm: COLORS_16,\n  konsole: COLORS_16,\n  kterm: COLORS_16,\n  mlterm: COLORS_16,\n  mosh: COLORS_16m,\n  putty: COLORS_16,\n  st: COLORS_16,\n  // http://lists.schmorp.de/pipermail/rxvt-unicode/2016q2/002261.html\n  \"rxvt-unicode-24bit\": COLORS_16m,\n  // https://bugs.launchpad.net/terminator/+bug/1030562\n  terminator: COLORS_16m,\n  \"xterm-kitty\": COLORS_16m\n};\nconst CI_ENVS_MAP = new Map(\n  Object.entries({\n    APPVEYOR: COLORS_256,\n    BUILDKITE: COLORS_256,\n    CIRCLECI: COLORS_16m,\n    DRONE: COLORS_256,\n    GITEA_ACTIONS: COLORS_16m,\n    GITHUB_ACTIONS: COLORS_16m,\n    GITLAB_CI: COLORS_256,\n    TRAVIS: COLORS_256\n  })\n);\nconst TERM_ENVS_REG_EXP = [\n  /ansi/,\n  /color/,\n  /linux/,\n  /direct/,\n  /^con[0-9]*x[0-9]/,\n  /^rxvt/,\n  /^screen/,\n  /^xterm/,\n  /^vt100/,\n  /^vt220/\n];\nfunction getColorDepth() {\n  if (getEnvVar(\"FORCE_COLOR\") !== void 0) {\n    switch (getEnvVar(\"FORCE_COLOR\")) {\n      case \"\":\n      case \"1\":\n      case \"true\":\n        return COLORS_16;\n      case \"2\":\n        return COLORS_256;\n      case \"3\":\n        return COLORS_16m;\n      default:\n        return COLORS_2;\n    }\n  }\n  if (getEnvVar(\"NODE_DISABLE_COLORS\") !== void 0 && getEnvVar(\"NODE_DISABLE_COLORS\") !== \"\" || // See https://no-color.org/\n  getEnvVar(\"NO_COLOR\") !== void 0 && getEnvVar(\"NO_COLOR\") !== \"\" || // The \"dumb\" special terminal, as defined by terminfo, doesn't support\n  // ANSI color control codes.\n  // See https://invisible-island.net/ncurses/terminfo.ti.html#toc-_Specials\n  getEnvVar(\"TERM\") === \"dumb\") {\n    return COLORS_2;\n  }\n  if (getEnvVar(\"TMUX\")) {\n    return COLORS_16m;\n  }\n  if (\"TF_BUILD\" in env && \"AGENT_NAME\" in env) {\n    return COLORS_16;\n  }\n  if (\"CI\" in env) {\n    for (const { 0: envName, 1: colors } of CI_ENVS_MAP) {\n      if (envName in env) {\n        return colors;\n      }\n    }\n    if (getEnvVar(\"CI_NAME\") === \"codeship\") {\n      return COLORS_256;\n    }\n    return COLORS_2;\n  }\n  if (\"TEAMCITY_VERSION\" in env) {\n    return /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.exec(\n      getEnvVar(\"TEAMCITY_VERSION\")\n    ) !== null ? COLORS_16 : COLORS_2;\n  }\n  switch (getEnvVar(\"TERM_PROGRAM\")) {\n    case \"iTerm.app\":\n      if (!getEnvVar(\"TERM_PROGRAM_VERSION\") || /^[0-2]\\./.exec(getEnvVar(\"TERM_PROGRAM_VERSION\")) !== null) {\n        return COLORS_256;\n      }\n      return COLORS_16m;\n    case \"HyperTerm\":\n    case \"MacTerm\":\n      return COLORS_16m;\n    case \"Apple_Terminal\":\n      return COLORS_256;\n  }\n  if (getEnvVar(\"COLORTERM\") === \"truecolor\" || getEnvVar(\"COLORTERM\") === \"24bit\") {\n    return COLORS_16m;\n  }\n  if (getEnvVar(\"TERM\")) {\n    if (/truecolor/.exec(getEnvVar(\"TERM\")) !== null) {\n      return COLORS_16m;\n    }\n    if (/^xterm-256/.exec(getEnvVar(\"TERM\")) !== null) {\n      return COLORS_256;\n    }\n    const termEnv = getEnvVar(\"TERM\").toLowerCase();\n    if (TERM_ENVS[termEnv]) {\n      return TERM_ENVS[termEnv];\n    }\n    if (TERM_ENVS_REG_EXP.some((term) => term.exec(termEnv) !== null)) {\n      return COLORS_16;\n    }\n  }\n  if (getEnvVar(\"COLORTERM\")) {\n    return COLORS_16;\n  }\n  return COLORS_2;\n}\n\nconst TTY_COLORS = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  undim: \"\\x1B[22m\",\n  underscore: \"\\x1B[4m\",\n  blink: \"\\x1B[5m\",\n  reverse: \"\\x1B[7m\",\n  hidden: \"\\x1B[8m\",\n  fg: {\n    black: \"\\x1B[30m\",\n    red: \"\\x1B[31m\",\n    green: \"\\x1B[32m\",\n    yellow: \"\\x1B[33m\",\n    blue: \"\\x1B[34m\",\n    magenta: \"\\x1B[35m\",\n    cyan: \"\\x1B[36m\",\n    white: \"\\x1B[37m\"\n  },\n  bg: {\n    black: \"\\x1B[40m\",\n    red: \"\\x1B[41m\",\n    green: \"\\x1B[42m\",\n    yellow: \"\\x1B[43m\",\n    blue: \"\\x1B[44m\",\n    magenta: \"\\x1B[45m\",\n    cyan: \"\\x1B[46m\",\n    white: \"\\x1B[47m\"\n  }\n};\nconst levels = [\"info\", \"success\", \"warn\", \"error\", \"debug\"];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n  return levels.indexOf(logLevel) <= levels.indexOf(currentLogLevel);\n}\nconst levelColors = {\n  info: TTY_COLORS.fg.blue,\n  success: TTY_COLORS.fg.green,\n  warn: TTY_COLORS.fg.yellow,\n  error: TTY_COLORS.fg.red,\n  debug: TTY_COLORS.fg.magenta\n};\nconst formatMessage = (level, message, colorsEnabled) => {\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n  if (colorsEnabled) {\n    return `${TTY_COLORS.dim}${timestamp}${TTY_COLORS.reset} ${levelColors[level]}${level.toUpperCase()}${TTY_COLORS.reset} ${TTY_COLORS.bright}[Better Auth]:${TTY_COLORS.reset} ${message}`;\n  }\n  return `${timestamp} ${level.toUpperCase()} [Better Auth]: ${message}`;\n};\nconst createLogger = (options) => {\n  const enabled = options?.disabled !== true;\n  const logLevel = options?.level ?? \"error\";\n  const isDisableColorsSpecified = options?.disableColors !== void 0;\n  const colorsEnabled = isDisableColorsSpecified ? !options.disableColors : getColorDepth() !== 1;\n  const LogFunc = (level, message, args = []) => {\n    if (!enabled || !shouldPublishLog(logLevel, level)) {\n      return;\n    }\n    const formattedMessage = formatMessage(level, message, colorsEnabled);\n    if (!options || typeof options.log !== \"function\") {\n      if (level === \"error\") {\n        console.error(formattedMessage, ...args);\n      } else if (level === \"warn\") {\n        console.warn(formattedMessage, ...args);\n      } else {\n        console.log(formattedMessage, ...args);\n      }\n      return;\n    }\n    options.log(level === \"success\" ? \"info\" : level, message, ...args);\n  };\n  const logger2 = Object.fromEntries(\n    levels.map((level) => [\n      level,\n      (...[message, ...args]) => LogFunc(level, message, args)\n    ])\n  );\n  return {\n    ...logger2,\n    get level() {\n      return logLevel;\n    }\n  };\n};\nconst logger = createLogger();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9lbnYvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGFBQW9CO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLEdBQUc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGVBQWUsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsbUJBQW1CLEVBQUUsb0JBQW9CLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLGdCQUFnQixrQkFBa0IsRUFBRSxRQUFRO0FBQzVMO0FBQ0EsWUFBWSxXQUFXLEVBQUUscUJBQXFCLGlCQUFpQixRQUFRO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9lbnYvaW5kZXgubWpzPzRiOTUiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgX2VudlNoaW0gPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IF9nZXRFbnYgPSAodXNlU2hpbSkgPT4gZ2xvYmFsVGhpcy5wcm9jZXNzPy5lbnYgfHwgLy9AdHMtZXhwZWN0LWVycm9yXG5nbG9iYWxUaGlzLkRlbm8/LmVudi50b09iamVjdCgpIHx8IC8vQHRzLWV4cGVjdC1lcnJvclxuZ2xvYmFsVGhpcy5fX2Vudl9fIHx8ICh1c2VTaGltID8gX2VudlNoaW0gOiBnbG9iYWxUaGlzKTtcbmNvbnN0IGVudiA9IG5ldyBQcm94eShfZW52U2hpbSwge1xuICBnZXQoXywgcHJvcCkge1xuICAgIGNvbnN0IGVudjIgPSBfZ2V0RW52KCk7XG4gICAgcmV0dXJuIGVudjJbcHJvcF0gPz8gX2VudlNoaW1bcHJvcF07XG4gIH0sXG4gIGhhcyhfLCBwcm9wKSB7XG4gICAgY29uc3QgZW52MiA9IF9nZXRFbnYoKTtcbiAgICByZXR1cm4gcHJvcCBpbiBlbnYyIHx8IHByb3AgaW4gX2VudlNoaW07XG4gIH0sXG4gIHNldChfLCBwcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IGVudjIgPSBfZ2V0RW52KHRydWUpO1xuICAgIGVudjJbcHJvcF0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgIGlmICghcHJvcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBlbnYyID0gX2dldEVudih0cnVlKTtcbiAgICBkZWxldGUgZW52Mltwcm9wXTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgb3duS2V5cygpIHtcbiAgICBjb25zdCBlbnYyID0gX2dldEVudih0cnVlKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZW52Mik7XG4gIH1cbn0pO1xuZnVuY3Rpb24gdG9Cb29sZWFuKHZhbCkge1xuICByZXR1cm4gdmFsID8gdmFsICE9PSBcImZhbHNlXCIgOiBmYWxzZTtcbn1cbmNvbnN0IG5vZGVFTlYgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcIlwiO1xuY29uc3QgaXNQcm9kdWN0aW9uID0gbm9kZUVOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG5jb25zdCBpc0RldmVsb3BtZW50ID0gKCkgPT4gbm9kZUVOViA9PT0gXCJkZXZcIiB8fCBub2RlRU5WID09PSBcImRldmVsb3BtZW50XCI7XG5jb25zdCBpc1Rlc3QgPSAoKSA9PiBub2RlRU5WID09PSBcInRlc3RcIiB8fCB0b0Jvb2xlYW4oZW52LlRFU1QpO1xuZnVuY3Rpb24gZ2V0RW52VmFyKGtleSwgZmFsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52W2tleV0gPz8gZmFsbGJhY2s7XG4gIH1cbiAgaWYgKHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIERlbm8uZW52LmdldChrZXkpID8/IGZhbGxiYWNrO1xuICB9XG4gIGlmICh0eXBlb2YgQnVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIEJ1bi5lbnZba2V5XSA/PyBmYWxsYmFjaztcbiAgfVxuICByZXR1cm4gZmFsbGJhY2s7XG59XG5mdW5jdGlvbiBnZXRCb29sZWFuRW52VmFyKGtleSwgZmFsbGJhY2sgPSB0cnVlKSB7XG4gIGNvbnN0IHZhbHVlID0gZ2V0RW52VmFyKGtleSk7XG4gIGlmICghdmFsdWUpIHJldHVybiBmYWxsYmFjaztcbiAgcmV0dXJuIHZhbHVlICE9PSBcIjBcIiAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpICE9PSBcImZhbHNlXCIgJiYgdmFsdWUgIT09IFwiXCI7XG59XG5jb25zdCBFTlYgPSBPYmplY3QuZnJlZXplKHtcbiAgZ2V0IEJFVFRFUl9BVVRIX1NFQ1JFVCgpIHtcbiAgICByZXR1cm4gZ2V0RW52VmFyKFwiQkVUVEVSX0FVVEhfU0VDUkVUXCIpO1xuICB9LFxuICBnZXQgQVVUSF9TRUNSRVQoKSB7XG4gICAgcmV0dXJuIGdldEVudlZhcihcIkFVVEhfU0VDUkVUXCIpO1xuICB9LFxuICBnZXQgQkVUVEVSX0FVVEhfVEVMRU1FVFJZKCkge1xuICAgIHJldHVybiBnZXRFbnZWYXIoXCJCRVRURVJfQVVUSF9URUxFTUVUUllcIik7XG4gIH0sXG4gIGdldCBCRVRURVJfQVVUSF9URUxFTUVUUllfSUQoKSB7XG4gICAgcmV0dXJuIGdldEVudlZhcihcIkJFVFRFUl9BVVRIX1RFTEVNRVRSWV9JRFwiKTtcbiAgfSxcbiAgZ2V0IE5PREVfRU5WKCkge1xuICAgIHJldHVybiBnZXRFbnZWYXIoXCJOT0RFX0VOVlwiLCBcImRldmVsb3BtZW50XCIpO1xuICB9LFxuICBnZXQgUEFDS0FHRV9WRVJTSU9OKCkge1xuICAgIHJldHVybiBnZXRFbnZWYXIoXCJQQUNLQUdFX1ZFUlNJT05cIiwgXCIwLjAuMFwiKTtcbiAgfSxcbiAgZ2V0IEJFVFRFUl9BVVRIX1RFTEVNRVRSWV9FTkRQT0lOVCgpIHtcbiAgICByZXR1cm4gZ2V0RW52VmFyKFxuICAgICAgXCJCRVRURVJfQVVUSF9URUxFTUVUUllfRU5EUE9JTlRcIixcbiAgICAgIFwiaHR0cHM6Ly90ZWxlbWV0cnkuYmV0dGVyLWF1dGguY29tL3YxL3RyYWNrXCJcbiAgICApO1xuICB9XG59KTtcblxuY29uc3QgQ09MT1JTXzIgPSAxO1xuY29uc3QgQ09MT1JTXzE2ID0gNDtcbmNvbnN0IENPTE9SU18yNTYgPSA4O1xuY29uc3QgQ09MT1JTXzE2bSA9IDI0O1xuY29uc3QgVEVSTV9FTlZTID0ge1xuICBldGVybTogQ09MT1JTXzE2LFxuICBjb25zMjU6IENPTE9SU18xNixcbiAgY29uc29sZTogQ09MT1JTXzE2LFxuICBjeWd3aW46IENPTE9SU18xNixcbiAgZHR0ZXJtOiBDT0xPUlNfMTYsXG4gIGdub21lOiBDT0xPUlNfMTYsXG4gIGh1cmQ6IENPTE9SU18xNixcbiAgamZidGVybTogQ09MT1JTXzE2LFxuICBrb25zb2xlOiBDT0xPUlNfMTYsXG4gIGt0ZXJtOiBDT0xPUlNfMTYsXG4gIG1sdGVybTogQ09MT1JTXzE2LFxuICBtb3NoOiBDT0xPUlNfMTZtLFxuICBwdXR0eTogQ09MT1JTXzE2LFxuICBzdDogQ09MT1JTXzE2LFxuICAvLyBodHRwOi8vbGlzdHMuc2NobW9ycC5kZS9waXBlcm1haWwvcnh2dC11bmljb2RlLzIwMTZxMi8wMDIyNjEuaHRtbFxuICBcInJ4dnQtdW5pY29kZS0yNGJpdFwiOiBDT0xPUlNfMTZtLFxuICAvLyBodHRwczovL2J1Z3MubGF1bmNocGFkLm5ldC90ZXJtaW5hdG9yLytidWcvMTAzMDU2MlxuICB0ZXJtaW5hdG9yOiBDT0xPUlNfMTZtLFxuICBcInh0ZXJtLWtpdHR5XCI6IENPTE9SU18xNm1cbn07XG5jb25zdCBDSV9FTlZTX01BUCA9IG5ldyBNYXAoXG4gIE9iamVjdC5lbnRyaWVzKHtcbiAgICBBUFBWRVlPUjogQ09MT1JTXzI1NixcbiAgICBCVUlMREtJVEU6IENPTE9SU18yNTYsXG4gICAgQ0lSQ0xFQ0k6IENPTE9SU18xNm0sXG4gICAgRFJPTkU6IENPTE9SU18yNTYsXG4gICAgR0lURUFfQUNUSU9OUzogQ09MT1JTXzE2bSxcbiAgICBHSVRIVUJfQUNUSU9OUzogQ09MT1JTXzE2bSxcbiAgICBHSVRMQUJfQ0k6IENPTE9SU18yNTYsXG4gICAgVFJBVklTOiBDT0xPUlNfMjU2XG4gIH0pXG4pO1xuY29uc3QgVEVSTV9FTlZTX1JFR19FWFAgPSBbXG4gIC9hbnNpLyxcbiAgL2NvbG9yLyxcbiAgL2xpbnV4LyxcbiAgL2RpcmVjdC8sXG4gIC9eY29uWzAtOV0qeFswLTldLyxcbiAgL15yeHZ0LyxcbiAgL15zY3JlZW4vLFxuICAvXnh0ZXJtLyxcbiAgL152dDEwMC8sXG4gIC9ednQyMjAvXG5dO1xuZnVuY3Rpb24gZ2V0Q29sb3JEZXB0aCgpIHtcbiAgaWYgKGdldEVudlZhcihcIkZPUkNFX0NPTE9SXCIpICE9PSB2b2lkIDApIHtcbiAgICBzd2l0Y2ggKGdldEVudlZhcihcIkZPUkNFX0NPTE9SXCIpKSB7XG4gICAgICBjYXNlIFwiXCI6XG4gICAgICBjYXNlIFwiMVwiOlxuICAgICAgY2FzZSBcInRydWVcIjpcbiAgICAgICAgcmV0dXJuIENPTE9SU18xNjtcbiAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICAgICAgY2FzZSBcIjNcIjpcbiAgICAgICAgcmV0dXJuIENPTE9SU18xNm07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ09MT1JTXzI7XG4gICAgfVxuICB9XG4gIGlmIChnZXRFbnZWYXIoXCJOT0RFX0RJU0FCTEVfQ09MT1JTXCIpICE9PSB2b2lkIDAgJiYgZ2V0RW52VmFyKFwiTk9ERV9ESVNBQkxFX0NPTE9SU1wiKSAhPT0gXCJcIiB8fCAvLyBTZWUgaHR0cHM6Ly9uby1jb2xvci5vcmcvXG4gIGdldEVudlZhcihcIk5PX0NPTE9SXCIpICE9PSB2b2lkIDAgJiYgZ2V0RW52VmFyKFwiTk9fQ09MT1JcIikgIT09IFwiXCIgfHwgLy8gVGhlIFwiZHVtYlwiIHNwZWNpYWwgdGVybWluYWwsIGFzIGRlZmluZWQgYnkgdGVybWluZm8sIGRvZXNuJ3Qgc3VwcG9ydFxuICAvLyBBTlNJIGNvbG9yIGNvbnRyb2wgY29kZXMuXG4gIC8vIFNlZSBodHRwczovL2ludmlzaWJsZS1pc2xhbmQubmV0L25jdXJzZXMvdGVybWluZm8udGkuaHRtbCN0b2MtX1NwZWNpYWxzXG4gIGdldEVudlZhcihcIlRFUk1cIikgPT09IFwiZHVtYlwiKSB7XG4gICAgcmV0dXJuIENPTE9SU18yO1xuICB9XG4gIGlmIChnZXRFbnZWYXIoXCJUTVVYXCIpKSB7XG4gICAgcmV0dXJuIENPTE9SU18xNm07XG4gIH1cbiAgaWYgKFwiVEZfQlVJTERcIiBpbiBlbnYgJiYgXCJBR0VOVF9OQU1FXCIgaW4gZW52KSB7XG4gICAgcmV0dXJuIENPTE9SU18xNjtcbiAgfVxuICBpZiAoXCJDSVwiIGluIGVudikge1xuICAgIGZvciAoY29uc3QgeyAwOiBlbnZOYW1lLCAxOiBjb2xvcnMgfSBvZiBDSV9FTlZTX01BUCkge1xuICAgICAgaWYgKGVudk5hbWUgaW4gZW52KSB7XG4gICAgICAgIHJldHVybiBjb2xvcnM7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChnZXRFbnZWYXIoXCJDSV9OQU1FXCIpID09PSBcImNvZGVzaGlwXCIpIHtcbiAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICAgIH1cbiAgICByZXR1cm4gQ09MT1JTXzI7XG4gIH1cbiAgaWYgKFwiVEVBTUNJVFlfVkVSU0lPTlwiIGluIGVudikge1xuICAgIHJldHVybiAvXig5XFwuKDAqWzEtOV1cXGQqKVxcLnxcXGR7Mix9XFwuKS8uZXhlYyhcbiAgICAgIGdldEVudlZhcihcIlRFQU1DSVRZX1ZFUlNJT05cIilcbiAgICApICE9PSBudWxsID8gQ09MT1JTXzE2IDogQ09MT1JTXzI7XG4gIH1cbiAgc3dpdGNoIChnZXRFbnZWYXIoXCJURVJNX1BST0dSQU1cIikpIHtcbiAgICBjYXNlIFwiaVRlcm0uYXBwXCI6XG4gICAgICBpZiAoIWdldEVudlZhcihcIlRFUk1fUFJPR1JBTV9WRVJTSU9OXCIpIHx8IC9eWzAtMl1cXC4vLmV4ZWMoZ2V0RW52VmFyKFwiVEVSTV9QUk9HUkFNX1ZFUlNJT05cIikpICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICAgICAgfVxuICAgICAgcmV0dXJuIENPTE9SU18xNm07XG4gICAgY2FzZSBcIkh5cGVyVGVybVwiOlxuICAgIGNhc2UgXCJNYWNUZXJtXCI6XG4gICAgICByZXR1cm4gQ09MT1JTXzE2bTtcbiAgICBjYXNlIFwiQXBwbGVfVGVybWluYWxcIjpcbiAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICB9XG4gIGlmIChnZXRFbnZWYXIoXCJDT0xPUlRFUk1cIikgPT09IFwidHJ1ZWNvbG9yXCIgfHwgZ2V0RW52VmFyKFwiQ09MT1JURVJNXCIpID09PSBcIjI0Yml0XCIpIHtcbiAgICByZXR1cm4gQ09MT1JTXzE2bTtcbiAgfVxuICBpZiAoZ2V0RW52VmFyKFwiVEVSTVwiKSkge1xuICAgIGlmICgvdHJ1ZWNvbG9yLy5leGVjKGdldEVudlZhcihcIlRFUk1cIikpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gQ09MT1JTXzE2bTtcbiAgICB9XG4gICAgaWYgKC9eeHRlcm0tMjU2Ly5leGVjKGdldEVudlZhcihcIlRFUk1cIikpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gQ09MT1JTXzI1NjtcbiAgICB9XG4gICAgY29uc3QgdGVybUVudiA9IGdldEVudlZhcihcIlRFUk1cIikudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoVEVSTV9FTlZTW3Rlcm1FbnZdKSB7XG4gICAgICByZXR1cm4gVEVSTV9FTlZTW3Rlcm1FbnZdO1xuICAgIH1cbiAgICBpZiAoVEVSTV9FTlZTX1JFR19FWFAuc29tZSgodGVybSkgPT4gdGVybS5leGVjKHRlcm1FbnYpICE9PSBudWxsKSkge1xuICAgICAgcmV0dXJuIENPTE9SU18xNjtcbiAgICB9XG4gIH1cbiAgaWYgKGdldEVudlZhcihcIkNPTE9SVEVSTVwiKSkge1xuICAgIHJldHVybiBDT0xPUlNfMTY7XG4gIH1cbiAgcmV0dXJuIENPTE9SU18yO1xufVxuXG5jb25zdCBUVFlfQ09MT1JTID0ge1xuICByZXNldDogXCJcXHgxQlswbVwiLFxuICBicmlnaHQ6IFwiXFx4MUJbMW1cIixcbiAgZGltOiBcIlxceDFCWzJtXCIsXG4gIHVuZGltOiBcIlxceDFCWzIybVwiLFxuICB1bmRlcnNjb3JlOiBcIlxceDFCWzRtXCIsXG4gIGJsaW5rOiBcIlxceDFCWzVtXCIsXG4gIHJldmVyc2U6IFwiXFx4MUJbN21cIixcbiAgaGlkZGVuOiBcIlxceDFCWzhtXCIsXG4gIGZnOiB7XG4gICAgYmxhY2s6IFwiXFx4MUJbMzBtXCIsXG4gICAgcmVkOiBcIlxceDFCWzMxbVwiLFxuICAgIGdyZWVuOiBcIlxceDFCWzMybVwiLFxuICAgIHllbGxvdzogXCJcXHgxQlszM21cIixcbiAgICBibHVlOiBcIlxceDFCWzM0bVwiLFxuICAgIG1hZ2VudGE6IFwiXFx4MUJbMzVtXCIsXG4gICAgY3lhbjogXCJcXHgxQlszNm1cIixcbiAgICB3aGl0ZTogXCJcXHgxQlszN21cIlxuICB9LFxuICBiZzoge1xuICAgIGJsYWNrOiBcIlxceDFCWzQwbVwiLFxuICAgIHJlZDogXCJcXHgxQls0MW1cIixcbiAgICBncmVlbjogXCJcXHgxQls0Mm1cIixcbiAgICB5ZWxsb3c6IFwiXFx4MUJbNDNtXCIsXG4gICAgYmx1ZTogXCJcXHgxQls0NG1cIixcbiAgICBtYWdlbnRhOiBcIlxceDFCWzQ1bVwiLFxuICAgIGN5YW46IFwiXFx4MUJbNDZtXCIsXG4gICAgd2hpdGU6IFwiXFx4MUJbNDdtXCJcbiAgfVxufTtcbmNvbnN0IGxldmVscyA9IFtcImluZm9cIiwgXCJzdWNjZXNzXCIsIFwid2FyblwiLCBcImVycm9yXCIsIFwiZGVidWdcIl07XG5mdW5jdGlvbiBzaG91bGRQdWJsaXNoTG9nKGN1cnJlbnRMb2dMZXZlbCwgbG9nTGV2ZWwpIHtcbiAgcmV0dXJuIGxldmVscy5pbmRleE9mKGxvZ0xldmVsKSA8PSBsZXZlbHMuaW5kZXhPZihjdXJyZW50TG9nTGV2ZWwpO1xufVxuY29uc3QgbGV2ZWxDb2xvcnMgPSB7XG4gIGluZm86IFRUWV9DT0xPUlMuZmcuYmx1ZSxcbiAgc3VjY2VzczogVFRZX0NPTE9SUy5mZy5ncmVlbixcbiAgd2FybjogVFRZX0NPTE9SUy5mZy55ZWxsb3csXG4gIGVycm9yOiBUVFlfQ09MT1JTLmZnLnJlZCxcbiAgZGVidWc6IFRUWV9DT0xPUlMuZmcubWFnZW50YVxufTtcbmNvbnN0IGZvcm1hdE1lc3NhZ2UgPSAobGV2ZWwsIG1lc3NhZ2UsIGNvbG9yc0VuYWJsZWQpID0+IHtcbiAgY29uc3QgdGltZXN0YW1wID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpO1xuICBpZiAoY29sb3JzRW5hYmxlZCkge1xuICAgIHJldHVybiBgJHtUVFlfQ09MT1JTLmRpbX0ke3RpbWVzdGFtcH0ke1RUWV9DT0xPUlMucmVzZXR9ICR7bGV2ZWxDb2xvcnNbbGV2ZWxdfSR7bGV2ZWwudG9VcHBlckNhc2UoKX0ke1RUWV9DT0xPUlMucmVzZXR9ICR7VFRZX0NPTE9SUy5icmlnaHR9W0JldHRlciBBdXRoXToke1RUWV9DT0xPUlMucmVzZXR9ICR7bWVzc2FnZX1gO1xuICB9XG4gIHJldHVybiBgJHt0aW1lc3RhbXB9ICR7bGV2ZWwudG9VcHBlckNhc2UoKX0gW0JldHRlciBBdXRoXTogJHttZXNzYWdlfWA7XG59O1xuY29uc3QgY3JlYXRlTG9nZ2VyID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgZW5hYmxlZCA9IG9wdGlvbnM/LmRpc2FibGVkICE9PSB0cnVlO1xuICBjb25zdCBsb2dMZXZlbCA9IG9wdGlvbnM/LmxldmVsID8/IFwiZXJyb3JcIjtcbiAgY29uc3QgaXNEaXNhYmxlQ29sb3JzU3BlY2lmaWVkID0gb3B0aW9ucz8uZGlzYWJsZUNvbG9ycyAhPT0gdm9pZCAwO1xuICBjb25zdCBjb2xvcnNFbmFibGVkID0gaXNEaXNhYmxlQ29sb3JzU3BlY2lmaWVkID8gIW9wdGlvbnMuZGlzYWJsZUNvbG9ycyA6IGdldENvbG9yRGVwdGgoKSAhPT0gMTtcbiAgY29uc3QgTG9nRnVuYyA9IChsZXZlbCwgbWVzc2FnZSwgYXJncyA9IFtdKSA9PiB7XG4gICAgaWYgKCFlbmFibGVkIHx8ICFzaG91bGRQdWJsaXNoTG9nKGxvZ0xldmVsLCBsZXZlbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2UobGV2ZWwsIG1lc3NhZ2UsIGNvbG9yc0VuYWJsZWQpO1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucy5sb2cgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKGxldmVsID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT09IFwid2FyblwiKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZE1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcHRpb25zLmxvZyhsZXZlbCA9PT0gXCJzdWNjZXNzXCIgPyBcImluZm9cIiA6IGxldmVsLCBtZXNzYWdlLCAuLi5hcmdzKTtcbiAgfTtcbiAgY29uc3QgbG9nZ2VyMiA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBsZXZlbHMubWFwKChsZXZlbCkgPT4gW1xuICAgICAgbGV2ZWwsXG4gICAgICAoLi4uW21lc3NhZ2UsIC4uLmFyZ3NdKSA9PiBMb2dGdW5jKGxldmVsLCBtZXNzYWdlLCBhcmdzKVxuICAgIF0pXG4gICk7XG4gIHJldHVybiB7XG4gICAgLi4ubG9nZ2VyMixcbiAgICBnZXQgbGV2ZWwoKSB7XG4gICAgICByZXR1cm4gbG9nTGV2ZWw7XG4gICAgfVxuICB9O1xufTtcbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcigpO1xuXG5leHBvcnQgeyBFTlYsIFRUWV9DT0xPUlMsIGNyZWF0ZUxvZ2dlciwgZW52LCBnZXRCb29sZWFuRW52VmFyLCBnZXRDb2xvckRlcHRoLCBnZXRFbnZWYXIsIGlzRGV2ZWxvcG1lbnQsIGlzUHJvZHVjdGlvbiwgaXNUZXN0LCBsZXZlbHMsIGxvZ2dlciwgbm9kZUVOViwgc2hvdWxkUHVibGlzaExvZyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@better-auth/core/dist/env/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@better-auth/core/dist/error/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/error/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BASE_ERROR_CODES: () => (/* binding */ BASE_ERROR_CODES),\n/* harmony export */   BetterAuthError: () => (/* binding */ BetterAuthError)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(ssr)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\nconst BASE_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n  USER_NOT_FOUND: \"User not found\",\n  FAILED_TO_CREATE_USER: \"Failed to create user\",\n  FAILED_TO_CREATE_SESSION: \"Failed to create session\",\n  FAILED_TO_UPDATE_USER: \"Failed to update user\",\n  FAILED_TO_GET_SESSION: \"Failed to get session\",\n  INVALID_PASSWORD: \"Invalid password\",\n  INVALID_EMAIL: \"Invalid email\",\n  INVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n  SOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n  PROVIDER_NOT_FOUND: \"Provider not found\",\n  INVALID_TOKEN: \"Invalid token\",\n  ID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n  FAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n  USER_EMAIL_NOT_FOUND: \"User email not found\",\n  EMAIL_NOT_VERIFIED: \"Email not verified\",\n  PASSWORD_TOO_SHORT: \"Password too short\",\n  PASSWORD_TOO_LONG: \"Password too long\",\n  USER_ALREADY_EXISTS: \"User already exists.\",\n  USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n  EMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n  CREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n  SESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n  FAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n  ACCOUNT_NOT_FOUND: \"Account not found\",\n  USER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\"\n});\n\nclass BetterAuthError extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"BetterAuthError\";\n    this.message = message;\n    this.cause = cause;\n    this.stack = \"\";\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9lcnJvci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEOztBQUUzRCx5QkFBeUIseUVBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC9jb3JlL2Rpc3QvZXJyb3IvaW5kZXgubWpzPzM1NGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gJ0BiZXR0ZXItYXV0aC9jb3JlL3V0aWxzJztcblxuY29uc3QgQkFTRV9FUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoe1xuICBVU0VSX05PVF9GT1VORDogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICBGQUlMRURfVE9fQ1JFQVRFX1VTRVI6IFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCIsXG4gIEZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTjogXCJGYWlsZWQgdG8gY3JlYXRlIHNlc3Npb25cIixcbiAgRkFJTEVEX1RPX1VQREFURV9VU0VSOiBcIkZhaWxlZCB0byB1cGRhdGUgdXNlclwiLFxuICBGQUlMRURfVE9fR0VUX1NFU1NJT046IFwiRmFpbGVkIHRvIGdldCBzZXNzaW9uXCIsXG4gIElOVkFMSURfUEFTU1dPUkQ6IFwiSW52YWxpZCBwYXNzd29yZFwiLFxuICBJTlZBTElEX0VNQUlMOiBcIkludmFsaWQgZW1haWxcIixcbiAgSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRDogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIsXG4gIFNPQ0lBTF9BQ0NPVU5UX0FMUkVBRFlfTElOS0VEOiBcIlNvY2lhbCBhY2NvdW50IGFscmVhZHkgbGlua2VkXCIsXG4gIFBST1ZJREVSX05PVF9GT1VORDogXCJQcm92aWRlciBub3QgZm91bmRcIixcbiAgSU5WQUxJRF9UT0tFTjogXCJJbnZhbGlkIHRva2VuXCIsXG4gIElEX1RPS0VOX05PVF9TVVBQT1JURUQ6IFwiaWRfdG9rZW4gbm90IHN1cHBvcnRlZFwiLFxuICBGQUlMRURfVE9fR0VUX1VTRVJfSU5GTzogXCJGYWlsZWQgdG8gZ2V0IHVzZXIgaW5mb1wiLFxuICBVU0VSX0VNQUlMX05PVF9GT1VORDogXCJVc2VyIGVtYWlsIG5vdCBmb3VuZFwiLFxuICBFTUFJTF9OT1RfVkVSSUZJRUQ6IFwiRW1haWwgbm90IHZlcmlmaWVkXCIsXG4gIFBBU1NXT1JEX1RPT19TSE9SVDogXCJQYXNzd29yZCB0b28gc2hvcnRcIixcbiAgUEFTU1dPUkRfVE9PX0xPTkc6IFwiUGFzc3dvcmQgdG9vIGxvbmdcIixcbiAgVVNFUl9BTFJFQURZX0VYSVNUUzogXCJVc2VyIGFscmVhZHkgZXhpc3RzLlwiLFxuICBVU0VSX0FMUkVBRFlfRVhJU1RTX1VTRV9BTk9USEVSX0VNQUlMOiBcIlVzZXIgYWxyZWFkeSBleGlzdHMuIFVzZSBhbm90aGVyIGVtYWlsLlwiLFxuICBFTUFJTF9DQU5fTk9UX0JFX1VQREFURUQ6IFwiRW1haWwgY2FuIG5vdCBiZSB1cGRhdGVkXCIsXG4gIENSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkQ6IFwiQ3JlZGVudGlhbCBhY2NvdW50IG5vdCBmb3VuZFwiLFxuICBTRVNTSU9OX0VYUElSRUQ6IFwiU2Vzc2lvbiBleHBpcmVkLiBSZS1hdXRoZW50aWNhdGUgdG8gcGVyZm9ybSB0aGlzIGFjdGlvbi5cIixcbiAgRkFJTEVEX1RPX1VOTElOS19MQVNUX0FDQ09VTlQ6IFwiWW91IGNhbid0IHVubGluayB5b3VyIGxhc3QgYWNjb3VudFwiLFxuICBBQ0NPVU5UX05PVF9GT1VORDogXCJBY2NvdW50IG5vdCBmb3VuZFwiLFxuICBVU0VSX0FMUkVBRFlfSEFTX1BBU1NXT1JEOiBcIlVzZXIgYWxyZWFkeSBoYXMgYSBwYXNzd29yZC4gUHJvdmlkZSB0aGF0IHRvIGRlbGV0ZSB0aGUgYWNjb3VudC5cIlxufSk7XG5cbmNsYXNzIEJldHRlckF1dGhFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgY2F1c2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIkJldHRlckF1dGhFcnJvclwiO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIHRoaXMuc3RhY2sgPSBcIlwiO1xuICB9XG59XG5cbmV4cG9ydCB7IEJBU0VfRVJST1JfQ09ERVMsIEJldHRlckF1dGhFcnJvciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@better-auth/core/dist/error/index.mjs\n");

/***/ }),

/***/ "(ssr)/./node_modules/@better-auth/core/dist/utils/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/utils/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineErrorCodes: () => (/* binding */ defineErrorCodes)\n/* harmony export */ });\nfunction defineErrorCodes(codes) {\n  return codes;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC91dGlscy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC91dGlscy9pbmRleC5tanM/NTM2YyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkZWZpbmVFcnJvckNvZGVzKGNvZGVzKSB7XG4gIHJldHVybiBjb2Rlcztcbn1cblxuZXhwb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@better-auth/core/dist/utils/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/db/adapter/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/db/adapter/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs":
/*!**********************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/db/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   accountSchema: () => (/* binding */ accountSchema),\n/* harmony export */   coreSchema: () => (/* binding */ coreSchema),\n/* harmony export */   rateLimitSchema: () => (/* binding */ rateLimitSchema),\n/* harmony export */   sessionSchema: () => (/* binding */ sessionSchema),\n/* harmony export */   userSchema: () => (/* binding */ userSchema),\n/* harmony export */   verificationSchema: () => (/* binding */ verificationSchema)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n\n\nconst coreSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  id: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  createdAt: zod__WEBPACK_IMPORTED_MODULE_0__.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: zod__WEBPACK_IMPORTED_MODULE_0__.date().default(() => /* @__PURE__ */ new Date())\n});\n\nconst userSchema = coreSchema.extend({\n  email: zod__WEBPACK_IMPORTED_MODULE_0__.string().transform((val) => val.toLowerCase()),\n  emailVerified: zod__WEBPACK_IMPORTED_MODULE_0__.boolean().default(false),\n  name: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  image: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\nconst accountSchema = coreSchema.extend({\n  providerId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  accountId: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  userId: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.string(),\n  accessToken: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  refreshToken: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  idToken: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  /**\n   * Access token expires at\n   */\n  accessTokenExpiresAt: zod__WEBPACK_IMPORTED_MODULE_0__.date().nullish(),\n  /**\n   * Refresh token expires at\n   */\n  refreshTokenExpiresAt: zod__WEBPACK_IMPORTED_MODULE_0__.date().nullish(),\n  /**\n   * The scopes that the user has authorized\n   */\n  scope: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  /**\n   * Password is only stored in the credential provider\n   */\n  password: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\nconst sessionSchema = coreSchema.extend({\n  userId: zod__WEBPACK_IMPORTED_MODULE_0__.coerce.string(),\n  expiresAt: zod__WEBPACK_IMPORTED_MODULE_0__.date(),\n  token: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  ipAddress: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish(),\n  userAgent: zod__WEBPACK_IMPORTED_MODULE_0__.string().nullish()\n});\n\nconst verificationSchema = coreSchema.extend({\n  value: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  expiresAt: zod__WEBPACK_IMPORTED_MODULE_0__.date(),\n  identifier: zod__WEBPACK_IMPORTED_MODULE_0__.string()\n});\n\nconst rateLimitSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n  /**\n   * The key to use for rate limiting\n   */\n  key: zod__WEBPACK_IMPORTED_MODULE_0__.string(),\n  /**\n   * The number of requests made\n   */\n  count: zod__WEBPACK_IMPORTED_MODULE_0__.number(),\n  /**\n   * The last request time in milliseconds\n   */\n  lastRequest: zod__WEBPACK_IMPORTED_MODULE_0__.number()\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9kYi9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUF5Qjs7QUFFekIsbUJBQW1CLHVDQUFRO0FBQzNCLE1BQU0sdUNBQVE7QUFDZCxhQUFhLHFDQUFNO0FBQ25CLGFBQWEscUNBQU07QUFDbkIsQ0FBQzs7QUFFRDtBQUNBLFNBQVMsdUNBQVE7QUFDakIsaUJBQWlCLHdDQUFTO0FBQzFCLFFBQVEsdUNBQVE7QUFDaEIsU0FBUyx1Q0FBUTtBQUNqQixDQUFDOztBQUVEO0FBQ0EsY0FBYyx1Q0FBUTtBQUN0QixhQUFhLHVDQUFRO0FBQ3JCLFVBQVUsOENBQWU7QUFDekIsZUFBZSx1Q0FBUTtBQUN2QixnQkFBZ0IsdUNBQVE7QUFDeEIsV0FBVyx1Q0FBUTtBQUNuQjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IscUNBQU07QUFDOUI7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFDQUFNO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLFNBQVMsdUNBQVE7QUFDakI7QUFDQTtBQUNBO0FBQ0EsWUFBWSx1Q0FBUTtBQUNwQixDQUFDOztBQUVEO0FBQ0EsVUFBVSw4Q0FBZTtBQUN6QixhQUFhLHFDQUFNO0FBQ25CLFNBQVMsdUNBQVE7QUFDakIsYUFBYSx1Q0FBUTtBQUNyQixhQUFhLHVDQUFRO0FBQ3JCLENBQUM7O0FBRUQ7QUFDQSxTQUFTLHVDQUFRO0FBQ2pCLGFBQWEscUNBQU07QUFDbkIsY0FBYyx1Q0FBUTtBQUN0QixDQUFDOztBQUVELHdCQUF3Qix1Q0FBUTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxPQUFPLHVDQUFRO0FBQ2Y7QUFDQTtBQUNBO0FBQ0EsU0FBUyx1Q0FBUTtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxlQUFlLHVDQUFRO0FBQ3ZCLENBQUM7O0FBRW9HIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC9jb3JlL2Rpc3QvZGIvaW5kZXgubWpzP2E4ZDAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgeiBmcm9tICd6b2QnO1xuXG5jb25zdCBjb3JlU2NoZW1hID0gei5vYmplY3Qoe1xuICBpZDogei5zdHJpbmcoKSxcbiAgY3JlYXRlZEF0OiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKSxcbiAgdXBkYXRlZEF0OiB6LmRhdGUoKS5kZWZhdWx0KCgpID0+IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKVxufSk7XG5cbmNvbnN0IHVzZXJTY2hlbWEgPSBjb3JlU2NoZW1hLmV4dGVuZCh7XG4gIGVtYWlsOiB6LnN0cmluZygpLnRyYW5zZm9ybSgodmFsKSA9PiB2YWwudG9Mb3dlckNhc2UoKSksXG4gIGVtYWlsVmVyaWZpZWQ6IHouYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpLFxuICBuYW1lOiB6LnN0cmluZygpLFxuICBpbWFnZTogei5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuXG5jb25zdCBhY2NvdW50U2NoZW1hID0gY29yZVNjaGVtYS5leHRlbmQoe1xuICBwcm92aWRlcklkOiB6LnN0cmluZygpLFxuICBhY2NvdW50SWQ6IHouc3RyaW5nKCksXG4gIHVzZXJJZDogei5jb2VyY2Uuc3RyaW5nKCksXG4gIGFjY2Vzc1Rva2VuOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgcmVmcmVzaFRva2VuOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgaWRUb2tlbjogei5zdHJpbmcoKS5udWxsaXNoKCksXG4gIC8qKlxuICAgKiBBY2Nlc3MgdG9rZW4gZXhwaXJlcyBhdFxuICAgKi9cbiAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IHouZGF0ZSgpLm51bGxpc2goKSxcbiAgLyoqXG4gICAqIFJlZnJlc2ggdG9rZW4gZXhwaXJlcyBhdFxuICAgKi9cbiAgcmVmcmVzaFRva2VuRXhwaXJlc0F0OiB6LmRhdGUoKS5udWxsaXNoKCksXG4gIC8qKlxuICAgKiBUaGUgc2NvcGVzIHRoYXQgdGhlIHVzZXIgaGFzIGF1dGhvcml6ZWRcbiAgICovXG4gIHNjb3BlOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgLyoqXG4gICAqIFBhc3N3b3JkIGlzIG9ubHkgc3RvcmVkIGluIHRoZSBjcmVkZW50aWFsIHByb3ZpZGVyXG4gICAqL1xuICBwYXNzd29yZDogei5zdHJpbmcoKS5udWxsaXNoKClcbn0pO1xuXG5jb25zdCBzZXNzaW9uU2NoZW1hID0gY29yZVNjaGVtYS5leHRlbmQoe1xuICB1c2VySWQ6IHouY29lcmNlLnN0cmluZygpLFxuICBleHBpcmVzQXQ6IHouZGF0ZSgpLFxuICB0b2tlbjogei5zdHJpbmcoKSxcbiAgaXBBZGRyZXNzOiB6LnN0cmluZygpLm51bGxpc2goKSxcbiAgdXNlckFnZW50OiB6LnN0cmluZygpLm51bGxpc2goKVxufSk7XG5cbmNvbnN0IHZlcmlmaWNhdGlvblNjaGVtYSA9IGNvcmVTY2hlbWEuZXh0ZW5kKHtcbiAgdmFsdWU6IHouc3RyaW5nKCksXG4gIGV4cGlyZXNBdDogei5kYXRlKCksXG4gIGlkZW50aWZpZXI6IHouc3RyaW5nKClcbn0pO1xuXG5jb25zdCByYXRlTGltaXRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIC8qKlxuICAgKiBUaGUga2V5IHRvIHVzZSBmb3IgcmF0ZSBsaW1pdGluZ1xuICAgKi9cbiAga2V5OiB6LnN0cmluZygpLFxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiByZXF1ZXN0cyBtYWRlXG4gICAqL1xuICBjb3VudDogei5udW1iZXIoKSxcbiAgLyoqXG4gICAqIFRoZSBsYXN0IHJlcXVlc3QgdGltZSBpbiBtaWxsaXNlY29uZHNcbiAgICovXG4gIGxhc3RSZXF1ZXN0OiB6Lm51bWJlcigpXG59KTtcblxuZXhwb3J0IHsgYWNjb3VudFNjaGVtYSwgY29yZVNjaGVtYSwgcmF0ZUxpbWl0U2NoZW1hLCBzZXNzaW9uU2NoZW1hLCB1c2VyU2NoZW1hLCB2ZXJpZmljYXRpb25TY2hlbWEgfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/db/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs":
/*!***********************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/env/index.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ENV: () => (/* binding */ ENV),\n/* harmony export */   TTY_COLORS: () => (/* binding */ TTY_COLORS),\n/* harmony export */   createLogger: () => (/* binding */ createLogger),\n/* harmony export */   env: () => (/* binding */ env),\n/* harmony export */   getBooleanEnvVar: () => (/* binding */ getBooleanEnvVar),\n/* harmony export */   getColorDepth: () => (/* binding */ getColorDepth),\n/* harmony export */   getEnvVar: () => (/* binding */ getEnvVar),\n/* harmony export */   isDevelopment: () => (/* binding */ isDevelopment),\n/* harmony export */   isProduction: () => (/* binding */ isProduction),\n/* harmony export */   isTest: () => (/* binding */ isTest),\n/* harmony export */   levels: () => (/* binding */ levels),\n/* harmony export */   logger: () => (/* binding */ logger),\n/* harmony export */   nodeENV: () => (/* binding */ nodeENV),\n/* harmony export */   shouldPublishLog: () => (/* binding */ shouldPublishLog)\n/* harmony export */ });\nconst _envShim = /* @__PURE__ */ Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || //@ts-expect-error\nglobalThis.Deno?.env.toObject() || //@ts-expect-error\nglobalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n  get(_, prop) {\n    const env2 = _getEnv();\n    return env2[prop] ?? _envShim[prop];\n  },\n  has(_, prop) {\n    const env2 = _getEnv();\n    return prop in env2 || prop in _envShim;\n  },\n  set(_, prop, value) {\n    const env2 = _getEnv(true);\n    env2[prop] = value;\n    return true;\n  },\n  deleteProperty(_, prop) {\n    if (!prop) {\n      return false;\n    }\n    const env2 = _getEnv(true);\n    delete env2[prop];\n    return true;\n  },\n  ownKeys() {\n    const env2 = _getEnv(true);\n    return Object.keys(env2);\n  }\n});\nfunction toBoolean(val) {\n  return val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && \"development\" || \"\";\nconst isProduction = nodeENV === \"production\";\nconst isDevelopment = () => nodeENV === \"dev\" || nodeENV === \"development\";\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\nfunction getEnvVar(key, fallback) {\n  if (typeof process !== \"undefined\" && process.env) {\n    return process.env[key] ?? fallback;\n  }\n  if (typeof Deno !== \"undefined\") {\n    return Deno.env.get(key) ?? fallback;\n  }\n  if (typeof Bun !== \"undefined\") {\n    return Bun.env[key] ?? fallback;\n  }\n  return fallback;\n}\nfunction getBooleanEnvVar(key, fallback = true) {\n  const value = getEnvVar(key);\n  if (!value) return fallback;\n  return value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\nconst ENV = Object.freeze({\n  get BETTER_AUTH_SECRET() {\n    return getEnvVar(\"BETTER_AUTH_SECRET\");\n  },\n  get AUTH_SECRET() {\n    return getEnvVar(\"AUTH_SECRET\");\n  },\n  get BETTER_AUTH_TELEMETRY() {\n    return getEnvVar(\"BETTER_AUTH_TELEMETRY\");\n  },\n  get BETTER_AUTH_TELEMETRY_ID() {\n    return getEnvVar(\"BETTER_AUTH_TELEMETRY_ID\");\n  },\n  get NODE_ENV() {\n    return getEnvVar(\"NODE_ENV\", \"development\");\n  },\n  get PACKAGE_VERSION() {\n    return getEnvVar(\"PACKAGE_VERSION\", \"0.0.0\");\n  },\n  get BETTER_AUTH_TELEMETRY_ENDPOINT() {\n    return getEnvVar(\n      \"BETTER_AUTH_TELEMETRY_ENDPOINT\",\n      \"https://telemetry.better-auth.com/v1/track\"\n    );\n  }\n});\n\nconst COLORS_2 = 1;\nconst COLORS_16 = 4;\nconst COLORS_256 = 8;\nconst COLORS_16m = 24;\nconst TERM_ENVS = {\n  eterm: COLORS_16,\n  cons25: COLORS_16,\n  console: COLORS_16,\n  cygwin: COLORS_16,\n  dtterm: COLORS_16,\n  gnome: COLORS_16,\n  hurd: COLORS_16,\n  jfbterm: COLORS_16,\n  konsole: COLORS_16,\n  kterm: COLORS_16,\n  mlterm: COLORS_16,\n  mosh: COLORS_16m,\n  putty: COLORS_16,\n  st: COLORS_16,\n  // http://lists.schmorp.de/pipermail/rxvt-unicode/2016q2/002261.html\n  \"rxvt-unicode-24bit\": COLORS_16m,\n  // https://bugs.launchpad.net/terminator/+bug/1030562\n  terminator: COLORS_16m,\n  \"xterm-kitty\": COLORS_16m\n};\nconst CI_ENVS_MAP = new Map(\n  Object.entries({\n    APPVEYOR: COLORS_256,\n    BUILDKITE: COLORS_256,\n    CIRCLECI: COLORS_16m,\n    DRONE: COLORS_256,\n    GITEA_ACTIONS: COLORS_16m,\n    GITHUB_ACTIONS: COLORS_16m,\n    GITLAB_CI: COLORS_256,\n    TRAVIS: COLORS_256\n  })\n);\nconst TERM_ENVS_REG_EXP = [\n  /ansi/,\n  /color/,\n  /linux/,\n  /direct/,\n  /^con[0-9]*x[0-9]/,\n  /^rxvt/,\n  /^screen/,\n  /^xterm/,\n  /^vt100/,\n  /^vt220/\n];\nfunction getColorDepth() {\n  if (getEnvVar(\"FORCE_COLOR\") !== void 0) {\n    switch (getEnvVar(\"FORCE_COLOR\")) {\n      case \"\":\n      case \"1\":\n      case \"true\":\n        return COLORS_16;\n      case \"2\":\n        return COLORS_256;\n      case \"3\":\n        return COLORS_16m;\n      default:\n        return COLORS_2;\n    }\n  }\n  if (getEnvVar(\"NODE_DISABLE_COLORS\") !== void 0 && getEnvVar(\"NODE_DISABLE_COLORS\") !== \"\" || // See https://no-color.org/\n  getEnvVar(\"NO_COLOR\") !== void 0 && getEnvVar(\"NO_COLOR\") !== \"\" || // The \"dumb\" special terminal, as defined by terminfo, doesn't support\n  // ANSI color control codes.\n  // See https://invisible-island.net/ncurses/terminfo.ti.html#toc-_Specials\n  getEnvVar(\"TERM\") === \"dumb\") {\n    return COLORS_2;\n  }\n  if (getEnvVar(\"TMUX\")) {\n    return COLORS_16m;\n  }\n  if (\"TF_BUILD\" in env && \"AGENT_NAME\" in env) {\n    return COLORS_16;\n  }\n  if (\"CI\" in env) {\n    for (const { 0: envName, 1: colors } of CI_ENVS_MAP) {\n      if (envName in env) {\n        return colors;\n      }\n    }\n    if (getEnvVar(\"CI_NAME\") === \"codeship\") {\n      return COLORS_256;\n    }\n    return COLORS_2;\n  }\n  if (\"TEAMCITY_VERSION\" in env) {\n    return /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.exec(\n      getEnvVar(\"TEAMCITY_VERSION\")\n    ) !== null ? COLORS_16 : COLORS_2;\n  }\n  switch (getEnvVar(\"TERM_PROGRAM\")) {\n    case \"iTerm.app\":\n      if (!getEnvVar(\"TERM_PROGRAM_VERSION\") || /^[0-2]\\./.exec(getEnvVar(\"TERM_PROGRAM_VERSION\")) !== null) {\n        return COLORS_256;\n      }\n      return COLORS_16m;\n    case \"HyperTerm\":\n    case \"MacTerm\":\n      return COLORS_16m;\n    case \"Apple_Terminal\":\n      return COLORS_256;\n  }\n  if (getEnvVar(\"COLORTERM\") === \"truecolor\" || getEnvVar(\"COLORTERM\") === \"24bit\") {\n    return COLORS_16m;\n  }\n  if (getEnvVar(\"TERM\")) {\n    if (/truecolor/.exec(getEnvVar(\"TERM\")) !== null) {\n      return COLORS_16m;\n    }\n    if (/^xterm-256/.exec(getEnvVar(\"TERM\")) !== null) {\n      return COLORS_256;\n    }\n    const termEnv = getEnvVar(\"TERM\").toLowerCase();\n    if (TERM_ENVS[termEnv]) {\n      return TERM_ENVS[termEnv];\n    }\n    if (TERM_ENVS_REG_EXP.some((term) => term.exec(termEnv) !== null)) {\n      return COLORS_16;\n    }\n  }\n  if (getEnvVar(\"COLORTERM\")) {\n    return COLORS_16;\n  }\n  return COLORS_2;\n}\n\nconst TTY_COLORS = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  undim: \"\\x1B[22m\",\n  underscore: \"\\x1B[4m\",\n  blink: \"\\x1B[5m\",\n  reverse: \"\\x1B[7m\",\n  hidden: \"\\x1B[8m\",\n  fg: {\n    black: \"\\x1B[30m\",\n    red: \"\\x1B[31m\",\n    green: \"\\x1B[32m\",\n    yellow: \"\\x1B[33m\",\n    blue: \"\\x1B[34m\",\n    magenta: \"\\x1B[35m\",\n    cyan: \"\\x1B[36m\",\n    white: \"\\x1B[37m\"\n  },\n  bg: {\n    black: \"\\x1B[40m\",\n    red: \"\\x1B[41m\",\n    green: \"\\x1B[42m\",\n    yellow: \"\\x1B[43m\",\n    blue: \"\\x1B[44m\",\n    magenta: \"\\x1B[45m\",\n    cyan: \"\\x1B[46m\",\n    white: \"\\x1B[47m\"\n  }\n};\nconst levels = [\"info\", \"success\", \"warn\", \"error\", \"debug\"];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n  return levels.indexOf(logLevel) <= levels.indexOf(currentLogLevel);\n}\nconst levelColors = {\n  info: TTY_COLORS.fg.blue,\n  success: TTY_COLORS.fg.green,\n  warn: TTY_COLORS.fg.yellow,\n  error: TTY_COLORS.fg.red,\n  debug: TTY_COLORS.fg.magenta\n};\nconst formatMessage = (level, message, colorsEnabled) => {\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n  if (colorsEnabled) {\n    return `${TTY_COLORS.dim}${timestamp}${TTY_COLORS.reset} ${levelColors[level]}${level.toUpperCase()}${TTY_COLORS.reset} ${TTY_COLORS.bright}[Better Auth]:${TTY_COLORS.reset} ${message}`;\n  }\n  return `${timestamp} ${level.toUpperCase()} [Better Auth]: ${message}`;\n};\nconst createLogger = (options) => {\n  const enabled = options?.disabled !== true;\n  const logLevel = options?.level ?? \"error\";\n  const isDisableColorsSpecified = options?.disableColors !== void 0;\n  const colorsEnabled = isDisableColorsSpecified ? !options.disableColors : getColorDepth() !== 1;\n  const LogFunc = (level, message, args = []) => {\n    if (!enabled || !shouldPublishLog(logLevel, level)) {\n      return;\n    }\n    const formattedMessage = formatMessage(level, message, colorsEnabled);\n    if (!options || typeof options.log !== \"function\") {\n      if (level === \"error\") {\n        console.error(formattedMessage, ...args);\n      } else if (level === \"warn\") {\n        console.warn(formattedMessage, ...args);\n      } else {\n        console.log(formattedMessage, ...args);\n      }\n      return;\n    }\n    options.log(level === \"success\" ? \"info\" : level, message, ...args);\n  };\n  const logger2 = Object.fromEntries(\n    levels.map((level) => [\n      level,\n      (...[message, ...args]) => LogFunc(level, message, args)\n    ])\n  );\n  return {\n    ...logger2,\n    get level() {\n      return logLevel;\n    }\n  };\n};\nconst logger = createLogger();\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9lbnYvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsaUVBQWlFLGFBQW9CO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsd0JBQXdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLEdBQUc7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLGVBQWUsRUFBRSxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsbUJBQW1CLEVBQUUsb0JBQW9CLEVBQUUsa0JBQWtCLEVBQUUsa0JBQWtCLGdCQUFnQixrQkFBa0IsRUFBRSxRQUFRO0FBQzVMO0FBQ0EsWUFBWSxXQUFXLEVBQUUscUJBQXFCLGlCQUFpQixRQUFRO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFMEsiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9lbnYvaW5kZXgubWpzP2ZjZWQiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgX2VudlNoaW0gPSAvKiBAX19QVVJFX18gKi8gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IF9nZXRFbnYgPSAodXNlU2hpbSkgPT4gZ2xvYmFsVGhpcy5wcm9jZXNzPy5lbnYgfHwgLy9AdHMtZXhwZWN0LWVycm9yXG5nbG9iYWxUaGlzLkRlbm8/LmVudi50b09iamVjdCgpIHx8IC8vQHRzLWV4cGVjdC1lcnJvclxuZ2xvYmFsVGhpcy5fX2Vudl9fIHx8ICh1c2VTaGltID8gX2VudlNoaW0gOiBnbG9iYWxUaGlzKTtcbmNvbnN0IGVudiA9IG5ldyBQcm94eShfZW52U2hpbSwge1xuICBnZXQoXywgcHJvcCkge1xuICAgIGNvbnN0IGVudjIgPSBfZ2V0RW52KCk7XG4gICAgcmV0dXJuIGVudjJbcHJvcF0gPz8gX2VudlNoaW1bcHJvcF07XG4gIH0sXG4gIGhhcyhfLCBwcm9wKSB7XG4gICAgY29uc3QgZW52MiA9IF9nZXRFbnYoKTtcbiAgICByZXR1cm4gcHJvcCBpbiBlbnYyIHx8IHByb3AgaW4gX2VudlNoaW07XG4gIH0sXG4gIHNldChfLCBwcm9wLCB2YWx1ZSkge1xuICAgIGNvbnN0IGVudjIgPSBfZ2V0RW52KHRydWUpO1xuICAgIGVudjJbcHJvcF0gPSB2YWx1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgZGVsZXRlUHJvcGVydHkoXywgcHJvcCkge1xuICAgIGlmICghcHJvcCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCBlbnYyID0gX2dldEVudih0cnVlKTtcbiAgICBkZWxldGUgZW52Mltwcm9wXTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSxcbiAgb3duS2V5cygpIHtcbiAgICBjb25zdCBlbnYyID0gX2dldEVudih0cnVlKTtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZW52Mik7XG4gIH1cbn0pO1xuZnVuY3Rpb24gdG9Cb29sZWFuKHZhbCkge1xuICByZXR1cm4gdmFsID8gdmFsICE9PSBcImZhbHNlXCIgOiBmYWxzZTtcbn1cbmNvbnN0IG5vZGVFTlYgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5OT0RFX0VOViB8fCBcIlwiO1xuY29uc3QgaXNQcm9kdWN0aW9uID0gbm9kZUVOViA9PT0gXCJwcm9kdWN0aW9uXCI7XG5jb25zdCBpc0RldmVsb3BtZW50ID0gKCkgPT4gbm9kZUVOViA9PT0gXCJkZXZcIiB8fCBub2RlRU5WID09PSBcImRldmVsb3BtZW50XCI7XG5jb25zdCBpc1Rlc3QgPSAoKSA9PiBub2RlRU5WID09PSBcInRlc3RcIiB8fCB0b0Jvb2xlYW4oZW52LlRFU1QpO1xuZnVuY3Rpb24gZ2V0RW52VmFyKGtleSwgZmFsbGJhY2spIHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52KSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52W2tleV0gPz8gZmFsbGJhY2s7XG4gIH1cbiAgaWYgKHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIERlbm8uZW52LmdldChrZXkpID8/IGZhbGxiYWNrO1xuICB9XG4gIGlmICh0eXBlb2YgQnVuICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIEJ1bi5lbnZba2V5XSA/PyBmYWxsYmFjaztcbiAgfVxuICByZXR1cm4gZmFsbGJhY2s7XG59XG5mdW5jdGlvbiBnZXRCb29sZWFuRW52VmFyKGtleSwgZmFsbGJhY2sgPSB0cnVlKSB7XG4gIGNvbnN0IHZhbHVlID0gZ2V0RW52VmFyKGtleSk7XG4gIGlmICghdmFsdWUpIHJldHVybiBmYWxsYmFjaztcbiAgcmV0dXJuIHZhbHVlICE9PSBcIjBcIiAmJiB2YWx1ZS50b0xvd2VyQ2FzZSgpICE9PSBcImZhbHNlXCIgJiYgdmFsdWUgIT09IFwiXCI7XG59XG5jb25zdCBFTlYgPSBPYmplY3QuZnJlZXplKHtcbiAgZ2V0IEJFVFRFUl9BVVRIX1NFQ1JFVCgpIHtcbiAgICByZXR1cm4gZ2V0RW52VmFyKFwiQkVUVEVSX0FVVEhfU0VDUkVUXCIpO1xuICB9LFxuICBnZXQgQVVUSF9TRUNSRVQoKSB7XG4gICAgcmV0dXJuIGdldEVudlZhcihcIkFVVEhfU0VDUkVUXCIpO1xuICB9LFxuICBnZXQgQkVUVEVSX0FVVEhfVEVMRU1FVFJZKCkge1xuICAgIHJldHVybiBnZXRFbnZWYXIoXCJCRVRURVJfQVVUSF9URUxFTUVUUllcIik7XG4gIH0sXG4gIGdldCBCRVRURVJfQVVUSF9URUxFTUVUUllfSUQoKSB7XG4gICAgcmV0dXJuIGdldEVudlZhcihcIkJFVFRFUl9BVVRIX1RFTEVNRVRSWV9JRFwiKTtcbiAgfSxcbiAgZ2V0IE5PREVfRU5WKCkge1xuICAgIHJldHVybiBnZXRFbnZWYXIoXCJOT0RFX0VOVlwiLCBcImRldmVsb3BtZW50XCIpO1xuICB9LFxuICBnZXQgUEFDS0FHRV9WRVJTSU9OKCkge1xuICAgIHJldHVybiBnZXRFbnZWYXIoXCJQQUNLQUdFX1ZFUlNJT05cIiwgXCIwLjAuMFwiKTtcbiAgfSxcbiAgZ2V0IEJFVFRFUl9BVVRIX1RFTEVNRVRSWV9FTkRQT0lOVCgpIHtcbiAgICByZXR1cm4gZ2V0RW52VmFyKFxuICAgICAgXCJCRVRURVJfQVVUSF9URUxFTUVUUllfRU5EUE9JTlRcIixcbiAgICAgIFwiaHR0cHM6Ly90ZWxlbWV0cnkuYmV0dGVyLWF1dGguY29tL3YxL3RyYWNrXCJcbiAgICApO1xuICB9XG59KTtcblxuY29uc3QgQ09MT1JTXzIgPSAxO1xuY29uc3QgQ09MT1JTXzE2ID0gNDtcbmNvbnN0IENPTE9SU18yNTYgPSA4O1xuY29uc3QgQ09MT1JTXzE2bSA9IDI0O1xuY29uc3QgVEVSTV9FTlZTID0ge1xuICBldGVybTogQ09MT1JTXzE2LFxuICBjb25zMjU6IENPTE9SU18xNixcbiAgY29uc29sZTogQ09MT1JTXzE2LFxuICBjeWd3aW46IENPTE9SU18xNixcbiAgZHR0ZXJtOiBDT0xPUlNfMTYsXG4gIGdub21lOiBDT0xPUlNfMTYsXG4gIGh1cmQ6IENPTE9SU18xNixcbiAgamZidGVybTogQ09MT1JTXzE2LFxuICBrb25zb2xlOiBDT0xPUlNfMTYsXG4gIGt0ZXJtOiBDT0xPUlNfMTYsXG4gIG1sdGVybTogQ09MT1JTXzE2LFxuICBtb3NoOiBDT0xPUlNfMTZtLFxuICBwdXR0eTogQ09MT1JTXzE2LFxuICBzdDogQ09MT1JTXzE2LFxuICAvLyBodHRwOi8vbGlzdHMuc2NobW9ycC5kZS9waXBlcm1haWwvcnh2dC11bmljb2RlLzIwMTZxMi8wMDIyNjEuaHRtbFxuICBcInJ4dnQtdW5pY29kZS0yNGJpdFwiOiBDT0xPUlNfMTZtLFxuICAvLyBodHRwczovL2J1Z3MubGF1bmNocGFkLm5ldC90ZXJtaW5hdG9yLytidWcvMTAzMDU2MlxuICB0ZXJtaW5hdG9yOiBDT0xPUlNfMTZtLFxuICBcInh0ZXJtLWtpdHR5XCI6IENPTE9SU18xNm1cbn07XG5jb25zdCBDSV9FTlZTX01BUCA9IG5ldyBNYXAoXG4gIE9iamVjdC5lbnRyaWVzKHtcbiAgICBBUFBWRVlPUjogQ09MT1JTXzI1NixcbiAgICBCVUlMREtJVEU6IENPTE9SU18yNTYsXG4gICAgQ0lSQ0xFQ0k6IENPTE9SU18xNm0sXG4gICAgRFJPTkU6IENPTE9SU18yNTYsXG4gICAgR0lURUFfQUNUSU9OUzogQ09MT1JTXzE2bSxcbiAgICBHSVRIVUJfQUNUSU9OUzogQ09MT1JTXzE2bSxcbiAgICBHSVRMQUJfQ0k6IENPTE9SU18yNTYsXG4gICAgVFJBVklTOiBDT0xPUlNfMjU2XG4gIH0pXG4pO1xuY29uc3QgVEVSTV9FTlZTX1JFR19FWFAgPSBbXG4gIC9hbnNpLyxcbiAgL2NvbG9yLyxcbiAgL2xpbnV4LyxcbiAgL2RpcmVjdC8sXG4gIC9eY29uWzAtOV0qeFswLTldLyxcbiAgL15yeHZ0LyxcbiAgL15zY3JlZW4vLFxuICAvXnh0ZXJtLyxcbiAgL152dDEwMC8sXG4gIC9ednQyMjAvXG5dO1xuZnVuY3Rpb24gZ2V0Q29sb3JEZXB0aCgpIHtcbiAgaWYgKGdldEVudlZhcihcIkZPUkNFX0NPTE9SXCIpICE9PSB2b2lkIDApIHtcbiAgICBzd2l0Y2ggKGdldEVudlZhcihcIkZPUkNFX0NPTE9SXCIpKSB7XG4gICAgICBjYXNlIFwiXCI6XG4gICAgICBjYXNlIFwiMVwiOlxuICAgICAgY2FzZSBcInRydWVcIjpcbiAgICAgICAgcmV0dXJuIENPTE9SU18xNjtcbiAgICAgIGNhc2UgXCIyXCI6XG4gICAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICAgICAgY2FzZSBcIjNcIjpcbiAgICAgICAgcmV0dXJuIENPTE9SU18xNm07XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gQ09MT1JTXzI7XG4gICAgfVxuICB9XG4gIGlmIChnZXRFbnZWYXIoXCJOT0RFX0RJU0FCTEVfQ09MT1JTXCIpICE9PSB2b2lkIDAgJiYgZ2V0RW52VmFyKFwiTk9ERV9ESVNBQkxFX0NPTE9SU1wiKSAhPT0gXCJcIiB8fCAvLyBTZWUgaHR0cHM6Ly9uby1jb2xvci5vcmcvXG4gIGdldEVudlZhcihcIk5PX0NPTE9SXCIpICE9PSB2b2lkIDAgJiYgZ2V0RW52VmFyKFwiTk9fQ09MT1JcIikgIT09IFwiXCIgfHwgLy8gVGhlIFwiZHVtYlwiIHNwZWNpYWwgdGVybWluYWwsIGFzIGRlZmluZWQgYnkgdGVybWluZm8sIGRvZXNuJ3Qgc3VwcG9ydFxuICAvLyBBTlNJIGNvbG9yIGNvbnRyb2wgY29kZXMuXG4gIC8vIFNlZSBodHRwczovL2ludmlzaWJsZS1pc2xhbmQubmV0L25jdXJzZXMvdGVybWluZm8udGkuaHRtbCN0b2MtX1NwZWNpYWxzXG4gIGdldEVudlZhcihcIlRFUk1cIikgPT09IFwiZHVtYlwiKSB7XG4gICAgcmV0dXJuIENPTE9SU18yO1xuICB9XG4gIGlmIChnZXRFbnZWYXIoXCJUTVVYXCIpKSB7XG4gICAgcmV0dXJuIENPTE9SU18xNm07XG4gIH1cbiAgaWYgKFwiVEZfQlVJTERcIiBpbiBlbnYgJiYgXCJBR0VOVF9OQU1FXCIgaW4gZW52KSB7XG4gICAgcmV0dXJuIENPTE9SU18xNjtcbiAgfVxuICBpZiAoXCJDSVwiIGluIGVudikge1xuICAgIGZvciAoY29uc3QgeyAwOiBlbnZOYW1lLCAxOiBjb2xvcnMgfSBvZiBDSV9FTlZTX01BUCkge1xuICAgICAgaWYgKGVudk5hbWUgaW4gZW52KSB7XG4gICAgICAgIHJldHVybiBjb2xvcnM7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChnZXRFbnZWYXIoXCJDSV9OQU1FXCIpID09PSBcImNvZGVzaGlwXCIpIHtcbiAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICAgIH1cbiAgICByZXR1cm4gQ09MT1JTXzI7XG4gIH1cbiAgaWYgKFwiVEVBTUNJVFlfVkVSU0lPTlwiIGluIGVudikge1xuICAgIHJldHVybiAvXig5XFwuKDAqWzEtOV1cXGQqKVxcLnxcXGR7Mix9XFwuKS8uZXhlYyhcbiAgICAgIGdldEVudlZhcihcIlRFQU1DSVRZX1ZFUlNJT05cIilcbiAgICApICE9PSBudWxsID8gQ09MT1JTXzE2IDogQ09MT1JTXzI7XG4gIH1cbiAgc3dpdGNoIChnZXRFbnZWYXIoXCJURVJNX1BST0dSQU1cIikpIHtcbiAgICBjYXNlIFwiaVRlcm0uYXBwXCI6XG4gICAgICBpZiAoIWdldEVudlZhcihcIlRFUk1fUFJPR1JBTV9WRVJTSU9OXCIpIHx8IC9eWzAtMl1cXC4vLmV4ZWMoZ2V0RW52VmFyKFwiVEVSTV9QUk9HUkFNX1ZFUlNJT05cIikpICE9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICAgICAgfVxuICAgICAgcmV0dXJuIENPTE9SU18xNm07XG4gICAgY2FzZSBcIkh5cGVyVGVybVwiOlxuICAgIGNhc2UgXCJNYWNUZXJtXCI6XG4gICAgICByZXR1cm4gQ09MT1JTXzE2bTtcbiAgICBjYXNlIFwiQXBwbGVfVGVybWluYWxcIjpcbiAgICAgIHJldHVybiBDT0xPUlNfMjU2O1xuICB9XG4gIGlmIChnZXRFbnZWYXIoXCJDT0xPUlRFUk1cIikgPT09IFwidHJ1ZWNvbG9yXCIgfHwgZ2V0RW52VmFyKFwiQ09MT1JURVJNXCIpID09PSBcIjI0Yml0XCIpIHtcbiAgICByZXR1cm4gQ09MT1JTXzE2bTtcbiAgfVxuICBpZiAoZ2V0RW52VmFyKFwiVEVSTVwiKSkge1xuICAgIGlmICgvdHJ1ZWNvbG9yLy5leGVjKGdldEVudlZhcihcIlRFUk1cIikpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gQ09MT1JTXzE2bTtcbiAgICB9XG4gICAgaWYgKC9eeHRlcm0tMjU2Ly5leGVjKGdldEVudlZhcihcIlRFUk1cIikpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm4gQ09MT1JTXzI1NjtcbiAgICB9XG4gICAgY29uc3QgdGVybUVudiA9IGdldEVudlZhcihcIlRFUk1cIikudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoVEVSTV9FTlZTW3Rlcm1FbnZdKSB7XG4gICAgICByZXR1cm4gVEVSTV9FTlZTW3Rlcm1FbnZdO1xuICAgIH1cbiAgICBpZiAoVEVSTV9FTlZTX1JFR19FWFAuc29tZSgodGVybSkgPT4gdGVybS5leGVjKHRlcm1FbnYpICE9PSBudWxsKSkge1xuICAgICAgcmV0dXJuIENPTE9SU18xNjtcbiAgICB9XG4gIH1cbiAgaWYgKGdldEVudlZhcihcIkNPTE9SVEVSTVwiKSkge1xuICAgIHJldHVybiBDT0xPUlNfMTY7XG4gIH1cbiAgcmV0dXJuIENPTE9SU18yO1xufVxuXG5jb25zdCBUVFlfQ09MT1JTID0ge1xuICByZXNldDogXCJcXHgxQlswbVwiLFxuICBicmlnaHQ6IFwiXFx4MUJbMW1cIixcbiAgZGltOiBcIlxceDFCWzJtXCIsXG4gIHVuZGltOiBcIlxceDFCWzIybVwiLFxuICB1bmRlcnNjb3JlOiBcIlxceDFCWzRtXCIsXG4gIGJsaW5rOiBcIlxceDFCWzVtXCIsXG4gIHJldmVyc2U6IFwiXFx4MUJbN21cIixcbiAgaGlkZGVuOiBcIlxceDFCWzhtXCIsXG4gIGZnOiB7XG4gICAgYmxhY2s6IFwiXFx4MUJbMzBtXCIsXG4gICAgcmVkOiBcIlxceDFCWzMxbVwiLFxuICAgIGdyZWVuOiBcIlxceDFCWzMybVwiLFxuICAgIHllbGxvdzogXCJcXHgxQlszM21cIixcbiAgICBibHVlOiBcIlxceDFCWzM0bVwiLFxuICAgIG1hZ2VudGE6IFwiXFx4MUJbMzVtXCIsXG4gICAgY3lhbjogXCJcXHgxQlszNm1cIixcbiAgICB3aGl0ZTogXCJcXHgxQlszN21cIlxuICB9LFxuICBiZzoge1xuICAgIGJsYWNrOiBcIlxceDFCWzQwbVwiLFxuICAgIHJlZDogXCJcXHgxQls0MW1cIixcbiAgICBncmVlbjogXCJcXHgxQls0Mm1cIixcbiAgICB5ZWxsb3c6IFwiXFx4MUJbNDNtXCIsXG4gICAgYmx1ZTogXCJcXHgxQls0NG1cIixcbiAgICBtYWdlbnRhOiBcIlxceDFCWzQ1bVwiLFxuICAgIGN5YW46IFwiXFx4MUJbNDZtXCIsXG4gICAgd2hpdGU6IFwiXFx4MUJbNDdtXCJcbiAgfVxufTtcbmNvbnN0IGxldmVscyA9IFtcImluZm9cIiwgXCJzdWNjZXNzXCIsIFwid2FyblwiLCBcImVycm9yXCIsIFwiZGVidWdcIl07XG5mdW5jdGlvbiBzaG91bGRQdWJsaXNoTG9nKGN1cnJlbnRMb2dMZXZlbCwgbG9nTGV2ZWwpIHtcbiAgcmV0dXJuIGxldmVscy5pbmRleE9mKGxvZ0xldmVsKSA8PSBsZXZlbHMuaW5kZXhPZihjdXJyZW50TG9nTGV2ZWwpO1xufVxuY29uc3QgbGV2ZWxDb2xvcnMgPSB7XG4gIGluZm86IFRUWV9DT0xPUlMuZmcuYmx1ZSxcbiAgc3VjY2VzczogVFRZX0NPTE9SUy5mZy5ncmVlbixcbiAgd2FybjogVFRZX0NPTE9SUy5mZy55ZWxsb3csXG4gIGVycm9yOiBUVFlfQ09MT1JTLmZnLnJlZCxcbiAgZGVidWc6IFRUWV9DT0xPUlMuZmcubWFnZW50YVxufTtcbmNvbnN0IGZvcm1hdE1lc3NhZ2UgPSAobGV2ZWwsIG1lc3NhZ2UsIGNvbG9yc0VuYWJsZWQpID0+IHtcbiAgY29uc3QgdGltZXN0YW1wID0gKC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpO1xuICBpZiAoY29sb3JzRW5hYmxlZCkge1xuICAgIHJldHVybiBgJHtUVFlfQ09MT1JTLmRpbX0ke3RpbWVzdGFtcH0ke1RUWV9DT0xPUlMucmVzZXR9ICR7bGV2ZWxDb2xvcnNbbGV2ZWxdfSR7bGV2ZWwudG9VcHBlckNhc2UoKX0ke1RUWV9DT0xPUlMucmVzZXR9ICR7VFRZX0NPTE9SUy5icmlnaHR9W0JldHRlciBBdXRoXToke1RUWV9DT0xPUlMucmVzZXR9ICR7bWVzc2FnZX1gO1xuICB9XG4gIHJldHVybiBgJHt0aW1lc3RhbXB9ICR7bGV2ZWwudG9VcHBlckNhc2UoKX0gW0JldHRlciBBdXRoXTogJHttZXNzYWdlfWA7XG59O1xuY29uc3QgY3JlYXRlTG9nZ2VyID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgZW5hYmxlZCA9IG9wdGlvbnM/LmRpc2FibGVkICE9PSB0cnVlO1xuICBjb25zdCBsb2dMZXZlbCA9IG9wdGlvbnM/LmxldmVsID8/IFwiZXJyb3JcIjtcbiAgY29uc3QgaXNEaXNhYmxlQ29sb3JzU3BlY2lmaWVkID0gb3B0aW9ucz8uZGlzYWJsZUNvbG9ycyAhPT0gdm9pZCAwO1xuICBjb25zdCBjb2xvcnNFbmFibGVkID0gaXNEaXNhYmxlQ29sb3JzU3BlY2lmaWVkID8gIW9wdGlvbnMuZGlzYWJsZUNvbG9ycyA6IGdldENvbG9yRGVwdGgoKSAhPT0gMTtcbiAgY29uc3QgTG9nRnVuYyA9IChsZXZlbCwgbWVzc2FnZSwgYXJncyA9IFtdKSA9PiB7XG4gICAgaWYgKCFlbmFibGVkIHx8ICFzaG91bGRQdWJsaXNoTG9nKGxvZ0xldmVsLCBsZXZlbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZSA9IGZvcm1hdE1lc3NhZ2UobGV2ZWwsIG1lc3NhZ2UsIGNvbG9yc0VuYWJsZWQpO1xuICAgIGlmICghb3B0aW9ucyB8fCB0eXBlb2Ygb3B0aW9ucy5sb2cgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKGxldmVsID09PSBcImVycm9yXCIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSBpZiAobGV2ZWwgPT09IFwid2FyblwiKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybihmb3JtYXR0ZWRNZXNzYWdlLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZE1lc3NhZ2UsIC4uLmFyZ3MpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBvcHRpb25zLmxvZyhsZXZlbCA9PT0gXCJzdWNjZXNzXCIgPyBcImluZm9cIiA6IGxldmVsLCBtZXNzYWdlLCAuLi5hcmdzKTtcbiAgfTtcbiAgY29uc3QgbG9nZ2VyMiA9IE9iamVjdC5mcm9tRW50cmllcyhcbiAgICBsZXZlbHMubWFwKChsZXZlbCkgPT4gW1xuICAgICAgbGV2ZWwsXG4gICAgICAoLi4uW21lc3NhZ2UsIC4uLmFyZ3NdKSA9PiBMb2dGdW5jKGxldmVsLCBtZXNzYWdlLCBhcmdzKVxuICAgIF0pXG4gICk7XG4gIHJldHVybiB7XG4gICAgLi4ubG9nZ2VyMixcbiAgICBnZXQgbGV2ZWwoKSB7XG4gICAgICByZXR1cm4gbG9nTGV2ZWw7XG4gICAgfVxuICB9O1xufTtcbmNvbnN0IGxvZ2dlciA9IGNyZWF0ZUxvZ2dlcigpO1xuXG5leHBvcnQgeyBFTlYsIFRUWV9DT0xPUlMsIGNyZWF0ZUxvZ2dlciwgZW52LCBnZXRCb29sZWFuRW52VmFyLCBnZXRDb2xvckRlcHRoLCBnZXRFbnZWYXIsIGlzRGV2ZWxvcG1lbnQsIGlzUHJvZHVjdGlvbiwgaXNUZXN0LCBsZXZlbHMsIGxvZ2dlciwgbm9kZUVOViwgc2hvdWxkUHVibGlzaExvZyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/error/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BASE_ERROR_CODES: () => (/* binding */ BASE_ERROR_CODES),\n/* harmony export */   BetterAuthError: () => (/* binding */ BetterAuthError)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\nconst BASE_ERROR_CODES = (0,_better_auth_core_utils__WEBPACK_IMPORTED_MODULE_0__.defineErrorCodes)({\n  USER_NOT_FOUND: \"User not found\",\n  FAILED_TO_CREATE_USER: \"Failed to create user\",\n  FAILED_TO_CREATE_SESSION: \"Failed to create session\",\n  FAILED_TO_UPDATE_USER: \"Failed to update user\",\n  FAILED_TO_GET_SESSION: \"Failed to get session\",\n  INVALID_PASSWORD: \"Invalid password\",\n  INVALID_EMAIL: \"Invalid email\",\n  INVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n  SOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n  PROVIDER_NOT_FOUND: \"Provider not found\",\n  INVALID_TOKEN: \"Invalid token\",\n  ID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n  FAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n  USER_EMAIL_NOT_FOUND: \"User email not found\",\n  EMAIL_NOT_VERIFIED: \"Email not verified\",\n  PASSWORD_TOO_SHORT: \"Password too short\",\n  PASSWORD_TOO_LONG: \"Password too long\",\n  USER_ALREADY_EXISTS: \"User already exists.\",\n  USER_ALREADY_EXISTS_USE_ANOTHER_EMAIL: \"User already exists. Use another email.\",\n  EMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n  CREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n  SESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n  FAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n  ACCOUNT_NOT_FOUND: \"Account not found\",\n  USER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\"\n});\n\nclass BetterAuthError extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"BetterAuthError\";\n    this.message = message;\n    this.cause = cause;\n    this.stack = \"\";\n  }\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9lcnJvci9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJEOztBQUUzRCx5QkFBeUIseUVBQWdCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRTZDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC9jb3JlL2Rpc3QvZXJyb3IvaW5kZXgubWpzP2QzZGUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9IGZyb20gJ0BiZXR0ZXItYXV0aC9jb3JlL3V0aWxzJztcblxuY29uc3QgQkFTRV9FUlJPUl9DT0RFUyA9IGRlZmluZUVycm9yQ29kZXMoe1xuICBVU0VSX05PVF9GT1VORDogXCJVc2VyIG5vdCBmb3VuZFwiLFxuICBGQUlMRURfVE9fQ1JFQVRFX1VTRVI6IFwiRmFpbGVkIHRvIGNyZWF0ZSB1c2VyXCIsXG4gIEZBSUxFRF9UT19DUkVBVEVfU0VTU0lPTjogXCJGYWlsZWQgdG8gY3JlYXRlIHNlc3Npb25cIixcbiAgRkFJTEVEX1RPX1VQREFURV9VU0VSOiBcIkZhaWxlZCB0byB1cGRhdGUgdXNlclwiLFxuICBGQUlMRURfVE9fR0VUX1NFU1NJT046IFwiRmFpbGVkIHRvIGdldCBzZXNzaW9uXCIsXG4gIElOVkFMSURfUEFTU1dPUkQ6IFwiSW52YWxpZCBwYXNzd29yZFwiLFxuICBJTlZBTElEX0VNQUlMOiBcIkludmFsaWQgZW1haWxcIixcbiAgSU5WQUxJRF9FTUFJTF9PUl9QQVNTV09SRDogXCJJbnZhbGlkIGVtYWlsIG9yIHBhc3N3b3JkXCIsXG4gIFNPQ0lBTF9BQ0NPVU5UX0FMUkVBRFlfTElOS0VEOiBcIlNvY2lhbCBhY2NvdW50IGFscmVhZHkgbGlua2VkXCIsXG4gIFBST1ZJREVSX05PVF9GT1VORDogXCJQcm92aWRlciBub3QgZm91bmRcIixcbiAgSU5WQUxJRF9UT0tFTjogXCJJbnZhbGlkIHRva2VuXCIsXG4gIElEX1RPS0VOX05PVF9TVVBQT1JURUQ6IFwiaWRfdG9rZW4gbm90IHN1cHBvcnRlZFwiLFxuICBGQUlMRURfVE9fR0VUX1VTRVJfSU5GTzogXCJGYWlsZWQgdG8gZ2V0IHVzZXIgaW5mb1wiLFxuICBVU0VSX0VNQUlMX05PVF9GT1VORDogXCJVc2VyIGVtYWlsIG5vdCBmb3VuZFwiLFxuICBFTUFJTF9OT1RfVkVSSUZJRUQ6IFwiRW1haWwgbm90IHZlcmlmaWVkXCIsXG4gIFBBU1NXT1JEX1RPT19TSE9SVDogXCJQYXNzd29yZCB0b28gc2hvcnRcIixcbiAgUEFTU1dPUkRfVE9PX0xPTkc6IFwiUGFzc3dvcmQgdG9vIGxvbmdcIixcbiAgVVNFUl9BTFJFQURZX0VYSVNUUzogXCJVc2VyIGFscmVhZHkgZXhpc3RzLlwiLFxuICBVU0VSX0FMUkVBRFlfRVhJU1RTX1VTRV9BTk9USEVSX0VNQUlMOiBcIlVzZXIgYWxyZWFkeSBleGlzdHMuIFVzZSBhbm90aGVyIGVtYWlsLlwiLFxuICBFTUFJTF9DQU5fTk9UX0JFX1VQREFURUQ6IFwiRW1haWwgY2FuIG5vdCBiZSB1cGRhdGVkXCIsXG4gIENSRURFTlRJQUxfQUNDT1VOVF9OT1RfRk9VTkQ6IFwiQ3JlZGVudGlhbCBhY2NvdW50IG5vdCBmb3VuZFwiLFxuICBTRVNTSU9OX0VYUElSRUQ6IFwiU2Vzc2lvbiBleHBpcmVkLiBSZS1hdXRoZW50aWNhdGUgdG8gcGVyZm9ybSB0aGlzIGFjdGlvbi5cIixcbiAgRkFJTEVEX1RPX1VOTElOS19MQVNUX0FDQ09VTlQ6IFwiWW91IGNhbid0IHVubGluayB5b3VyIGxhc3QgYWNjb3VudFwiLFxuICBBQ0NPVU5UX05PVF9GT1VORDogXCJBY2NvdW50IG5vdCBmb3VuZFwiLFxuICBVU0VSX0FMUkVBRFlfSEFTX1BBU1NXT1JEOiBcIlVzZXIgYWxyZWFkeSBoYXMgYSBwYXNzd29yZC4gUHJvdmlkZSB0aGF0IHRvIGRlbGV0ZSB0aGUgYWNjb3VudC5cIlxufSk7XG5cbmNsYXNzIEJldHRlckF1dGhFcnJvciBleHRlbmRzIEVycm9yIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZSwgY2F1c2UpIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLm5hbWUgPSBcIkJldHRlckF1dGhFcnJvclwiO1xuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICAgIHRoaXMuc3RhY2sgPSBcIlwiO1xuICB9XG59XG5cbmV4cG9ydCB7IEJBU0VfRVJST1JfQ09ERVMsIEJldHRlckF1dGhFcnJvciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/index.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/index.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);



/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/middleware/index.mjs":
/*!******************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/middleware/index.mjs ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createAuthEndpoint: () => (/* binding */ createAuthEndpoint),\n/* harmony export */   createAuthMiddleware: () => (/* binding */ createAuthMiddleware),\n/* harmony export */   optionsMiddleware: () => (/* binding */ optionsMiddleware)\n/* harmony export */ });\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n\n\nconst optionsMiddleware = (0,better_call__WEBPACK_IMPORTED_MODULE_0__.createMiddleware)(async () => {\n  return {};\n});\nconst createAuthMiddleware = better_call__WEBPACK_IMPORTED_MODULE_0__.createMiddleware.create({\n  use: [\n    optionsMiddleware,\n    /**\n     * Only use for post hooks\n     */\n    (0,better_call__WEBPACK_IMPORTED_MODULE_0__.createMiddleware)(async () => {\n      return {};\n    })\n  ]\n});\nconst createAuthEndpoint = better_call__WEBPACK_IMPORTED_MODULE_0__.createEndpoint.create({\n  use: [optionsMiddleware]\n});\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9taWRkbGV3YXJlL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQStEOztBQUUvRCwwQkFBMEIsNkRBQWdCO0FBQzFDO0FBQ0EsQ0FBQztBQUNELDZCQUE2Qix5REFBZ0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUksNkRBQWdCO0FBQ3BCO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQztBQUNELDJCQUEyQix1REFBYztBQUN6QztBQUNBLENBQUM7O0FBRXNFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC9jb3JlL2Rpc3QvbWlkZGxld2FyZS9pbmRleC5tanM/NjhjNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVNaWRkbGV3YXJlLCBjcmVhdGVFbmRwb2ludCB9IGZyb20gJ2JldHRlci1jYWxsJztcblxuY29uc3Qgb3B0aW9uc01pZGRsZXdhcmUgPSBjcmVhdGVNaWRkbGV3YXJlKGFzeW5jICgpID0+IHtcbiAgcmV0dXJuIHt9O1xufSk7XG5jb25zdCBjcmVhdGVBdXRoTWlkZGxld2FyZSA9IGNyZWF0ZU1pZGRsZXdhcmUuY3JlYXRlKHtcbiAgdXNlOiBbXG4gICAgb3B0aW9uc01pZGRsZXdhcmUsXG4gICAgLyoqXG4gICAgICogT25seSB1c2UgZm9yIHBvc3QgaG9va3NcbiAgICAgKi9cbiAgICBjcmVhdGVNaWRkbGV3YXJlKGFzeW5jICgpID0+IHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9KVxuICBdXG59KTtcbmNvbnN0IGNyZWF0ZUF1dGhFbmRwb2ludCA9IGNyZWF0ZUVuZHBvaW50LmNyZWF0ZSh7XG4gIHVzZTogW29wdGlvbnNNaWRkbGV3YXJlXVxufSk7XG5cbmV4cG9ydCB7IGNyZWF0ZUF1dGhFbmRwb2ludCwgY3JlYXRlQXV0aE1pZGRsZXdhcmUsIG9wdGlvbnNNaWRkbGV3YXJlIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/middleware/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs":
/*!**************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/oauth2/index.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientCredentialsToken: () => (/* binding */ clientCredentialsToken),\n/* harmony export */   createAuthorizationCodeRequest: () => (/* binding */ createAuthorizationCodeRequest),\n/* harmony export */   createAuthorizationURL: () => (/* binding */ createAuthorizationURL),\n/* harmony export */   createClientCredentialsTokenRequest: () => (/* binding */ createClientCredentialsTokenRequest),\n/* harmony export */   createRefreshAccessTokenRequest: () => (/* binding */ createRefreshAccessTokenRequest),\n/* harmony export */   generateCodeChallenge: () => (/* binding */ generateCodeChallenge),\n/* harmony export */   getOAuth2Tokens: () => (/* binding */ getOAuth2Tokens),\n/* harmony export */   refreshAccessToken: () => (/* binding */ refreshAccessToken),\n/* harmony export */   validateAuthorizationCode: () => (/* binding */ validateAuthorizationCode),\n/* harmony export */   validateToken: () => (/* binding */ validateToken)\n/* harmony export */ });\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n\n\n\n\nfunction getOAuth2Tokens(data) {\n  const getDate = (seconds) => {\n    const now = /* @__PURE__ */ new Date();\n    return new Date(now.getTime() + seconds * 1e3);\n  };\n  return {\n    tokenType: data.token_type,\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    accessTokenExpiresAt: data.expires_in ? getDate(data.expires_in) : void 0,\n    refreshTokenExpiresAt: data.refresh_token_expires_in ? getDate(data.refresh_token_expires_in) : void 0,\n    scopes: data?.scope ? typeof data.scope === \"string\" ? data.scope.split(\" \") : data.scope : [],\n    idToken: data.id_token\n  };\n}\nasync function generateCodeChallenge(codeVerifier) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(codeVerifier);\n  const hash = await crypto.subtle.digest(\"SHA-256\", data);\n  return _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_0__.base64Url.encode(new Uint8Array(hash), {\n    padding: false\n  });\n}\n\nasync function createAuthorizationURL({\n  id,\n  options,\n  authorizationEndpoint,\n  state,\n  codeVerifier,\n  scopes,\n  claims,\n  redirectURI,\n  duration,\n  prompt,\n  accessType,\n  responseType,\n  display,\n  loginHint,\n  hd,\n  responseMode,\n  additionalParams,\n  scopeJoiner\n}) {\n  const url = new URL(authorizationEndpoint);\n  url.searchParams.set(\"response_type\", responseType || \"code\");\n  const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n  url.searchParams.set(\"client_id\", primaryClientId);\n  url.searchParams.set(\"state\", state);\n  url.searchParams.set(\"scope\", scopes.join(scopeJoiner || \" \"));\n  url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  duration && url.searchParams.set(\"duration\", duration);\n  display && url.searchParams.set(\"display\", display);\n  loginHint && url.searchParams.set(\"login_hint\", loginHint);\n  prompt && url.searchParams.set(\"prompt\", prompt);\n  hd && url.searchParams.set(\"hd\", hd);\n  accessType && url.searchParams.set(\"access_type\", accessType);\n  responseMode && url.searchParams.set(\"response_mode\", responseMode);\n  if (codeVerifier) {\n    const codeChallenge = await generateCodeChallenge(codeVerifier);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"code_challenge\", codeChallenge);\n  }\n  if (claims) {\n    const claimsObj = claims.reduce(\n      (acc, claim) => {\n        acc[claim] = null;\n        return acc;\n      },\n      {}\n    );\n    url.searchParams.set(\n      \"claims\",\n      JSON.stringify({\n        id_token: { email: null, email_verified: null, ...claimsObj }\n      })\n    );\n  }\n  if (additionalParams) {\n    Object.entries(additionalParams).forEach(([key, value]) => {\n      url.searchParams.set(key, value);\n    });\n  }\n  return url;\n}\n\nfunction createAuthorizationCodeRequest({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const body = new URLSearchParams();\n  const requestHeaders = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\",\n    \"user-agent\": \"better-auth\",\n    ...headers\n  };\n  body.set(\"grant_type\", \"authorization_code\");\n  body.set(\"code\", code);\n  codeVerifier && body.set(\"code_verifier\", codeVerifier);\n  options.clientKey && body.set(\"client_key\", options.clientKey);\n  deviceId && body.set(\"device_id\", deviceId);\n  body.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (authentication === \"basic\") {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    const encodedCredentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_0__.base64.encode(\n      `${primaryClientId}:${options.clientSecret ?? \"\"}`\n    );\n    requestHeaders[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    body.set(\"client_id\", primaryClientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  for (const [key, value] of Object.entries(additionalParams)) {\n    if (!body.has(key)) body.append(key, value);\n  }\n  return {\n    body,\n    headers: requestHeaders\n  };\n}\nasync function validateAuthorizationCode({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  tokenEndpoint,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const { body, headers: requestHeaders } = createAuthorizationCodeRequest({\n    code,\n    codeVerifier,\n    redirectURI,\n    options,\n    authentication,\n    deviceId,\n    headers,\n    additionalParams,\n    resource\n  });\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_1__.betterFetch)(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers: requestHeaders\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = getOAuth2Tokens(data);\n  return tokens;\n}\nasync function validateToken(token, jwksEndpoint) {\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_1__.betterFetch)(jwksEndpoint, {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      \"user-agent\": \"better-auth\"\n    }\n  });\n  if (error) {\n    throw error;\n  }\n  const keys = data[\"keys\"];\n  const header = JSON.parse(atob(token.split(\".\")[0]));\n  const key = keys.find((key2) => key2.kid === header.kid);\n  if (!key) {\n    throw new Error(\"Key not found\");\n  }\n  const verified = await (0,jose__WEBPACK_IMPORTED_MODULE_2__.jwtVerify)(token, key);\n  return verified;\n}\n\nfunction createRefreshAccessTokenRequest({\n  refreshToken,\n  options,\n  authentication,\n  extraParams,\n  resource\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\"\n  };\n  body.set(\"grant_type\", \"refresh_token\");\n  body.set(\"refresh_token\", refreshToken);\n  if (authentication === \"basic\") {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    if (primaryClientId) {\n      headers[\"authorization\"] = \"Basic \" + _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_0__.base64.encode(`${primaryClientId}:${options.clientSecret ?? \"\"}`);\n    } else {\n      headers[\"authorization\"] = \"Basic \" + _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_0__.base64.encode(`:${options.clientSecret ?? \"\"}`);\n    }\n  } else {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    body.set(\"client_id\", primaryClientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (extraParams) {\n    for (const [key, value] of Object.entries(extraParams)) {\n      body.set(key, value);\n    }\n  }\n  return {\n    body,\n    headers\n  };\n}\nasync function refreshAccessToken({\n  refreshToken,\n  options,\n  tokenEndpoint,\n  authentication,\n  extraParams\n}) {\n  const { body, headers } = createRefreshAccessTokenRequest({\n    refreshToken,\n    options,\n    authentication,\n    extraParams\n  });\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_1__.betterFetch)(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = {\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    tokenType: data.token_type,\n    scopes: data.scope?.split(\" \"),\n    idToken: data.id_token\n  };\n  if (data.expires_in) {\n    const now = /* @__PURE__ */ new Date();\n    tokens.accessTokenExpiresAt = new Date(\n      now.getTime() + data.expires_in * 1e3\n    );\n  }\n  return tokens;\n}\n\nfunction createClientCredentialsTokenRequest({\n  options,\n  scope,\n  authentication,\n  resource\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\"\n  };\n  body.set(\"grant_type\", \"client_credentials\");\n  scope && body.set(\"scope\", scope);\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (authentication === \"basic\") {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    const encodedCredentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_0__.base64Url.encode(\n      `${primaryClientId}:${options.clientSecret}`\n    );\n    headers[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    const primaryClientId = Array.isArray(options.clientId) ? options.clientId[0] : options.clientId;\n    body.set(\"client_id\", primaryClientId);\n    body.set(\"client_secret\", options.clientSecret);\n  }\n  return {\n    body,\n    headers\n  };\n}\nasync function clientCredentialsToken({\n  options,\n  tokenEndpoint,\n  scope,\n  authentication,\n  resource\n}) {\n  const { body, headers } = createClientCredentialsTokenRequest({\n    options,\n    scope,\n    authentication,\n    resource\n  });\n  const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_1__.betterFetch)(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = {\n    accessToken: data.access_token,\n    tokenType: data.token_type,\n    scopes: data.scope?.split(\" \")\n  };\n  if (data.expires_in) {\n    const now = /* @__PURE__ */ new Date();\n    tokens.accessTokenExpiresAt = new Date(\n      now.getTime() + data.expires_in * 1e3\n    );\n  }\n  return tokens;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9vYXV0aDIvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBOEQ7QUFDWjtBQUNqQjs7QUFFakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLGdFQUFTO0FBQ2xCO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLDZEQUFNO0FBQ3JDLFNBQVMsZ0JBQWdCLEdBQUcsMkJBQTJCO0FBQ3ZEO0FBQ0EsK0NBQStDLG1CQUFtQjtBQUNsRSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBLENBQUM7QUFDRCxVQUFVLGdDQUFnQztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsVUFBVSxjQUFjLFFBQVEsZ0VBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVSxjQUFjLFFBQVEsZ0VBQVc7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsK0NBQVM7QUFDbEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsNkRBQU0sV0FBVyxnQkFBZ0IsR0FBRywyQkFBMkI7QUFDM0csTUFBTTtBQUNOLDRDQUE0Qyw2REFBTSxZQUFZLDJCQUEyQjtBQUN6RjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFVBQVUsZ0JBQWdCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFVBQVUsY0FBYyxRQUFRLGdFQUFXO0FBQzNDO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixnRUFBUztBQUN4QyxTQUFTLGdCQUFnQixHQUFHLHFCQUFxQjtBQUNqRDtBQUNBLHdDQUF3QyxtQkFBbUI7QUFDM0QsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxVQUFVLGNBQWMsUUFBUSxnRUFBVztBQUMzQztBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXNRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC9jb3JlL2Rpc3Qvb2F1dGgyL2luZGV4Lm1qcz9jODdlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGJhc2U2NFVybCwgYmFzZTY0IH0gZnJvbSAnQGJldHRlci1hdXRoL3V0aWxzL2Jhc2U2NCc7XG5pbXBvcnQgeyBiZXR0ZXJGZXRjaCB9IGZyb20gJ0BiZXR0ZXItZmV0Y2gvZmV0Y2gnO1xuaW1wb3J0IHsgand0VmVyaWZ5IH0gZnJvbSAnam9zZSc7XG5cbmZ1bmN0aW9uIGdldE9BdXRoMlRva2VucyhkYXRhKSB7XG4gIGNvbnN0IGdldERhdGUgPSAoc2Vjb25kcykgPT4ge1xuICAgIGNvbnN0IG5vdyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgRGF0ZSgpO1xuICAgIHJldHVybiBuZXcgRGF0ZShub3cuZ2V0VGltZSgpICsgc2Vjb25kcyAqIDFlMyk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgdG9rZW5UeXBlOiBkYXRhLnRva2VuX3R5cGUsXG4gICAgYWNjZXNzVG9rZW46IGRhdGEuYWNjZXNzX3Rva2VuLFxuICAgIHJlZnJlc2hUb2tlbjogZGF0YS5yZWZyZXNoX3Rva2VuLFxuICAgIGFjY2Vzc1Rva2VuRXhwaXJlc0F0OiBkYXRhLmV4cGlyZXNfaW4gPyBnZXREYXRlKGRhdGEuZXhwaXJlc19pbikgOiB2b2lkIDAsXG4gICAgcmVmcmVzaFRva2VuRXhwaXJlc0F0OiBkYXRhLnJlZnJlc2hfdG9rZW5fZXhwaXJlc19pbiA/IGdldERhdGUoZGF0YS5yZWZyZXNoX3Rva2VuX2V4cGlyZXNfaW4pIDogdm9pZCAwLFxuICAgIHNjb3BlczogZGF0YT8uc2NvcGUgPyB0eXBlb2YgZGF0YS5zY29wZSA9PT0gXCJzdHJpbmdcIiA/IGRhdGEuc2NvcGUuc3BsaXQoXCIgXCIpIDogZGF0YS5zY29wZSA6IFtdLFxuICAgIGlkVG9rZW46IGRhdGEuaWRfdG9rZW5cbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlQ29kZUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpIHtcbiAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICBjb25zdCBkYXRhID0gZW5jb2Rlci5lbmNvZGUoY29kZVZlcmlmaWVyKTtcbiAgY29uc3QgaGFzaCA9IGF3YWl0IGNyeXB0by5zdWJ0bGUuZGlnZXN0KFwiU0hBLTI1NlwiLCBkYXRhKTtcbiAgcmV0dXJuIGJhc2U2NFVybC5lbmNvZGUobmV3IFVpbnQ4QXJyYXkoaGFzaCksIHtcbiAgICBwYWRkaW5nOiBmYWxzZVxuICB9KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gIGlkLFxuICBvcHRpb25zLFxuICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gIHN0YXRlLFxuICBjb2RlVmVyaWZpZXIsXG4gIHNjb3BlcyxcbiAgY2xhaW1zLFxuICByZWRpcmVjdFVSSSxcbiAgZHVyYXRpb24sXG4gIHByb21wdCxcbiAgYWNjZXNzVHlwZSxcbiAgcmVzcG9uc2VUeXBlLFxuICBkaXNwbGF5LFxuICBsb2dpbkhpbnQsXG4gIGhkLFxuICByZXNwb25zZU1vZGUsXG4gIGFkZGl0aW9uYWxQYXJhbXMsXG4gIHNjb3BlSm9pbmVyXG59KSB7XG4gIGNvbnN0IHVybCA9IG5ldyBVUkwoYXV0aG9yaXphdGlvbkVuZHBvaW50KTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZXNwb25zZV90eXBlXCIsIHJlc3BvbnNlVHlwZSB8fCBcImNvZGVcIik7XG4gIGNvbnN0IHByaW1hcnlDbGllbnRJZCA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGllbnRJZCkgPyBvcHRpb25zLmNsaWVudElkWzBdIDogb3B0aW9ucy5jbGllbnRJZDtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjbGllbnRfaWRcIiwgcHJpbWFyeUNsaWVudElkKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJzdGF0ZVwiLCBzdGF0ZSk7XG4gIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2NvcGVcIiwgc2NvcGVzLmpvaW4oc2NvcGVKb2luZXIgfHwgXCIgXCIpKTtcbiAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJyZWRpcmVjdF91cmlcIiwgb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSSk7XG4gIGR1cmF0aW9uICYmIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiZHVyYXRpb25cIiwgZHVyYXRpb24pO1xuICBkaXNwbGF5ICYmIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiZGlzcGxheVwiLCBkaXNwbGF5KTtcbiAgbG9naW5IaW50ICYmIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwibG9naW5faGludFwiLCBsb2dpbkhpbnQpO1xuICBwcm9tcHQgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJwcm9tcHRcIiwgcHJvbXB0KTtcbiAgaGQgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJoZFwiLCBoZCk7XG4gIGFjY2Vzc1R5cGUgJiYgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJhY2Nlc3NfdHlwZVwiLCBhY2Nlc3NUeXBlKTtcbiAgcmVzcG9uc2VNb2RlICYmIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwicmVzcG9uc2VfbW9kZVwiLCByZXNwb25zZU1vZGUpO1xuICBpZiAoY29kZVZlcmlmaWVyKSB7XG4gICAgY29uc3QgY29kZUNoYWxsZW5nZSA9IGF3YWl0IGdlbmVyYXRlQ29kZUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VfbWV0aG9kXCIsIFwiUzI1NlwiKTtcbiAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlXCIsIGNvZGVDaGFsbGVuZ2UpO1xuICB9XG4gIGlmIChjbGFpbXMpIHtcbiAgICBjb25zdCBjbGFpbXNPYmogPSBjbGFpbXMucmVkdWNlKFxuICAgICAgKGFjYywgY2xhaW0pID0+IHtcbiAgICAgICAgYWNjW2NsYWltXSA9IG51bGw7XG4gICAgICAgIHJldHVybiBhY2M7XG4gICAgICB9LFxuICAgICAge31cbiAgICApO1xuICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFxuICAgICAgXCJjbGFpbXNcIixcbiAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgaWRfdG9rZW46IHsgZW1haWw6IG51bGwsIGVtYWlsX3ZlcmlmaWVkOiBudWxsLCAuLi5jbGFpbXNPYmogfVxuICAgICAgfSlcbiAgICApO1xuICB9XG4gIGlmIChhZGRpdGlvbmFsUGFyYW1zKSB7XG4gICAgT2JqZWN0LmVudHJpZXMoYWRkaXRpb25hbFBhcmFtcykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChrZXksIHZhbHVlKTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gdXJsO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBdXRob3JpemF0aW9uQ29kZVJlcXVlc3Qoe1xuICBjb2RlLFxuICBjb2RlVmVyaWZpZXIsXG4gIHJlZGlyZWN0VVJJLFxuICBvcHRpb25zLFxuICBhdXRoZW50aWNhdGlvbixcbiAgZGV2aWNlSWQsXG4gIGhlYWRlcnMsXG4gIGFkZGl0aW9uYWxQYXJhbXMgPSB7fSxcbiAgcmVzb3VyY2Vcbn0pIHtcbiAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgY29uc3QgcmVxdWVzdEhlYWRlcnMgPSB7XG4gICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcbiAgICBhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgIFwidXNlci1hZ2VudFwiOiBcImJldHRlci1hdXRoXCIsXG4gICAgLi4uaGVhZGVyc1xuICB9O1xuICBib2R5LnNldChcImdyYW50X3R5cGVcIiwgXCJhdXRob3JpemF0aW9uX2NvZGVcIik7XG4gIGJvZHkuc2V0KFwiY29kZVwiLCBjb2RlKTtcbiAgY29kZVZlcmlmaWVyICYmIGJvZHkuc2V0KFwiY29kZV92ZXJpZmllclwiLCBjb2RlVmVyaWZpZXIpO1xuICBvcHRpb25zLmNsaWVudEtleSAmJiBib2R5LnNldChcImNsaWVudF9rZXlcIiwgb3B0aW9ucy5jbGllbnRLZXkpO1xuICBkZXZpY2VJZCAmJiBib2R5LnNldChcImRldmljZV9pZFwiLCBkZXZpY2VJZCk7XG4gIGJvZHkuc2V0KFwicmVkaXJlY3RfdXJpXCIsIG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUkkpO1xuICBpZiAocmVzb3VyY2UpIHtcbiAgICBpZiAodHlwZW9mIHJlc291cmNlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBib2R5LmFwcGVuZChcInJlc291cmNlXCIsIHJlc291cmNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBfcmVzb3VyY2Ugb2YgcmVzb3VyY2UpIHtcbiAgICAgICAgYm9keS5hcHBlbmQoXCJyZXNvdXJjZVwiLCBfcmVzb3VyY2UpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoYXV0aGVudGljYXRpb24gPT09IFwiYmFzaWNcIikge1xuICAgIGNvbnN0IHByaW1hcnlDbGllbnRJZCA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGllbnRJZCkgPyBvcHRpb25zLmNsaWVudElkWzBdIDogb3B0aW9ucy5jbGllbnRJZDtcbiAgICBjb25zdCBlbmNvZGVkQ3JlZGVudGlhbHMgPSBiYXNlNjQuZW5jb2RlKFxuICAgICAgYCR7cHJpbWFyeUNsaWVudElkfToke29wdGlvbnMuY2xpZW50U2VjcmV0ID8/IFwiXCJ9YFxuICAgICk7XG4gICAgcmVxdWVzdEhlYWRlcnNbXCJhdXRob3JpemF0aW9uXCJdID0gYEJhc2ljICR7ZW5jb2RlZENyZWRlbnRpYWxzfWA7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgcHJpbWFyeUNsaWVudElkID0gQXJyYXkuaXNBcnJheShvcHRpb25zLmNsaWVudElkKSA/IG9wdGlvbnMuY2xpZW50SWRbMF0gOiBvcHRpb25zLmNsaWVudElkO1xuICAgIGJvZHkuc2V0KFwiY2xpZW50X2lkXCIsIHByaW1hcnlDbGllbnRJZCk7XG4gICAgaWYgKG9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICBib2R5LnNldChcImNsaWVudF9zZWNyZXRcIiwgb3B0aW9ucy5jbGllbnRTZWNyZXQpO1xuICAgIH1cbiAgfVxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhhZGRpdGlvbmFsUGFyYW1zKSkge1xuICAgIGlmICghYm9keS5oYXMoa2V5KSkgYm9keS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBib2R5LFxuICAgIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgY29kZSxcbiAgY29kZVZlcmlmaWVyLFxuICByZWRpcmVjdFVSSSxcbiAgb3B0aW9ucyxcbiAgdG9rZW5FbmRwb2ludCxcbiAgYXV0aGVudGljYXRpb24sXG4gIGRldmljZUlkLFxuICBoZWFkZXJzLFxuICBhZGRpdGlvbmFsUGFyYW1zID0ge30sXG4gIHJlc291cmNlXG59KSB7XG4gIGNvbnN0IHsgYm9keSwgaGVhZGVyczogcmVxdWVzdEhlYWRlcnMgfSA9IGNyZWF0ZUF1dGhvcml6YXRpb25Db2RlUmVxdWVzdCh7XG4gICAgY29kZSxcbiAgICBjb2RlVmVyaWZpZXIsXG4gICAgcmVkaXJlY3RVUkksXG4gICAgb3B0aW9ucyxcbiAgICBhdXRoZW50aWNhdGlvbixcbiAgICBkZXZpY2VJZCxcbiAgICBoZWFkZXJzLFxuICAgIGFkZGl0aW9uYWxQYXJhbXMsXG4gICAgcmVzb3VyY2VcbiAgfSk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKHRva2VuRW5kcG9pbnQsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHksXG4gICAgaGVhZGVyczogcmVxdWVzdEhlYWRlcnNcbiAgfSk7XG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHRva2VucyA9IGdldE9BdXRoMlRva2VucyhkYXRhKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cbmFzeW5jIGZ1bmN0aW9uIHZhbGlkYXRlVG9rZW4odG9rZW4sIGp3a3NFbmRwb2ludCkge1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChqd2tzRW5kcG9pbnQsIHtcbiAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgYWNjZXB0OiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIFwidXNlci1hZ2VudFwiOiBcImJldHRlci1hdXRoXCJcbiAgICB9XG4gIH0pO1xuICBpZiAoZXJyb3IpIHtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxuICBjb25zdCBrZXlzID0gZGF0YVtcImtleXNcIl07XG4gIGNvbnN0IGhlYWRlciA9IEpTT04ucGFyc2UoYXRvYih0b2tlbi5zcGxpdChcIi5cIilbMF0pKTtcbiAgY29uc3Qga2V5ID0ga2V5cy5maW5kKChrZXkyKSA9PiBrZXkyLmtpZCA9PT0gaGVhZGVyLmtpZCk7XG4gIGlmICgha2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiS2V5IG5vdCBmb3VuZFwiKTtcbiAgfVxuICBjb25zdCB2ZXJpZmllZCA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwga2V5KTtcbiAgcmV0dXJuIHZlcmlmaWVkO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSZWZyZXNoQWNjZXNzVG9rZW5SZXF1ZXN0KHtcbiAgcmVmcmVzaFRva2VuLFxuICBvcHRpb25zLFxuICBhdXRoZW50aWNhdGlvbixcbiAgZXh0cmFQYXJhbXMsXG4gIHJlc291cmNlXG59KSB7XG4gIGNvbnN0IGJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIixcbiAgICBhY2NlcHQ6IFwiYXBwbGljYXRpb24vanNvblwiXG4gIH07XG4gIGJvZHkuc2V0KFwiZ3JhbnRfdHlwZVwiLCBcInJlZnJlc2hfdG9rZW5cIik7XG4gIGJvZHkuc2V0KFwicmVmcmVzaF90b2tlblwiLCByZWZyZXNoVG9rZW4pO1xuICBpZiAoYXV0aGVudGljYXRpb24gPT09IFwiYmFzaWNcIikge1xuICAgIGNvbnN0IHByaW1hcnlDbGllbnRJZCA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGllbnRJZCkgPyBvcHRpb25zLmNsaWVudElkWzBdIDogb3B0aW9ucy5jbGllbnRJZDtcbiAgICBpZiAocHJpbWFyeUNsaWVudElkKSB7XG4gICAgICBoZWFkZXJzW1wiYXV0aG9yaXphdGlvblwiXSA9IFwiQmFzaWMgXCIgKyBiYXNlNjQuZW5jb2RlKGAke3ByaW1hcnlDbGllbnRJZH06JHtvcHRpb25zLmNsaWVudFNlY3JldCA/PyBcIlwifWApO1xuICAgIH0gZWxzZSB7XG4gICAgICBoZWFkZXJzW1wiYXV0aG9yaXphdGlvblwiXSA9IFwiQmFzaWMgXCIgKyBiYXNlNjQuZW5jb2RlKGA6JHtvcHRpb25zLmNsaWVudFNlY3JldCA/PyBcIlwifWApO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCBwcmltYXJ5Q2xpZW50SWQgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMuY2xpZW50SWQpID8gb3B0aW9ucy5jbGllbnRJZFswXSA6IG9wdGlvbnMuY2xpZW50SWQ7XG4gICAgYm9keS5zZXQoXCJjbGllbnRfaWRcIiwgcHJpbWFyeUNsaWVudElkKTtcbiAgICBpZiAob3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgIGJvZHkuc2V0KFwiY2xpZW50X3NlY3JldFwiLCBvcHRpb25zLmNsaWVudFNlY3JldCk7XG4gICAgfVxuICB9XG4gIGlmIChyZXNvdXJjZSkge1xuICAgIGlmICh0eXBlb2YgcmVzb3VyY2UgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGJvZHkuYXBwZW5kKFwicmVzb3VyY2VcIiwgcmVzb3VyY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IF9yZXNvdXJjZSBvZiByZXNvdXJjZSkge1xuICAgICAgICBib2R5LmFwcGVuZChcInJlc291cmNlXCIsIF9yZXNvdXJjZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChleHRyYVBhcmFtcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGV4dHJhUGFyYW1zKSkge1xuICAgICAgYm9keS5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB7XG4gICAgYm9keSxcbiAgICBoZWFkZXJzXG4gIH07XG59XG5hc3luYyBmdW5jdGlvbiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICByZWZyZXNoVG9rZW4sXG4gIG9wdGlvbnMsXG4gIHRva2VuRW5kcG9pbnQsXG4gIGF1dGhlbnRpY2F0aW9uLFxuICBleHRyYVBhcmFtc1xufSkge1xuICBjb25zdCB7IGJvZHksIGhlYWRlcnMgfSA9IGNyZWF0ZVJlZnJlc2hBY2Nlc3NUb2tlblJlcXVlc3Qoe1xuICAgIHJlZnJlc2hUb2tlbixcbiAgICBvcHRpb25zLFxuICAgIGF1dGhlbnRpY2F0aW9uLFxuICAgIGV4dHJhUGFyYW1zXG4gIH0pO1xuICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaCh0b2tlbkVuZHBvaW50LCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBib2R5LFxuICAgIGhlYWRlcnNcbiAgfSk7XG4gIGlmIChlcnJvcikge1xuICAgIHRocm93IGVycm9yO1xuICB9XG4gIGNvbnN0IHRva2VucyA9IHtcbiAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgcmVmcmVzaFRva2VuOiBkYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgdG9rZW5UeXBlOiBkYXRhLnRva2VuX3R5cGUsXG4gICAgc2NvcGVzOiBkYXRhLnNjb3BlPy5zcGxpdChcIiBcIiksXG4gICAgaWRUb2tlbjogZGF0YS5pZF90b2tlblxuICB9O1xuICBpZiAoZGF0YS5leHBpcmVzX2luKSB7XG4gICAgY29uc3Qgbm93ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gbmV3IERhdGUoXG4gICAgICBub3cuZ2V0VGltZSgpICsgZGF0YS5leHBpcmVzX2luICogMWUzXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVDbGllbnRDcmVkZW50aWFsc1Rva2VuUmVxdWVzdCh7XG4gIG9wdGlvbnMsXG4gIHNjb3BlLFxuICBhdXRoZW50aWNhdGlvbixcbiAgcmVzb3VyY2Vcbn0pIHtcbiAgY29uc3QgYm9keSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTtcbiAgY29uc3QgaGVhZGVycyA9IHtcbiAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgIGFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgfTtcbiAgYm9keS5zZXQoXCJncmFudF90eXBlXCIsIFwiY2xpZW50X2NyZWRlbnRpYWxzXCIpO1xuICBzY29wZSAmJiBib2R5LnNldChcInNjb3BlXCIsIHNjb3BlKTtcbiAgaWYgKHJlc291cmNlKSB7XG4gICAgaWYgKHR5cGVvZiByZXNvdXJjZSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgYm9keS5hcHBlbmQoXCJyZXNvdXJjZVwiLCByZXNvdXJjZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgX3Jlc291cmNlIG9mIHJlc291cmNlKSB7XG4gICAgICAgIGJvZHkuYXBwZW5kKFwicmVzb3VyY2VcIiwgX3Jlc291cmNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGF1dGhlbnRpY2F0aW9uID09PSBcImJhc2ljXCIpIHtcbiAgICBjb25zdCBwcmltYXJ5Q2xpZW50SWQgPSBBcnJheS5pc0FycmF5KG9wdGlvbnMuY2xpZW50SWQpID8gb3B0aW9ucy5jbGllbnRJZFswXSA6IG9wdGlvbnMuY2xpZW50SWQ7XG4gICAgY29uc3QgZW5jb2RlZENyZWRlbnRpYWxzID0gYmFzZTY0VXJsLmVuY29kZShcbiAgICAgIGAke3ByaW1hcnlDbGllbnRJZH06JHtvcHRpb25zLmNsaWVudFNlY3JldH1gXG4gICAgKTtcbiAgICBoZWFkZXJzW1wiYXV0aG9yaXphdGlvblwiXSA9IGBCYXNpYyAke2VuY29kZWRDcmVkZW50aWFsc31gO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IHByaW1hcnlDbGllbnRJZCA9IEFycmF5LmlzQXJyYXkob3B0aW9ucy5jbGllbnRJZCkgPyBvcHRpb25zLmNsaWVudElkWzBdIDogb3B0aW9ucy5jbGllbnRJZDtcbiAgICBib2R5LnNldChcImNsaWVudF9pZFwiLCBwcmltYXJ5Q2xpZW50SWQpO1xuICAgIGJvZHkuc2V0KFwiY2xpZW50X3NlY3JldFwiLCBvcHRpb25zLmNsaWVudFNlY3JldCk7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBib2R5LFxuICAgIGhlYWRlcnNcbiAgfTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNsaWVudENyZWRlbnRpYWxzVG9rZW4oe1xuICBvcHRpb25zLFxuICB0b2tlbkVuZHBvaW50LFxuICBzY29wZSxcbiAgYXV0aGVudGljYXRpb24sXG4gIHJlc291cmNlXG59KSB7XG4gIGNvbnN0IHsgYm9keSwgaGVhZGVycyB9ID0gY3JlYXRlQ2xpZW50Q3JlZGVudGlhbHNUb2tlblJlcXVlc3Qoe1xuICAgIG9wdGlvbnMsXG4gICAgc2NvcGUsXG4gICAgYXV0aGVudGljYXRpb24sXG4gICAgcmVzb3VyY2VcbiAgfSk7XG4gIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKHRva2VuRW5kcG9pbnQsIHtcbiAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgIGJvZHksXG4gICAgaGVhZGVyc1xuICB9KTtcbiAgaWYgKGVycm9yKSB7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbiAgY29uc3QgdG9rZW5zID0ge1xuICAgIGFjY2Vzc1Rva2VuOiBkYXRhLmFjY2Vzc190b2tlbixcbiAgICB0b2tlblR5cGU6IGRhdGEudG9rZW5fdHlwZSxcbiAgICBzY29wZXM6IGRhdGEuc2NvcGU/LnNwbGl0KFwiIFwiKVxuICB9O1xuICBpZiAoZGF0YS5leHBpcmVzX2luKSB7XG4gICAgY29uc3Qgbm93ID0gLyogQF9fUFVSRV9fICovIG5ldyBEYXRlKCk7XG4gICAgdG9rZW5zLmFjY2Vzc1Rva2VuRXhwaXJlc0F0ID0gbmV3IERhdGUoXG4gICAgICBub3cuZ2V0VGltZSgpICsgZGF0YS5leHBpcmVzX2luICogMWUzXG4gICAgKTtcbiAgfVxuICByZXR1cm4gdG9rZW5zO1xufVxuXG5leHBvcnQgeyBjbGllbnRDcmVkZW50aWFsc1Rva2VuLCBjcmVhdGVBdXRob3JpemF0aW9uQ29kZVJlcXVlc3QsIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwsIGNyZWF0ZUNsaWVudENyZWRlbnRpYWxzVG9rZW5SZXF1ZXN0LCBjcmVhdGVSZWZyZXNoQWNjZXNzVG9rZW5SZXF1ZXN0LCBnZW5lcmF0ZUNvZGVDaGFsbGVuZ2UsIGdldE9BdXRoMlRva2VucywgcmVmcmVzaEFjY2Vzc1Rva2VuLCB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlLCB2YWxpZGF0ZVRva2VuIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs":
/*!************************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/social-providers/index.mjs ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SocialProviderListEnum: () => (/* binding */ SocialProviderListEnum),\n/* harmony export */   apple: () => (/* binding */ apple),\n/* harmony export */   atlassian: () => (/* binding */ atlassian),\n/* harmony export */   cognito: () => (/* binding */ cognito),\n/* harmony export */   discord: () => (/* binding */ discord),\n/* harmony export */   dropbox: () => (/* binding */ dropbox),\n/* harmony export */   facebook: () => (/* binding */ facebook),\n/* harmony export */   figma: () => (/* binding */ figma),\n/* harmony export */   getApplePublicKey: () => (/* binding */ getApplePublicKey),\n/* harmony export */   getCognitoPublicKey: () => (/* binding */ getCognitoPublicKey),\n/* harmony export */   github: () => (/* binding */ github),\n/* harmony export */   gitlab: () => (/* binding */ gitlab),\n/* harmony export */   google: () => (/* binding */ google),\n/* harmony export */   huggingface: () => (/* binding */ huggingface),\n/* harmony export */   kakao: () => (/* binding */ kakao),\n/* harmony export */   kick: () => (/* binding */ kick),\n/* harmony export */   line: () => (/* binding */ line),\n/* harmony export */   linear: () => (/* binding */ linear),\n/* harmony export */   linkedin: () => (/* binding */ linkedin),\n/* harmony export */   microsoft: () => (/* binding */ microsoft),\n/* harmony export */   naver: () => (/* binding */ naver),\n/* harmony export */   notion: () => (/* binding */ notion),\n/* harmony export */   paypal: () => (/* binding */ paypal),\n/* harmony export */   reddit: () => (/* binding */ reddit),\n/* harmony export */   roblox: () => (/* binding */ roblox),\n/* harmony export */   salesforce: () => (/* binding */ salesforce),\n/* harmony export */   slack: () => (/* binding */ slack),\n/* harmony export */   socialProviderList: () => (/* binding */ socialProviderList),\n/* harmony export */   socialProviders: () => (/* binding */ socialProviders),\n/* harmony export */   spotify: () => (/* binding */ spotify),\n/* harmony export */   tiktok: () => (/* binding */ tiktok),\n/* harmony export */   twitch: () => (/* binding */ twitch),\n/* harmony export */   twitter: () => (/* binding */ twitter),\n/* harmony export */   vk: () => (/* binding */ vk),\n/* harmony export */   zoom: () => (/* binding */ zoom)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v4/classic/external.js\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n/* harmony import */ var better_call__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! better-call */ \"(rsc)/./node_modules/better-call/dist/index.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/util/decode_protected_header.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwt/verify.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/util/decode_jwt.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/key/import.js\");\n/* harmony import */ var jose__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! jose */ \"(rsc)/./node_modules/jose/dist/webapi/jwks/remote.js\");\n/* harmony import */ var _better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/core/oauth2 */ \"(rsc)/./node_modules/@better-auth/core/dist/oauth2/index.mjs\");\n/* harmony import */ var _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../error/index.mjs */ \"(rsc)/./node_modules/@better-auth/core/dist/error/index.mjs\");\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_auth_core_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @better-auth/core/utils */ \"(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\");\n\n\n\n\n\n\n\n\n\n\nconst apple = (options) => {\n  const tokenEndpoint = \"https://appleid.apple.com/auth/token\";\n  return {\n    id: \"apple\",\n    name: \"Apple\",\n    async createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scope = options.disableDefaultScope ? [] : [\"email\", \"name\"];\n      options.scope && _scope.push(...options.scope);\n      scopes && _scope.push(...scopes);\n      const url = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"apple\",\n        options,\n        authorizationEndpoint: \"https://appleid.apple.com/auth/authorize\",\n        scopes: _scope,\n        state,\n        redirectURI,\n        responseMode: \"form_post\",\n        responseType: \"code id_token\"\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const decodedHeader = (0,jose__WEBPACK_IMPORTED_MODULE_7__.decodeProtectedHeader)(token);\n      const { kid, alg: jwtAlg } = decodedHeader;\n      if (!kid || !jwtAlg) return false;\n      const publicKey = await getApplePublicKey(kid);\n      const { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(token, publicKey, {\n        algorithms: [jwtAlg],\n        issuer: \"https://appleid.apple.com\",\n        audience: options.audience && options.audience.length ? options.audience : options.appBundleIdentifier ? options.appBundleIdentifier : options.clientId,\n        maxTokenAge: \"1h\"\n      });\n      [\"email_verified\", \"is_private_email\"].forEach((field) => {\n        if (jwtClaims[field] !== void 0) {\n          jwtClaims[field] = Boolean(jwtClaims[field]);\n        }\n      });\n      if (nonce && jwtClaims.nonce !== nonce) {\n        return false;\n      }\n      return !!jwtClaims;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://appleid.apple.com/auth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n      if (!profile) {\n        return null;\n      }\n      const name = token.user ? `${token.user.name?.firstName} ${token.user.name?.lastName}` : profile.name || profile.email;\n      const emailVerified = typeof profile.email_verified === \"boolean\" ? profile.email_verified : profile.email_verified === \"true\";\n      const enrichedProfile = {\n        ...profile,\n        name\n      };\n      const userMap = await options.mapProfileToUser?.(enrichedProfile);\n      return {\n        user: {\n          id: profile.sub,\n          name: enrichedProfile.name,\n          emailVerified,\n          email: profile.email,\n          ...userMap\n        },\n        data: enrichedProfile\n      };\n    },\n    options\n  };\n};\nconst getApplePublicKey = async (kid) => {\n  const APPLE_BASE_URL = \"https://appleid.apple.com\";\n  const JWKS_APPLE_URI = \"/auth/keys\";\n  const { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(`${APPLE_BASE_URL}${JWKS_APPLE_URI}`);\n  if (!data?.keys) {\n    throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n      message: \"Keys not found\"\n    });\n  }\n  const jwk = data.keys.find((key) => key.kid === kid);\n  if (!jwk) {\n    throw new Error(`JWK with kid ${kid} not found`);\n  }\n  return await (0,jose__WEBPACK_IMPORTED_MODULE_10__.importJWK)(jwk, jwk.alg);\n};\n\nconst atlassian = (options) => {\n  return {\n    id: \"atlassian\",\n    name: \"Atlassian\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Client Id and Secret are required for Atlassian\");\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"codeVerifier is required for Atlassian\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"read:jira-user\", \"offline_access\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"atlassian\",\n        options,\n        authorizationEndpoint: \"https://auth.atlassian.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        additionalParams: {\n          audience: \"api.atlassian.com\"\n        },\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        return null;\n      }\n      try {\n        const { data: profile } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://api.atlassian.com/me\", {\n          headers: { Authorization: `Bearer ${token.accessToken}` }\n        });\n        if (!profile) return null;\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.account_id,\n            name: profile.name,\n            email: profile.email,\n            image: profile.picture,\n            emailVerified: false,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst cognito = (options) => {\n  if (!options.domain || !options.region || !options.userPoolId) {\n    _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n      \"Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options.\"\n    );\n    throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"DOMAIN_AND_REGION_REQUIRED\");\n  }\n  const cleanDomain = options.domain.replace(/^https?:\\/\\//, \"\");\n  const authorizationEndpoint = `https://${cleanDomain}/oauth2/authorize`;\n  const tokenEndpoint = `https://${cleanDomain}/oauth2/token`;\n  const userInfoEndpoint = `https://${cleanDomain}/oauth2/userinfo`;\n  return {\n    id: \"cognito\",\n    name: \"Cognito\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n          \"ClientId is required for Amazon Cognito. Make sure to provide them in the options.\"\n        );\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (options.requireClientSecret && !options.clientSecret) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n          \"Client Secret is required when requireClientSecret is true. Make sure to provide it in the options.\"\n        );\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_SECRET_REQUIRED\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"cognito\",\n        options: {\n          ...options\n        },\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const decodedHeader = (0,jose__WEBPACK_IMPORTED_MODULE_7__.decodeProtectedHeader)(token);\n        const { kid, alg: jwtAlg } = decodedHeader;\n        if (!kid || !jwtAlg) return false;\n        const publicKey = await getCognitoPublicKey(\n          kid,\n          options.region,\n          options.userPoolId\n        );\n        const expectedIssuer = `https://cognito-idp.${options.region}.amazonaws.com/${options.userPoolId}`;\n        const { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(token, publicKey, {\n          algorithms: [jwtAlg],\n          issuer: expectedIssuer,\n          audience: options.clientId,\n          maxTokenAge: \"1h\"\n        });\n        if (nonce && jwtClaims.nonce !== nonce) {\n          return false;\n        }\n        return true;\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to verify ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken) {\n        try {\n          const profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n          if (!profile) {\n            return null;\n          }\n          const name = profile.name || profile.given_name || profile.username || profile.email;\n          const enrichedProfile = {\n            ...profile,\n            name\n          };\n          const userMap = await options.mapProfileToUser?.(enrichedProfile);\n          return {\n            user: {\n              id: profile.sub,\n              name: enrichedProfile.name,\n              email: profile.email,\n              image: profile.picture,\n              emailVerified: profile.email_verified,\n              ...userMap\n            },\n            data: enrichedProfile\n          };\n        } catch (error) {\n          _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to decode ID token:\", error);\n        }\n      }\n      if (token.accessToken) {\n        try {\n          const { data: userInfo } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n            userInfoEndpoint,\n            {\n              headers: {\n                Authorization: `Bearer ${token.accessToken}`\n              }\n            }\n          );\n          if (userInfo) {\n            const userMap = await options.mapProfileToUser?.(userInfo);\n            return {\n              user: {\n                id: userInfo.sub,\n                name: userInfo.name || userInfo.given_name || userInfo.username,\n                email: userInfo.email,\n                image: userInfo.picture,\n                emailVerified: userInfo.email_verified,\n                ...userMap\n              },\n              data: userInfo\n            };\n          }\n        } catch (error) {\n          _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from Cognito:\", error);\n        }\n      }\n      return null;\n    },\n    options\n  };\n};\nconst getCognitoPublicKey = async (kid, region, userPoolId) => {\n  const COGNITO_JWKS_URI = `https://cognito-idp.${region}.amazonaws.com/${userPoolId}/.well-known/jwks.json`;\n  try {\n    const { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(COGNITO_JWKS_URI);\n    if (!data?.keys) {\n      throw new better_call__WEBPACK_IMPORTED_MODULE_1__.APIError(\"BAD_REQUEST\", {\n        message: \"Keys not found\"\n      });\n    }\n    const jwk = data.keys.find((key) => key.kid === kid);\n    if (!jwk) {\n      throw new Error(`JWK with kid ${kid} not found`);\n    }\n    return await (0,jose__WEBPACK_IMPORTED_MODULE_10__.importJWK)(jwk, jwk.alg);\n  } catch (error) {\n    _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch Cognito public key:\", error);\n    throw error;\n  }\n};\n\nconst discord = (options) => {\n  return {\n    id: \"discord\",\n    name: \"Discord\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identify\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      const hasBotScope = _scopes.includes(\"bot\");\n      const permissionsParam = hasBotScope && options.permissions !== void 0 ? `&permissions=${options.permissions}` : \"\";\n      return new URL(\n        `https://discord.com/api/oauth2/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"none\"}${permissionsParam}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://discord.com/api/users/@me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (profile.avatar === null) {\n        const defaultAvatarNumber = profile.discriminator === \"0\" ? Number(BigInt(profile.id) >> BigInt(22)) % 6 : parseInt(profile.discriminator) % 5;\n        profile.image_url = `https://cdn.discordapp.com/embed/avatars/${defaultAvatarNumber}.png`;\n      } else {\n        const format = profile.avatar.startsWith(\"a_\") ? \"gif\" : \"png\";\n        profile.image_url = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.${format}`;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.global_name || profile.username || \"\",\n          email: profile.email,\n          emailVerified: profile.verified,\n          image: profile.image_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst facebook = (options) => {\n  return {\n    id: \"facebook\",\n    name: \"Facebook\",\n    async createAuthorizationURL({ state, scopes, redirectURI, loginHint }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"public_profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"facebook\",\n        options,\n        authorizationEndpoint: \"https://www.facebook.com/v21.0/dialog/oauth\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: options.configId ? {\n          config_id: options.configId\n        } : {}\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://graph.facebook.com/oauth/access_token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      if (token.split(\".\").length === 3) {\n        try {\n          const { payload: jwtClaims } = await (0,jose__WEBPACK_IMPORTED_MODULE_8__.jwtVerify)(\n            token,\n            (0,jose__WEBPACK_IMPORTED_MODULE_11__.createRemoteJWKSet)(\n              // https://developers.facebook.com/docs/facebook-login/limited-login/token/#jwks\n              new URL(\n                \"https://limited.facebook.com/.well-known/oauth/openid/jwks/\"\n              )\n            ),\n            {\n              algorithms: [\"RS256\"],\n              audience: options.clientId,\n              issuer: \"https://www.facebook.com\"\n            }\n          );\n          if (nonce && jwtClaims.nonce !== nonce) {\n            return false;\n          }\n          return !!jwtClaims;\n        } catch (error) {\n          return false;\n        }\n      }\n      return true;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://graph.facebook.com/v18.0/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken && token.idToken.split(\".\").length === 3) {\n        const profile2 = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n        const user = {\n          id: profile2.sub,\n          name: profile2.name,\n          email: profile2.email,\n          picture: {\n            data: {\n              url: profile2.picture,\n              height: 100,\n              width: 100,\n              is_silhouette: false\n            }\n          }\n        };\n        const userMap2 = await options.mapProfileToUser?.({\n          ...user,\n          email_verified: true\n        });\n        return {\n          user: {\n            ...user,\n            emailVerified: true,\n            ...userMap2\n          },\n          data: profile2\n        };\n      }\n      const fields = [\n        \"id\",\n        \"name\",\n        \"email\",\n        \"picture\",\n        ...options?.fields || []\n      ];\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://graph.facebook.com/me?fields=\" + fields.join(\",\"),\n        {\n          auth: {\n            type: \"Bearer\",\n            token: token.accessToken\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.picture.data.url,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst figma = (options) => {\n  return {\n    id: \"figma\",\n    name: \"Figma\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n          \"Client Id and Client Secret are required for Figma. Make sure to provide them in the options.\"\n        );\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"codeVerifier is required for Figma\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"file_read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"figma\",\n        options,\n        authorizationEndpoint: \"https://www.figma.com/oauth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: profile } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n          \"https://api.figma.com/v1/me\",\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!profile) {\n          _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user from Figma\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.id,\n            name: profile.handle,\n            email: profile.email,\n            image: profile.img_url,\n            emailVerified: !!profile.email,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst github = (options) => {\n  const tokenEndpoint = \"https://github.com/login/oauth/access_token\";\n  return {\n    id: \"github\",\n    name: \"GitHub\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read:user\", \"user:email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"github\",\n        options,\n        authorizationEndpoint: \"https://github.com/login/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://github.com/login/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.github.com/user\",\n        {\n          headers: {\n            \"User-Agent\": \"better-auth\",\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const { data: emails } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://api.github.com/user/emails\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"User-Agent\": \"better-auth\"\n        }\n      });\n      if (!profile.email && emails) {\n        profile.email = (emails.find((e) => e.primary) ?? emails[0])?.email;\n      }\n      const emailVerified = emails?.find((e) => e.email === profile.email)?.verified ?? false;\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name || profile.login,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst google = (options) => {\n  return {\n    id: \"google\",\n    name: \"Google\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint,\n      display\n    }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n          \"Client Id and Client Secret is required for Google. Make sure to provide them in the options.\"\n        );\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"codeVerifier is required for Google\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"profile\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"google\",\n        options,\n        authorizationEndpoint: \"https://accounts.google.com/o/oauth2/auth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt,\n        accessType: options.accessType,\n        display: display || options.display,\n        loginHint,\n        hd: options.hd,\n        additionalParams: {\n          include_granted_scopes: \"true\"\n        }\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://oauth2.googleapis.com/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.googleapis.com/oauth2/v4/token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const googlePublicKeyUrl = `https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${token}`;\n      const { data: tokenInfo } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(googlePublicKeyUrl);\n      if (!tokenInfo) {\n        return false;\n      }\n      const isValid = tokenInfo.aud === options.clientId && (tokenInfo.iss === \"https://accounts.google.com\" || tokenInfo.iss === \"accounts.google.com\");\n      return isValid;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: user.email_verified,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    options\n  };\n};\n\nconst kick = (options) => {\n  return {\n    id: \"kick\",\n    name: \"Kick\",\n    createAuthorizationURL({ state, scopes, redirectURI, codeVerifier }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"kick\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.kick.com/oauth/authorize\",\n        scopes: _scopes,\n        codeVerifier,\n        state\n      });\n    },\n    async validateAuthorizationCode({ code, redirectURI, codeVerifier }) {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.kick.com/oauth/token\",\n        codeVerifier\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://api.kick.com/public/v1/users\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      if (error) {\n        return null;\n      }\n      const profile = data.data[0];\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user_id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.profile_picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst huggingface = (options) => {\n  return {\n    id: \"huggingface\",\n    name: \"Hugging Face\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"huggingface\",\n        options,\n        authorizationEndpoint: \"https://huggingface.co/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://huggingface.co/oauth/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name || profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified ?? false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst microsoft = (options) => {\n  const tenant = options.tenantId || \"common\";\n  const authority = options.authority || \"https://login.microsoftonline.com\";\n  const authorizationEndpoint = `${authority}/${tenant}/oauth2/v2.0/authorize`;\n  const tokenEndpoint = `${authority}/${tenant}/oauth2/v2.0/token`;\n  return {\n    id: \"microsoft\",\n    name: \"Microsoft EntraID\",\n    createAuthorizationURL(data) {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      data.scopes && scopes.push(...data.scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"microsoft\",\n        options,\n        authorizationEndpoint,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        scopes,\n        redirectURI: data.redirectURI,\n        prompt: options.prompt,\n        loginHint: data.loginHint\n      });\n    },\n    validateAuthorizationCode({ code, codeVerifier, redirectURI }) {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n      const profilePhotoSize = options.profilePhotoSize || 48;\n      await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        `https://graph.microsoft.com/v1.0/me/photos/${profilePhotoSize}x${profilePhotoSize}/$value`,\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          async onResponse(context) {\n            if (options.disableProfilePhoto || !context.response.ok) {\n              return;\n            }\n            try {\n              const response = context.response.clone();\n              const pictureBuffer = await response.arrayBuffer();\n              const pictureBase64 = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__.base64.encode(pictureBuffer);\n              user.picture = `data:image/jpeg;base64, ${pictureBase64}`;\n            } catch (e) {\n              _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n                e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n                e\n              );\n            }\n          }\n        }\n      );\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        extraParams: {\n          scope: scopes.join(\" \")\n          // Include the scopes in request to microsoft\n        },\n        tokenEndpoint\n      });\n    },\n    options\n  };\n};\n\nconst slack = (options) => {\n  return {\n    id: \"slack\",\n    name: \"Slack\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      const url = new URL(\"https://slack.com/openid/connect/authorize\");\n      url.searchParams.set(\"scope\", _scopes.join(\" \"));\n      url.searchParams.set(\"response_type\", \"code\");\n      url.searchParams.set(\"client_id\", options.clientId);\n      url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n      url.searchParams.set(\"state\", state);\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://slack.com/api/openid.connect.userInfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile[\"https://slack.com/user_id\"],\n          name: profile.name || \"\",\n          email: profile.email,\n          emailVerified: profile.email_verified,\n          image: profile.picture || profile[\"https://slack.com/user_image_512\"],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst notion = (options) => {\n  const tokenEndpoint = \"https://api.notion.com/v1/oauth/token\";\n  return {\n    id: \"notion\",\n    name: \"Notion\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"notion\",\n        options,\n        authorizationEndpoint: \"https://api.notion.com/v1/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: {\n          owner: \"user\"\n        }\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint,\n        authentication: \"basic\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://api.notion.com/v1/users/me\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"Notion-Version\": \"2022-06-28\"\n        }\n      });\n      if (error || !profile) {\n        return null;\n      }\n      const userProfile = profile.bot?.owner?.user;\n      if (!userProfile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(userProfile);\n      return {\n        user: {\n          id: userProfile.id,\n          name: userProfile.name || \"Notion User\",\n          email: userProfile.person?.email || null,\n          image: userProfile.avatar_url,\n          emailVerified: !!userProfile.person?.email,\n          ...userMap\n        },\n        data: userProfile\n      };\n    },\n    options\n  };\n};\n\nconst spotify = (options) => {\n  return {\n    id: \"spotify\",\n    name: \"Spotify\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user-read-email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"spotify\",\n        options,\n        authorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.spotify.com/v1/me\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          email: profile.email,\n          image: profile.images[0]?.url,\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitch = (options) => {\n  return {\n    id: \"twitch\",\n    name: \"Twitch\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read:email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"twitch\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.twitch.tv/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        claims: options.claims || [\n          \"email\",\n          \"email_verified\",\n          \"preferred_username\",\n          \"picture\"\n        ]\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const idToken = token.idToken;\n      if (!idToken) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"No idToken found in token\");\n        return null;\n      }\n      const profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(idToken);\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitter = (options) => {\n  return {\n    id: \"twitter\",\n    name: \"Twitter\",\n    createAuthorizationURL(data) {\n      const _scopes = options.disableDefaultScope ? [] : [\"users.read\", \"tweet.read\", \"offline.access\", \"users.email\"];\n      options.scope && _scopes.push(...options.scope);\n      data.scopes && _scopes.push(...data.scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"twitter\",\n        options,\n        authorizationEndpoint: \"https://x.com/i/oauth2/authorize\",\n        scopes: _scopes,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        redirectURI: data.redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        authentication: \"basic\",\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error: profileError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.x.com/2/users/me?user.fields=profile_image_url\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (profileError) {\n        return null;\n      }\n      const { data: emailData, error: emailError } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\"https://api.x.com/2/users/me?user.fields=confirmed_email\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      let emailVerified = false;\n      if (!emailError && emailData?.data?.confirmed_email) {\n        profile.data.email = emailData.data.confirmed_email;\n        emailVerified = true;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.data.id,\n          name: profile.data.name,\n          email: profile.data.email || profile.data.username || null,\n          image: profile.data.profile_image_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst dropbox = (options) => {\n  const tokenEndpoint = \"https://api.dropboxapi.com/oauth2/token\";\n  return {\n    id: \"dropbox\",\n    name: \"Dropbox\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_info.read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const additionalParams = {};\n      if (options.accessType) {\n        additionalParams.token_access_type = options.accessType;\n      }\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"dropbox\",\n        options,\n        authorizationEndpoint: \"https://www.dropbox.com/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        additionalParams\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://api.dropbox.com/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.dropboxapi.com/2/users/get_current_account\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.account_id,\n          name: profile.name?.display_name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.profile_photo_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst linear = (options) => {\n  const tokenEndpoint = \"https://api.linear.app/oauth/token\";\n  return {\n    id: \"linear\",\n    name: \"Linear\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"linear\",\n        options,\n        authorizationEndpoint: \"https://linear.app/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.linear.app/graphql\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          body: JSON.stringify({\n            query: `\n\t\t\t\t\t\t\tquery {\n\t\t\t\t\t\t\t\tviewer {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\tavatarUrl\n\t\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`\n          })\n        }\n      );\n      if (error || !profile?.data?.viewer) {\n        return null;\n      }\n      const userData = profile.data.viewer;\n      const userMap = await options.mapProfileToUser?.(userData);\n      return {\n        user: {\n          id: profile.data.viewer.id,\n          name: profile.data.viewer.name,\n          email: profile.data.viewer.email,\n          image: profile.data.viewer.avatarUrl,\n          emailVerified: true,\n          ...userMap\n        },\n        data: userData\n      };\n    },\n    options\n  };\n};\n\nconst linkedin = (options) => {\n  const authorizationEndpoint = \"https://www.linkedin.com/oauth/v2/authorization\";\n  const tokenEndpoint = \"https://www.linkedin.com/oauth/v2/accessToken\";\n  return {\n    id: \"linkedin\",\n    name: \"Linkedin\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      redirectURI,\n      loginHint\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"linkedin\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        loginHint,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.linkedin.com/v2/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.picture,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst cleanDoubleSlashes = (input = \"\") => {\n  return input.split(\"://\").map((str) => str.replace(/\\/{2,}/g, \"/\")).join(\"://\");\n};\nconst issuerToEndpoints = (issuer) => {\n  let baseUrl = issuer || \"https://gitlab.com\";\n  return {\n    authorizationEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/authorize`),\n    tokenEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/token`),\n    userinfoEndpoint: cleanDoubleSlashes(`${baseUrl}/api/v4/user`)\n  };\n};\nconst gitlab = (options) => {\n  const { authorizationEndpoint, tokenEndpoint, userinfoEndpoint } = issuerToEndpoints(options.issuer);\n  const issuerId = \"gitlab\";\n  const issuerName = \"Gitlab\";\n  return {\n    id: issuerId,\n    name: issuerName,\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      loginHint,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"read_user\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: issuerId,\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        codeVerifier,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        userinfoEndpoint,\n        { headers: { authorization: `Bearer ${token.accessToken}` } }\n      );\n      if (error || profile.state !== \"active\" || profile.locked) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst tiktok = (options) => {\n  return {\n    id: \"tiktok\",\n    name: \"TikTok\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user.info.profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://www.tiktok.com/v2/auth/authorize?scope=${_scopes.join(\n          \",\"\n        )}&response_type=code&client_key=${options.clientKey}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options: {\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\",\n        authentication: \"post\",\n        extraParams: {\n          client_key: options.clientKey\n        }\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const fields = [\n        \"open_id\",\n        \"avatar_large_url\",\n        \"display_name\",\n        \"username\"\n      ];\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        `https://open.tiktokapis.com/v2/user/info/?fields=${fields.join(\",\")}`,\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      return {\n        user: {\n          email: profile.data.user.email || profile.data.user.username,\n          id: profile.data.user.open_id,\n          name: profile.data.user.display_name || profile.data.user.username,\n          image: profile.data.user.avatar_large_url,\n          /** @note Tiktok does not provide emailVerified or even email*/\n          emailVerified: profile.data.user.email ? true : false\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst reddit = (options) => {\n  return {\n    id: \"reddit\",\n    name: \"Reddit\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identity\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"reddit\",\n        options,\n        authorizationEndpoint: \"https://www.reddit.com/api/v1/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        duration: options.duration\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: options.redirectURI || redirectURI\n      });\n      const headers = {\n        \"content-type\": \"application/x-www-form-urlencoded\",\n        accept: \"text/plain\",\n        \"user-agent\": \"better-auth\",\n        Authorization: `Basic ${_better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__.base64.encode(\n          `${options.clientId}:${options.clientSecret}`\n        )}`\n      };\n      const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://www.reddit.com/api/v1/access_token\",\n        {\n          method: \"POST\",\n          headers,\n          body: body.toString()\n        }\n      );\n      if (error) {\n        throw error;\n      }\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.getOAuth2Tokens)(data);\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://www.reddit.com/api/v1/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://oauth.reddit.com/api/v1/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`,\n            \"User-Agent\": \"better-auth\"\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.oauth_client_id,\n          emailVerified: profile.has_verified_email,\n          image: profile.icon_img?.split(\"?\")[0],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst roblox = (options) => {\n  return {\n    id: \"roblox\",\n    name: \"Roblox\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://apis.roblox.com/oauth/v1/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"select_account consent\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\",\n        authentication: \"post\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://apis.roblox.com/oauth/v1/userinfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.nickname || profile.preferred_username || \"\",\n          image: profile.picture,\n          email: profile.preferred_username || null,\n          // Roblox does not provide email\n          emailVerified: true,\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    },\n    options\n  };\n};\n\nconst salesforce = (options) => {\n  const environment = options.environment ?? \"production\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/authorize` : isSandbox ? \"https://test.salesforce.com/services/oauth2/authorize\" : \"https://login.salesforce.com/services/oauth2/authorize\";\n  const tokenEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/token` : isSandbox ? \"https://test.salesforce.com/services/oauth2/token\" : \"https://login.salesforce.com/services/oauth2/token\";\n  const userInfoEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/userinfo` : isSandbox ? \"https://test.salesforce.com/services/oauth2/userinfo\" : \"https://login.salesforce.com/services/oauth2/userinfo\";\n  return {\n    id: \"salesforce\",\n    name: \"Salesforce\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n          \"Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options.\"\n        );\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"codeVerifier is required for Salesforce\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"email\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"salesforce\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: user } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n          userInfoEndpoint,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!user) {\n          _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from Salesforce\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(user);\n        return {\n          user: {\n            id: user.user_id,\n            name: user.name,\n            email: user.email,\n            image: user.photos?.picture || user.photos?.thumbnail,\n            emailVerified: user.email_verified ?? false,\n            ...userMap\n          },\n          data: user\n        };\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from Salesforce:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst vk = (options) => {\n  return {\n    id: \"vk\",\n    name: \"VK\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"phone\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const authorizationEndpoint = \"https://id.vk.com/authorize\";\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"vk\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier\n      });\n    },\n    validateAuthorizationCode: async ({\n      code,\n      codeVerifier,\n      redirectURI,\n      deviceId\n    }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        deviceId,\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    async getUserInfo(data) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(data);\n      }\n      if (!data.accessToken) {\n        return null;\n      }\n      const formBody = new URLSearchParams({\n        access_token: data.accessToken,\n        client_id: options.clientId\n      }).toString();\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://id.vk.com/oauth2/user_info\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: formBody\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (!profile.user.email) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user.user_id,\n          first_name: profile.user.first_name,\n          last_name: profile.user.last_name,\n          email: profile.user.email,\n          image: profile.user.avatar,\n          /** @note VK does not provide emailVerified*/\n          emailVerified: !!profile.user.email,\n          birthday: profile.user.birthday,\n          sex: profile.user.sex,\n          name: `${profile.user.first_name} ${profile.user.last_name}`,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst zoom = (userOptions) => {\n  const options = {\n    pkce: true,\n    ...userOptions\n  };\n  return {\n    id: \"zoom\",\n    name: \"Zoom\",\n    createAuthorizationURL: async ({ state, redirectURI, codeVerifier }) => {\n      const params = new URLSearchParams({\n        response_type: \"code\",\n        redirect_uri: options.redirectURI ? options.redirectURI : redirectURI,\n        client_id: options.clientId,\n        state\n      });\n      if (options.pkce) {\n        const codeChallenge = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.generateCodeChallenge)(codeVerifier);\n        params.set(\"code_challenge_method\", \"S256\");\n        params.set(\"code_challenge\", codeChallenge);\n      }\n      const url = new URL(\"https://zoom.us/oauth/authorize\");\n      url.search = params.toString();\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        codeVerifier,\n        options,\n        tokenEndpoint: \"https://zoom.us/oauth/token\",\n        authentication: \"post\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://api.zoom.us/v2/users/me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          image: profile.pic_url,\n          email: profile.email,\n          emailVerified: Boolean(profile.verified),\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    }\n  };\n};\n\nconst kakao = (options) => {\n  return {\n    id: \"kakao\",\n    name: \"Kakao\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_email\", \"profile_image\", \"profile_nickname\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"kakao\",\n        options,\n        authorizationEndpoint: \"https://kauth.kakao.com/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://kapi.kakao.com/v2/user/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const account = profile.kakao_account || {};\n      const kakaoProfile = account.profile || {};\n      const user = {\n        id: String(profile.id),\n        name: kakaoProfile.nickname || account.name || void 0,\n        email: account.email,\n        image: kakaoProfile.profile_image_url || kakaoProfile.thumbnail_image_url,\n        emailVerified: !!account.is_email_valid && !!account.is_email_verified,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst naver = (options) => {\n  return {\n    id: \"naver\",\n    name: \"Naver\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"naver\",\n        options,\n        authorizationEndpoint: \"https://nid.naver.com/oauth2.0/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        \"https://openapi.naver.com/v1/nid/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile || profile.resultcode !== \"00\") {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const res = profile.response || {};\n      const user = {\n        id: res.id,\n        name: res.name || res.nickname,\n        email: res.email,\n        image: res.profile_image,\n        emailVerified: false,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst line = (options) => {\n  const authorizationEndpoint = \"https://access.line.me/oauth2/v2.1/authorize\";\n  const tokenEndpoint = \"https://api.line.me/oauth2/v2.1/token\";\n  const userInfoEndpoint = \"https://api.line.me/oauth2/v2.1/userinfo\";\n  const verifyIdTokenEndpoint = \"https://api.line.me/oauth2/v2.1/verify\";\n  return {\n    id: \"line\",\n    name: \"LINE\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint\n    }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"line\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.validateAuthorizationCode)({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.refreshAccessToken)({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const body = new URLSearchParams();\n      body.set(\"id_token\", token);\n      body.set(\"client_id\", options.clientId);\n      if (nonce) body.set(\"nonce\", nonce);\n      const { data, error } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n        verifyIdTokenEndpoint,\n        {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n          },\n          body\n        }\n      );\n      if (error || !data) {\n        return false;\n      }\n      if (data.aud !== options.clientId) return false;\n      if (nonce && data.nonce && data.nonce !== nonce) return false;\n      return true;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      let profile = null;\n      if (token.idToken) {\n        try {\n          profile = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token.idToken);\n        } catch {\n        }\n      }\n      if (!profile) {\n        const { data } = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(userInfoEndpoint, {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        });\n        profile = data || null;\n      }\n      if (!profile) return null;\n      const userMap = await options.mapProfileToUser?.(profile);\n      const id = profile.sub || profile.userId;\n      const name = profile.name || profile.displayName;\n      const image = profile.picture || profile.pictureUrl || void 0;\n      const email = profile.email;\n      return {\n        user: {\n          id,\n          name,\n          email,\n          image,\n          // LINE does not expose email verification status in ID token/userinfo\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst paypal = (options) => {\n  const environment = options.environment || \"sandbox\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = isSandbox ? \"https://www.sandbox.paypal.com/signin/authorize\" : \"https://www.paypal.com/signin/authorize\";\n  const tokenEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/oauth2/token\" : \"https://api-m.paypal.com/v1/oauth2/token\";\n  const userInfoEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo\" : \"https://api-m.paypal.com/v1/identity/oauth2/userinfo\";\n  return {\n    id: \"paypal\",\n    name: \"PayPal\",\n    async createAuthorizationURL({ state, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\n          \"Client Id and Client Secret is required for PayPal. Make sure to provide them in the options.\"\n        );\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      const _scopes = [];\n      const url = await (0,_better_auth_core_oauth2__WEBPACK_IMPORTED_MODULE_2__.createAuthorizationURL)({\n        id: \"paypal\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const credentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__.base64.encode(\n        `${options.clientId}:${options.clientSecret}`\n      );\n      try {\n        const response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"authorization_code\",\n            code,\n            redirect_uri: redirectURI\n          }).toString()\n        });\n        if (!response.data) {\n          throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"FAILED_TO_GET_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        const result = {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0,\n          idToken: data.id_token\n        };\n        return result;\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"PayPal token exchange failed:\", error);\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"FAILED_TO_GET_ACCESS_TOKEN\");\n      }\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const credentials = _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_5__.base64.encode(\n        `${options.clientId}:${options.clientSecret}`\n      );\n      try {\n        const response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"refresh_token\",\n            refresh_token: refreshToken\n          }).toString()\n        });\n        if (!response.data) {\n          throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        return {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0\n        };\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"PayPal token refresh failed:\", error);\n        throw new _error_index_mjs__WEBPACK_IMPORTED_MODULE_3__.BetterAuthError(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n      }\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const payload = (0,jose__WEBPACK_IMPORTED_MODULE_9__.decodeJwt)(token);\n        return !!payload.sub;\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to verify PayPal ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Access token is required to fetch PayPal user info\");\n        return null;\n      }\n      try {\n        const response = await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_0__.betterFetch)(\n          `${userInfoEndpoint}?schema=paypalv1.1`,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`,\n              Accept: \"application/json\"\n            }\n          }\n        );\n        if (!response.data) {\n          _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from PayPal\");\n          return null;\n        }\n        const userInfo = response.data;\n        const userMap = await options.mapProfileToUser?.(userInfo);\n        const result = {\n          user: {\n            id: userInfo.user_id,\n            name: userInfo.name,\n            email: userInfo.email,\n            image: userInfo.picture,\n            emailVerified: userInfo.email_verified,\n            ...userMap\n          },\n          data: userInfo\n        };\n        return result;\n      } catch (error) {\n        _better_auth_core_env__WEBPACK_IMPORTED_MODULE_4__.logger.error(\"Failed to fetch user info from PayPal:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst socialProviders = {\n  apple,\n  atlassian,\n  cognito,\n  discord,\n  facebook,\n  figma,\n  github,\n  microsoft,\n  google,\n  huggingface,\n  slack,\n  spotify,\n  twitch,\n  twitter,\n  dropbox,\n  kick,\n  linear,\n  linkedin,\n  gitlab,\n  tiktok,\n  reddit,\n  roblox,\n  salesforce,\n  vk,\n  zoom,\n  notion,\n  kakao,\n  naver,\n  line,\n  paypal\n};\nconst socialProviderList = Object.keys(socialProviders);\nconst SocialProviderListEnum = zod__WEBPACK_IMPORTED_MODULE_12__[\"enum\"](socialProviderList).or(zod__WEBPACK_IMPORTED_MODULE_12__.string());\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC9zb2NpYWwtcHJvdmlkZXJzL2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBeUI7QUFDeUI7QUFDWDtBQUMyRDtBQUN1RDtBQUNwRztBQUNOO0FBQ0k7QUFDbEI7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsNEJBQTRCO0FBQy9EO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnRkFBc0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTCx3Q0FBd0MsaUNBQWlDO0FBQ3pFLGFBQWEsbUZBQXlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDJEQUFxQjtBQUNqRCxjQUFjLG1CQUFtQjtBQUNqQztBQUNBO0FBQ0EsY0FBYyxxQkFBcUIsUUFBUSwrQ0FBUztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLGFBQWEsNEVBQWtCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLCtDQUFTO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyw0QkFBNEIsRUFBRSwwQkFBMEI7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsUUFBUSx5REFBTTtBQUNkO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQix5Q0FBTSx3QkFBd0Isd0NBQVE7O0FBRW1TIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC9jb3JlL2Rpc3Qvc29jaWFsLXByb3ZpZGVycy9pbmRleC5tanM/ODQ4MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB6IGZyb20gJ3pvZCc7XG5pbXBvcnQgeyBiZXR0ZXJGZXRjaCB9IGZyb20gJ0BiZXR0ZXItZmV0Y2gvZmV0Y2gnO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tICdiZXR0ZXItY2FsbCc7XG5pbXBvcnQgeyBkZWNvZGVKd3QsIGRlY29kZVByb3RlY3RlZEhlYWRlciwgand0VmVyaWZ5LCBpbXBvcnRKV0ssIGNyZWF0ZVJlbW90ZUpXS1NldCB9IGZyb20gJ2pvc2UnO1xuaW1wb3J0IHsgcmVmcmVzaEFjY2Vzc1Rva2VuLCB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlLCBjcmVhdGVBdXRob3JpemF0aW9uVVJMLCBnZXRPQXV0aDJUb2tlbnMsIGdlbmVyYXRlQ29kZUNoYWxsZW5nZSB9IGZyb20gJ0BiZXR0ZXItYXV0aC9jb3JlL29hdXRoMic7XG5pbXBvcnQgeyBCZXR0ZXJBdXRoRXJyb3IgfSBmcm9tICcuLi9lcnJvci9pbmRleC5tanMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQGJldHRlci1hdXRoL2NvcmUvZW52JztcbmltcG9ydCB7IGJhc2U2NCB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0ICdAYmV0dGVyLWF1dGgvY29yZS91dGlscyc7XG5cbmNvbnN0IGFwcGxlID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcHBsZWlkLmFwcGxlLmNvbS9hdXRoL3Rva2VuXCI7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiYXBwbGVcIixcbiAgICBuYW1lOiBcIkFwcGxlXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZSA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wiZW1haWxcIiwgXCJuYW1lXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGUucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGUucHVzaCguLi5zY29wZXMpO1xuICAgICAgY29uc3QgdXJsID0gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImFwcGxlXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2FwcGxlaWQuYXBwbGUuY29tL2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIHJlc3BvbnNlTW9kZTogXCJmb3JtX3Bvc3RcIixcbiAgICAgICAgcmVzcG9uc2VUeXBlOiBcImNvZGUgaWRfdG9rZW5cIlxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgdmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpIHtcbiAgICAgIGlmIChvcHRpb25zLmRpc2FibGVJZFRva2VuU2lnbkluKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpO1xuICAgICAgfVxuICAgICAgY29uc3QgZGVjb2RlZEhlYWRlciA9IGRlY29kZVByb3RlY3RlZEhlYWRlcih0b2tlbik7XG4gICAgICBjb25zdCB7IGtpZCwgYWxnOiBqd3RBbGcgfSA9IGRlY29kZWRIZWFkZXI7XG4gICAgICBpZiAoIWtpZCB8fCAhand0QWxnKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBwdWJsaWNLZXkgPSBhd2FpdCBnZXRBcHBsZVB1YmxpY0tleShraWQpO1xuICAgICAgY29uc3QgeyBwYXlsb2FkOiBqd3RDbGFpbXMgfSA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgcHVibGljS2V5LCB7XG4gICAgICAgIGFsZ29yaXRobXM6IFtqd3RBbGddLFxuICAgICAgICBpc3N1ZXI6IFwiaHR0cHM6Ly9hcHBsZWlkLmFwcGxlLmNvbVwiLFxuICAgICAgICBhdWRpZW5jZTogb3B0aW9ucy5hdWRpZW5jZSAmJiBvcHRpb25zLmF1ZGllbmNlLmxlbmd0aCA/IG9wdGlvbnMuYXVkaWVuY2UgOiBvcHRpb25zLmFwcEJ1bmRsZUlkZW50aWZpZXIgPyBvcHRpb25zLmFwcEJ1bmRsZUlkZW50aWZpZXIgOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICBtYXhUb2tlbkFnZTogXCIxaFwiXG4gICAgICB9KTtcbiAgICAgIFtcImVtYWlsX3ZlcmlmaWVkXCIsIFwiaXNfcHJpdmF0ZV9lbWFpbFwiXS5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICBpZiAoand0Q2xhaW1zW2ZpZWxkXSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgand0Q2xhaW1zW2ZpZWxkXSA9IEJvb2xlYW4oand0Q2xhaW1zW2ZpZWxkXSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKG5vbmNlICYmIGp3dENsYWltcy5ub25jZSAhPT0gbm9uY2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuICEhand0Q2xhaW1zO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb20vYXV0aC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2VuLmlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCBwcm9maWxlID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuICAgICAgaWYgKCFwcm9maWxlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgbmFtZSA9IHRva2VuLnVzZXIgPyBgJHt0b2tlbi51c2VyLm5hbWU/LmZpcnN0TmFtZX0gJHt0b2tlbi51c2VyLm5hbWU/Lmxhc3ROYW1lfWAgOiBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5lbWFpbDtcbiAgICAgIGNvbnN0IGVtYWlsVmVyaWZpZWQgPSB0eXBlb2YgcHJvZmlsZS5lbWFpbF92ZXJpZmllZCA9PT0gXCJib29sZWFuXCIgPyBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkIDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCA9PT0gXCJ0cnVlXCI7XG4gICAgICBjb25zdCBlbnJpY2hlZFByb2ZpbGUgPSB7XG4gICAgICAgIC4uLnByb2ZpbGUsXG4gICAgICAgIG5hbWVcbiAgICAgIH07XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4oZW5yaWNoZWRQcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5zdWIsXG4gICAgICAgICAgbmFtZTogZW5yaWNoZWRQcm9maWxlLm5hbWUsXG4gICAgICAgICAgZW1haWxWZXJpZmllZCxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IGVucmljaGVkUHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5jb25zdCBnZXRBcHBsZVB1YmxpY0tleSA9IGFzeW5jIChraWQpID0+IHtcbiAgY29uc3QgQVBQTEVfQkFTRV9VUkwgPSBcImh0dHBzOi8vYXBwbGVpZC5hcHBsZS5jb21cIjtcbiAgY29uc3QgSldLU19BUFBMRV9VUkkgPSBcIi9hdXRoL2tleXNcIjtcbiAgY29uc3QgeyBkYXRhIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChgJHtBUFBMRV9CQVNFX1VSTH0ke0pXS1NfQVBQTEVfVVJJfWApO1xuICBpZiAoIWRhdGE/LmtleXMpIHtcbiAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICBtZXNzYWdlOiBcIktleXMgbm90IGZvdW5kXCJcbiAgICB9KTtcbiAgfVxuICBjb25zdCBqd2sgPSBkYXRhLmtleXMuZmluZCgoa2V5KSA9PiBrZXkua2lkID09PSBraWQpO1xuICBpZiAoIWp3aykge1xuICAgIHRocm93IG5ldyBFcnJvcihgSldLIHdpdGgga2lkICR7a2lkfSBub3QgZm91bmRgKTtcbiAgfVxuICByZXR1cm4gYXdhaXQgaW1wb3J0SldLKGp3aywgandrLmFsZyk7XG59O1xuXG5jb25zdCBhdGxhc3NpYW4gPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImF0bGFzc2lhblwiLFxuICAgIG5hbWU6IFwiQXRsYXNzaWFuXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgaWYgKCFvcHRpb25zLmNsaWVudElkIHx8ICFvcHRpb25zLmNsaWVudFNlY3JldCkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJDbGllbnQgSWQgYW5kIFNlY3JldCBhcmUgcmVxdWlyZWQgZm9yIEF0bGFzc2lhblwiKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9JRF9BTkRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFjb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImNvZGVWZXJpZmllciBpcyByZXF1aXJlZCBmb3IgQXRsYXNzaWFuXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicmVhZDpqaXJhLXVzZXJcIiwgXCJvZmZsaW5lX2FjY2Vzc1wiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJhdGxhc3NpYW5cIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vYXV0aC5hdGxhc3NpYW4uY29tL2F1dGhvcml6ZVwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zOiB7XG4gICAgICAgICAgYXVkaWVuY2U6IFwiYXBpLmF0bGFzc2lhbi5jb21cIlxuICAgICAgICB9LFxuICAgICAgICBwcm9tcHQ6IG9wdGlvbnMucHJvbXB0XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXV0aC5hdGxhc3NpYW4uY29tL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2F1dGguYXRsYXNzaWFuLmNvbS9vYXV0aC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2VuLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLmF0bGFzc2lhbi5jb20vbWVcIiwge1xuICAgICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFwcm9maWxlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgIGlkOiBwcm9maWxlLmFjY291bnRfaWQsXG4gICAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBGaWdtYTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGNvZ25pdG8gPSAob3B0aW9ucykgPT4ge1xuICBpZiAoIW9wdGlvbnMuZG9tYWluIHx8ICFvcHRpb25zLnJlZ2lvbiB8fCAhb3B0aW9ucy51c2VyUG9vbElkKSB7XG4gICAgbG9nZ2VyLmVycm9yKFxuICAgICAgXCJEb21haW4sIHJlZ2lvbiBhbmQgdXNlclBvb2xJZCBhcmUgcmVxdWlyZWQgZm9yIEFtYXpvbiBDb2duaXRvLiBNYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGVtIGluIHRoZSBvcHRpb25zLlwiXG4gICAgKTtcbiAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRE9NQUlOX0FORF9SRUdJT05fUkVRVUlSRURcIik7XG4gIH1cbiAgY29uc3QgY2xlYW5Eb21haW4gPSBvcHRpb25zLmRvbWFpbi5yZXBsYWNlKC9eaHR0cHM/OlxcL1xcLy8sIFwiXCIpO1xuICBjb25zdCBhdXRob3JpemF0aW9uRW5kcG9pbnQgPSBgaHR0cHM6Ly8ke2NsZWFuRG9tYWlufS9vYXV0aDIvYXV0aG9yaXplYDtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IGBodHRwczovLyR7Y2xlYW5Eb21haW59L29hdXRoMi90b2tlbmA7XG4gIGNvbnN0IHVzZXJJbmZvRW5kcG9pbnQgPSBgaHR0cHM6Ly8ke2NsZWFuRG9tYWlufS9vYXV0aDIvdXNlcmluZm9gO1xuICByZXR1cm4ge1xuICAgIGlkOiBcImNvZ25pdG9cIixcbiAgICBuYW1lOiBcIkNvZ25pdG9cIixcbiAgICBhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBpZiAoIW9wdGlvbnMuY2xpZW50SWQpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiQ2xpZW50SWQgaXMgcmVxdWlyZWQgZm9yIEFtYXpvbiBDb2duaXRvLiBNYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGVtIGluIHRoZSBvcHRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnJlcXVpcmVDbGllbnRTZWNyZXQgJiYgIW9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIkNsaWVudCBTZWNyZXQgaXMgcmVxdWlyZWQgd2hlbiByZXF1aXJlQ2xpZW50U2VjcmV0IGlzIHRydWUuIE1ha2Ugc3VyZSB0byBwcm92aWRlIGl0IGluIHRoZSBvcHRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wib3BlbmlkXCIsIFwicHJvZmlsZVwiLCBcImVtYWlsXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBjb25zdCB1cmwgPSBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwiY29nbml0b1wiLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9LFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIHByb21wdDogb3B0aW9ucy5wcm9tcHRcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudmVyaWZ5SWRUb2tlbikge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG4gICAgICB9XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkZWNvZGVkSGVhZGVyID0gZGVjb2RlUHJvdGVjdGVkSGVhZGVyKHRva2VuKTtcbiAgICAgICAgY29uc3QgeyBraWQsIGFsZzogand0QWxnIH0gPSBkZWNvZGVkSGVhZGVyO1xuICAgICAgICBpZiAoIWtpZCB8fCAhand0QWxnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IGF3YWl0IGdldENvZ25pdG9QdWJsaWNLZXkoXG4gICAgICAgICAga2lkLFxuICAgICAgICAgIG9wdGlvbnMucmVnaW9uLFxuICAgICAgICAgIG9wdGlvbnMudXNlclBvb2xJZFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBleHBlY3RlZElzc3VlciA9IGBodHRwczovL2NvZ25pdG8taWRwLiR7b3B0aW9ucy5yZWdpb259LmFtYXpvbmF3cy5jb20vJHtvcHRpb25zLnVzZXJQb29sSWR9YDtcbiAgICAgICAgY29uc3QgeyBwYXlsb2FkOiBqd3RDbGFpbXMgfSA9IGF3YWl0IGp3dFZlcmlmeSh0b2tlbiwgcHVibGljS2V5LCB7XG4gICAgICAgICAgYWxnb3JpdGhtczogW2p3dEFsZ10sXG4gICAgICAgICAgaXNzdWVyOiBleHBlY3RlZElzc3VlcixcbiAgICAgICAgICBhdWRpZW5jZTogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBtYXhUb2tlbkFnZTogXCIxaFwiXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAobm9uY2UgJiYgand0Q2xhaW1zLm5vbmNlICE9PSBub25jZSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB2ZXJpZnkgSUQgdG9rZW46XCIsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGlmICh0b2tlbi5pZFRva2VuKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcHJvZmlsZSA9IGRlY29kZUp3dCh0b2tlbi5pZFRva2VuKTtcbiAgICAgICAgICBpZiAoIXByb2ZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBuYW1lID0gcHJvZmlsZS5uYW1lIHx8IHByb2ZpbGUuZ2l2ZW5fbmFtZSB8fCBwcm9maWxlLnVzZXJuYW1lIHx8IHByb2ZpbGUuZW1haWw7XG4gICAgICAgICAgY29uc3QgZW5yaWNoZWRQcm9maWxlID0ge1xuICAgICAgICAgICAgLi4ucHJvZmlsZSxcbiAgICAgICAgICAgIG5hbWVcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/LihlbnJpY2hlZFByb2ZpbGUpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICAgICAgbmFtZTogZW5yaWNoZWRQcm9maWxlLm5hbWUsXG4gICAgICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuICAgICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkLFxuICAgICAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGF0YTogZW5yaWNoZWRQcm9maWxlXG4gICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZGVjb2RlIElEIHRva2VuOlwiLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0b2tlbi5hY2Nlc3NUb2tlbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgZGF0YTogdXNlckluZm8gfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICAgICAgdXNlckluZm9FbmRwb2ludCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIGlmICh1c2VySW5mbykge1xuICAgICAgICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXJJbmZvKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgICAgICBpZDogdXNlckluZm8uc3ViLFxuICAgICAgICAgICAgICAgIG5hbWU6IHVzZXJJbmZvLm5hbWUgfHwgdXNlckluZm8uZ2l2ZW5fbmFtZSB8fCB1c2VySW5mby51c2VybmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdXNlckluZm8uZW1haWwsXG4gICAgICAgICAgICAgICAgaW1hZ2U6IHVzZXJJbmZvLnBpY3R1cmUsXG4gICAgICAgICAgICAgICAgZW1haWxWZXJpZmllZDogdXNlckluZm8uZW1haWxfdmVyaWZpZWQsXG4gICAgICAgICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkYXRhOiB1c2VySW5mb1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgaW5mbyBmcm9tIENvZ25pdG86XCIsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuY29uc3QgZ2V0Q29nbml0b1B1YmxpY0tleSA9IGFzeW5jIChraWQsIHJlZ2lvbiwgdXNlclBvb2xJZCkgPT4ge1xuICBjb25zdCBDT0dOSVRPX0pXS1NfVVJJID0gYGh0dHBzOi8vY29nbml0by1pZHAuJHtyZWdpb259LmFtYXpvbmF3cy5jb20vJHt1c2VyUG9vbElkfS8ud2VsbC1rbm93bi9qd2tzLmpzb25gO1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goQ09HTklUT19KV0tTX1VSSSk7XG4gICAgaWYgKCFkYXRhPy5rZXlzKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJRXJyb3IoXCJCQURfUkVRVUVTVFwiLCB7XG4gICAgICAgIG1lc3NhZ2U6IFwiS2V5cyBub3QgZm91bmRcIlxuICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnN0IGp3ayA9IGRhdGEua2V5cy5maW5kKChrZXkpID0+IGtleS5raWQgPT09IGtpZCk7XG4gICAgaWYgKCFqd2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgSldLIHdpdGgga2lkICR7a2lkfSBub3QgZm91bmRgKTtcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IGltcG9ydEpXSyhqd2ssIGp3ay5hbGcpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBDb2duaXRvIHB1YmxpYyBrZXk6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuY29uc3QgZGlzY29yZCA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiZGlzY29yZFwiLFxuICAgIG5hbWU6IFwiRGlzY29yZFwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJpZGVudGlmeVwiLCBcImVtYWlsXCJdO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBjb25zdCBoYXNCb3RTY29wZSA9IF9zY29wZXMuaW5jbHVkZXMoXCJib3RcIik7XG4gICAgICBjb25zdCBwZXJtaXNzaW9uc1BhcmFtID0gaGFzQm90U2NvcGUgJiYgb3B0aW9ucy5wZXJtaXNzaW9ucyAhPT0gdm9pZCAwID8gYCZwZXJtaXNzaW9ucz0ke29wdGlvbnMucGVybWlzc2lvbnN9YCA6IFwiXCI7XG4gICAgICByZXR1cm4gbmV3IFVSTChcbiAgICAgICAgYGh0dHBzOi8vZGlzY29yZC5jb20vYXBpL29hdXRoMi9hdXRob3JpemU/c2NvcGU9JHtfc2NvcGVzLmpvaW4oXG4gICAgICAgICAgXCIrXCJcbiAgICAgICAgKX0mcmVzcG9uc2VfdHlwZT1jb2RlJmNsaWVudF9pZD0ke29wdGlvbnMuY2xpZW50SWR9JnJlZGlyZWN0X3VyaT0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICAgICAgICBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJXG4gICAgICAgICl9JnN0YXRlPSR7c3RhdGV9JnByb21wdD0ke29wdGlvbnMucHJvbXB0IHx8IFwibm9uZVwifSR7cGVybWlzc2lvbnNQYXJhbX1gXG4gICAgICApO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2Rpc2NvcmQuY29tL2FwaS9vYXV0aDIvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9kaXNjb3JkLmNvbS9hcGkvb2F1dGgyL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vZGlzY29yZC5jb20vYXBpL3VzZXJzL0BtZVwiLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAocHJvZmlsZS5hdmF0YXIgPT09IG51bGwpIHtcbiAgICAgICAgY29uc3QgZGVmYXVsdEF2YXRhck51bWJlciA9IHByb2ZpbGUuZGlzY3JpbWluYXRvciA9PT0gXCIwXCIgPyBOdW1iZXIoQmlnSW50KHByb2ZpbGUuaWQpID4+IEJpZ0ludCgyMikpICUgNiA6IHBhcnNlSW50KHByb2ZpbGUuZGlzY3JpbWluYXRvcikgJSA1O1xuICAgICAgICBwcm9maWxlLmltYWdlX3VybCA9IGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9lbWJlZC9hdmF0YXJzLyR7ZGVmYXVsdEF2YXRhck51bWJlcn0ucG5nYDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGZvcm1hdCA9IHByb2ZpbGUuYXZhdGFyLnN0YXJ0c1dpdGgoXCJhX1wiKSA/IFwiZ2lmXCIgOiBcInBuZ1wiO1xuICAgICAgICBwcm9maWxlLmltYWdlX3VybCA9IGBodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdmF0YXJzLyR7cHJvZmlsZS5pZH0vJHtwcm9maWxlLmF2YXRhcn0uJHtmb3JtYXR9YDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLmdsb2JhbF9uYW1lIHx8IHByb2ZpbGUudXNlcm5hbWUgfHwgXCJcIixcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLnZlcmlmaWVkLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLmltYWdlX3VybCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBmYWNlYm9vayA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiZmFjZWJvb2tcIixcbiAgICBuYW1lOiBcIkZhY2Vib29rXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJLCBsb2dpbkhpbnQgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wiZW1haWxcIiwgXCJwdWJsaWNfcHJvZmlsZVwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJmYWNlYm9va1wiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL3YyMS4wL2RpYWxvZy9vYXV0aFwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgbG9naW5IaW50LFxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zOiBvcHRpb25zLmNvbmZpZ0lkID8ge1xuICAgICAgICAgIGNvbmZpZ19pZDogb3B0aW9ucy5jb25maWdJZFxuICAgICAgICB9IDoge31cbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2dyYXBoLmZhY2Vib29rLmNvbS9vYXV0aC9hY2Nlc3NfdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudmVyaWZ5SWRUb2tlbikge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG4gICAgICB9XG4gICAgICBpZiAodG9rZW4uc3BsaXQoXCIuXCIpLmxlbmd0aCA9PT0gMykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgcGF5bG9hZDogand0Q2xhaW1zIH0gPSBhd2FpdCBqd3RWZXJpZnkoXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGNyZWF0ZVJlbW90ZUpXS1NldChcbiAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmZhY2Vib29rLmNvbS9kb2NzL2ZhY2Vib29rLWxvZ2luL2xpbWl0ZWQtbG9naW4vdG9rZW4vI2p3a3NcbiAgICAgICAgICAgICAgbmV3IFVSTChcbiAgICAgICAgICAgICAgICBcImh0dHBzOi8vbGltaXRlZC5mYWNlYm9vay5jb20vLndlbGwta25vd24vb2F1dGgvb3BlbmlkL2p3a3MvXCJcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgYWxnb3JpdGhtczogW1wiUlMyNTZcIl0sXG4gICAgICAgICAgICAgIGF1ZGllbmNlOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgICAgICBpc3N1ZXI6IFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIGlmIChub25jZSAmJiBqd3RDbGFpbXMubm9uY2UgIT09IG5vbmNlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAhIWp3dENsYWltcztcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL3YxOC4wL29hdXRoL2FjY2Vzc190b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAodG9rZW4uaWRUb2tlbiAmJiB0b2tlbi5pZFRva2VuLnNwbGl0KFwiLlwiKS5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgY29uc3QgcHJvZmlsZTIgPSBkZWNvZGVKd3QodG9rZW4uaWRUb2tlbik7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUyLnN1YixcbiAgICAgICAgICBuYW1lOiBwcm9maWxlMi5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlMi5lbWFpbCxcbiAgICAgICAgICBwaWN0dXJlOiB7XG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHVybDogcHJvZmlsZTIucGljdHVyZSxcbiAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAsXG4gICAgICAgICAgICAgIHdpZHRoOiAxMDAsXG4gICAgICAgICAgICAgIGlzX3NpbGhvdWV0dGU6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCB1c2VyTWFwMiA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHtcbiAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgIGVtYWlsX3ZlcmlmaWVkOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHVzZXI6IHtcbiAgICAgICAgICAgIC4uLnVzZXIsXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgICAgLi4udXNlck1hcDJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHByb2ZpbGUyXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICBjb25zdCBmaWVsZHMgPSBbXG4gICAgICAgIFwiaWRcIixcbiAgICAgICAgXCJuYW1lXCIsXG4gICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgXCJwaWN0dXJlXCIsXG4gICAgICAgIC4uLm9wdGlvbnM/LmZpZWxkcyB8fCBbXVxuICAgICAgXTtcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vZ3JhcGguZmFjZWJvb2suY29tL21lP2ZpZWxkcz1cIiArIGZpZWxkcy5qb2luKFwiLFwiKSxcbiAgICAgICAge1xuICAgICAgICAgIGF1dGg6IHtcbiAgICAgICAgICAgIHR5cGU6IFwiQmVhcmVyXCIsXG4gICAgICAgICAgICB0b2tlbjogdG9rZW4uYWNjZXNzVG9rZW5cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUuZGF0YS51cmwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBmaWdtYSA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiZmlnbWFcIixcbiAgICBuYW1lOiBcIkZpZ21hXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgaWYgKCFvcHRpb25zLmNsaWVudElkIHx8ICFvcHRpb25zLmNsaWVudFNlY3JldCkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJDbGllbnQgSWQgYW5kIENsaWVudCBTZWNyZXQgYXJlIHJlcXVpcmVkIGZvciBGaWdtYS4gTWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlbSBpbiB0aGUgb3B0aW9ucy5cIlxuICAgICAgICApO1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiQ0xJRU5UX0lEX0FORF9TRUNSRVRfUkVRVUlSRURcIik7XG4gICAgICB9XG4gICAgICBpZiAoIWNvZGVWZXJpZmllcikge1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiY29kZVZlcmlmaWVyIGlzIHJlcXVpcmVkIGZvciBGaWdtYVwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImZpbGVfcmVhZFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgY29uc3QgdXJsID0gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImZpZ21hXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL3d3dy5maWdtYS5jb20vb2F1dGhcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cuZmlnbWEuY29tL2FwaS9vYXV0aC90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL3d3dy5maWdtYS5jb20vYXBpL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgICAgXCJodHRwczovL2FwaS5maWdtYS5jb20vdjEvbWVcIixcbiAgICAgICAgICB7XG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBpZiAoIXByb2ZpbGUpIHtcbiAgICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBmcm9tIEZpZ21hXCIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBpZDogcHJvZmlsZS5pZCxcbiAgICAgICAgICAgIG5hbWU6IHByb2ZpbGUuaGFuZGxlLFxuICAgICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgICBpbWFnZTogcHJvZmlsZS5pbWdfdXJsLFxuICAgICAgICAgICAgZW1haWxWZXJpZmllZDogISFwcm9maWxlLmVtYWlsLFxuICAgICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgICB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHVzZXIgaW5mbyBmcm9tIEZpZ21hOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgZ2l0aHViID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9naXRodWIuY29tL2xvZ2luL29hdXRoL2FjY2Vzc190b2tlblwiO1xuICByZXR1cm4ge1xuICAgIGlkOiBcImdpdGh1YlwiLFxuICAgIG5hbWU6IFwiR2l0SHViXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGxvZ2luSGludCwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicmVhZDp1c2VyXCIsIFwidXNlcjplbWFpbFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJnaXRodWJcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vZ2l0aHViLmNvbS9sb2dpbi9vYXV0aC9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIGxvZ2luSGludCxcbiAgICAgICAgcHJvbXB0OiBvcHRpb25zLnByb21wdFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2dpdGh1Yi5jb20vbG9naW4vb2F1dGgvYWNjZXNzX3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLmdpdGh1Yi5jb20vdXNlclwiLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIixcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBlbWFpbHMgfSA9IGF3YWl0IGJldHRlckZldGNoKFwiaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2VyL2VtYWlsc1wiLCB7XG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YCxcbiAgICAgICAgICBcIlVzZXItQWdlbnRcIjogXCJiZXR0ZXItYXV0aFwiXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFwcm9maWxlLmVtYWlsICYmIGVtYWlscykge1xuICAgICAgICBwcm9maWxlLmVtYWlsID0gKGVtYWlscy5maW5kKChlKSA9PiBlLnByaW1hcnkpID8/IGVtYWlsc1swXSk/LmVtYWlsO1xuICAgICAgfVxuICAgICAgY29uc3QgZW1haWxWZXJpZmllZCA9IGVtYWlscz8uZmluZCgoZSkgPT4gZS5lbWFpbCA9PT0gcHJvZmlsZS5lbWFpbCk/LnZlcmlmaWVkID8/IGZhbHNlO1xuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSB8fCBwcm9maWxlLmxvZ2luLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLmF2YXRhcl91cmwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBnb29nbGUgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImdvb2dsZVwiLFxuICAgIG5hbWU6IFwiR29vZ2xlXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3BlcyxcbiAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgbG9naW5IaW50LFxuICAgICAgZGlzcGxheVxuICAgIH0pIHtcbiAgICAgIGlmICghb3B0aW9ucy5jbGllbnRJZCB8fCAhb3B0aW9ucy5jbGllbnRTZWNyZXQpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFxuICAgICAgICAgIFwiQ2xpZW50IElkIGFuZCBDbGllbnQgU2VjcmV0IGlzIHJlcXVpcmVkIGZvciBHb29nbGUuIE1ha2Ugc3VyZSB0byBwcm92aWRlIHRoZW0gaW4gdGhlIG9wdGlvbnMuXCJcbiAgICAgICAgKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkNMSUVOVF9JRF9BTkRfU0VDUkVUX1JFUVVJUkVEXCIpO1xuICAgICAgfVxuICAgICAgaWYgKCFjb2RlVmVyaWZpZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcImNvZGVWZXJpZmllciBpcyByZXF1aXJlZCBmb3IgR29vZ2xlXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wiZW1haWxcIiwgXCJwcm9maWxlXCIsIFwib3BlbmlkXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBjb25zdCB1cmwgPSBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwiZ29vZ2xlXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20vby9vYXV0aDIvYXV0aFwiLFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBwcm9tcHQ6IG9wdGlvbnMucHJvbXB0LFxuICAgICAgICBhY2Nlc3NUeXBlOiBvcHRpb25zLmFjY2Vzc1R5cGUsXG4gICAgICAgIGRpc3BsYXk6IGRpc3BsYXkgfHwgb3B0aW9ucy5kaXNwbGF5LFxuICAgICAgICBsb2dpbkhpbnQsXG4gICAgICAgIGhkOiBvcHRpb25zLmhkLFxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zOiB7XG4gICAgICAgICAgaW5jbHVkZV9ncmFudGVkX3Njb3BlczogXCJ0cnVlXCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9vYXV0aDIuZ29vZ2xlYXBpcy5jb20vdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vb2F1dGgyL3Y0L3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgdmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpIHtcbiAgICAgIGlmIChvcHRpb25zLmRpc2FibGVJZFRva2VuU2lnbkluKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnZlcmlmeUlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMudmVyaWZ5SWRUb2tlbih0b2tlbiwgbm9uY2UpO1xuICAgICAgfVxuICAgICAgY29uc3QgZ29vZ2xlUHVibGljS2V5VXJsID0gYGh0dHBzOi8vd3d3Lmdvb2dsZWFwaXMuY29tL29hdXRoMi92My90b2tlbmluZm8/aWRfdG9rZW49JHt0b2tlbn1gO1xuICAgICAgY29uc3QgeyBkYXRhOiB0b2tlbkluZm8gfSA9IGF3YWl0IGJldHRlckZldGNoKGdvb2dsZVB1YmxpY0tleVVybCk7XG4gICAgICBpZiAoIXRva2VuSW5mbykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBjb25zdCBpc1ZhbGlkID0gdG9rZW5JbmZvLmF1ZCA9PT0gb3B0aW9ucy5jbGllbnRJZCAmJiAodG9rZW5JbmZvLmlzcyA9PT0gXCJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb21cIiB8fCB0b2tlbkluZm8uaXNzID09PSBcImFjY291bnRzLmdvb2dsZS5jb21cIik7XG4gICAgICByZXR1cm4gaXNWYWxpZDtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2VuLmlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHVzZXIpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiB1c2VyLnN1YixcbiAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHVzZXIucGljdHVyZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VyLmVtYWlsX3ZlcmlmaWVkLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogdXNlclxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IGtpY2sgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcImtpY2tcIixcbiAgICBuYW1lOiBcIktpY2tcIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJ1c2VyOnJlYWRcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwia2lja1wiLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vaWQua2ljay5jb20vb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICBzdGF0ZVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHsgY29kZSwgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vaWQua2ljay5jb20vb2F1dGgvdG9rZW5cIixcbiAgICAgICAgY29kZVZlcmlmaWVyXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLmtpY2suY29tL3B1YmxpYy92MS91c2Vyc1wiLCB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJvZmlsZSA9IGRhdGEuZGF0YVswXTtcbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS51c2VyX2lkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5wcm9maWxlX3BpY3R1cmUsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBodWdnaW5nZmFjZSA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiaHVnZ2luZ2ZhY2VcIixcbiAgICBuYW1lOiBcIkh1Z2dpbmcgRmFjZVwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcIm9wZW5pZFwiLCBcInByb2ZpbGVcIiwgXCJlbWFpbFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJodWdnaW5nZmFjZVwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9odWdnaW5nZmFjZS5jby9vYXV0aC9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2h1Z2dpbmdmYWNlLmNvL29hdXRoL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vaHVnZ2luZ2ZhY2UuY28vb2F1dGgvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9odWdnaW5nZmFjZS5jby9vYXV0aC91c2VyaW5mb1wiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLnN1YixcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUgfHwgcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljdHVyZSxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkID8/IGZhbHNlLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IG1pY3Jvc29mdCA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHRlbmFudCA9IG9wdGlvbnMudGVuYW50SWQgfHwgXCJjb21tb25cIjtcbiAgY29uc3QgYXV0aG9yaXR5ID0gb3B0aW9ucy5hdXRob3JpdHkgfHwgXCJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb21cIjtcbiAgY29uc3QgYXV0aG9yaXphdGlvbkVuZHBvaW50ID0gYCR7YXV0aG9yaXR5fS8ke3RlbmFudH0vb2F1dGgyL3YyLjAvYXV0aG9yaXplYDtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IGAke2F1dGhvcml0eX0vJHt0ZW5hbnR9L29hdXRoMi92Mi4wL3Rva2VuYDtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJtaWNyb3NvZnRcIixcbiAgICBuYW1lOiBcIk1pY3Jvc29mdCBFbnRyYUlEXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTChkYXRhKSB7XG4gICAgICBjb25zdCBzY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcIm9wZW5pZFwiLCBcInByb2ZpbGVcIiwgXCJlbWFpbFwiLCBcIlVzZXIuUmVhZFwiLCBcIm9mZmxpbmVfYWNjZXNzXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBzY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIGRhdGEuc2NvcGVzICYmIHNjb3Blcy5wdXNoKC4uLmRhdGEuc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwibWljcm9zb2Z0XCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludCxcbiAgICAgICAgc3RhdGU6IGRhdGEuc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcjogZGF0YS5jb2RlVmVyaWZpZXIsXG4gICAgICAgIHNjb3BlcyxcbiAgICAgICAgcmVkaXJlY3RVUkk6IGRhdGEucmVkaXJlY3RVUkksXG4gICAgICAgIHByb21wdDogb3B0aW9ucy5wcm9tcHQsXG4gICAgICAgIGxvZ2luSGludDogZGF0YS5sb2dpbkhpbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2VuLmlkVG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuICAgICAgY29uc3QgcHJvZmlsZVBob3RvU2l6ZSA9IG9wdGlvbnMucHJvZmlsZVBob3RvU2l6ZSB8fCA0ODtcbiAgICAgIGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBgaHR0cHM6Ly9ncmFwaC5taWNyb3NvZnQuY29tL3YxLjAvbWUvcGhvdG9zLyR7cHJvZmlsZVBob3RvU2l6ZX14JHtwcm9maWxlUGhvdG9TaXplfS8kdmFsdWVgLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGFzeW5jIG9uUmVzcG9uc2UoY29udGV4dCkge1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZVByb2ZpbGVQaG90byB8fCAhY29udGV4dC5yZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGNvbnRleHQucmVzcG9uc2UuY2xvbmUoKTtcbiAgICAgICAgICAgICAgY29uc3QgcGljdHVyZUJ1ZmZlciA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG4gICAgICAgICAgICAgIGNvbnN0IHBpY3R1cmVCYXNlNjQgPSBiYXNlNjQuZW5jb2RlKHBpY3R1cmVCdWZmZXIpO1xuICAgICAgICAgICAgICB1c2VyLnBpY3R1cmUgPSBgZGF0YTppbWFnZS9qcGVnO2Jhc2U2NCwgJHtwaWN0dXJlQmFzZTY0fWA7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICAgICAgICBlICYmIHR5cGVvZiBlID09PSBcIm9iamVjdFwiICYmIFwibmFtZVwiIGluIGUgPyBlLm5hbWUgOiBcIlwiLFxuICAgICAgICAgICAgICAgIGVcbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHVzZXIuc3ViLFxuICAgICAgICAgIG5hbWU6IHVzZXIubmFtZSxcbiAgICAgICAgICBlbWFpbDogdXNlci5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogdXNlci5waWN0dXJlLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHRydWUsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiB1c2VyXG4gICAgICB9O1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgY29uc3Qgc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCIsIFwiZW1haWxcIiwgXCJVc2VyLlJlYWRcIiwgXCJvZmZsaW5lX2FjY2Vzc1wiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICBleHRyYVBhcmFtczoge1xuICAgICAgICAgIHNjb3BlOiBzY29wZXMuam9pbihcIiBcIilcbiAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBzY29wZXMgaW4gcmVxdWVzdCB0byBtaWNyb3NvZnRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBzbGFjayA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwic2xhY2tcIixcbiAgICBuYW1lOiBcIlNsYWNrXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcIm9wZW5pZFwiLCBcInByb2ZpbGVcIiwgXCJlbWFpbFwiXTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vc2xhY2suY29tL29wZW5pZC9jb25uZWN0L2F1dGhvcml6ZVwiKTtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic2NvcGVcIiwgX3Njb3Blcy5qb2luKFwiIFwiKSk7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlc3BvbnNlX3R5cGVcIiwgXCJjb2RlXCIpO1xuICAgICAgdXJsLnNlYXJjaFBhcmFtcy5zZXQoXCJjbGllbnRfaWRcIiwgb3B0aW9ucy5jbGllbnRJZCk7XG4gICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcInJlZGlyZWN0X3VyaVwiLCBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJKTtcbiAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwic3RhdGVcIiwgc3RhdGUpO1xuICAgICAgcmV0dXJuIHVybDtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9zbGFjay5jb20vYXBpL29wZW5pZC5jb25uZWN0LnRva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vc2xhY2suY29tL2FwaS9vcGVuaWQuY29ubmVjdC50b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL3NsYWNrLmNvbS9hcGkvb3BlbmlkLmNvbm5lY3QudXNlckluZm9cIixcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlW1wiaHR0cHM6Ly9zbGFjay5jb20vdXNlcl9pZFwiXSxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUgfHwgXCJcIixcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUgfHwgcHJvZmlsZVtcImh0dHBzOi8vc2xhY2suY29tL3VzZXJfaW1hZ2VfNTEyXCJdLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IG5vdGlvbiA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLm5vdGlvbi5jb20vdjEvb2F1dGgvdG9rZW5cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJub3Rpb25cIixcbiAgICBuYW1lOiBcIk5vdGlvblwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCBsb2dpbkhpbnQsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcIm5vdGlvblwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkubm90aW9uLmNvbS92MS9vYXV0aC9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIGxvZ2luSGludCxcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtczoge1xuICAgICAgICAgIG93bmVyOiBcInVzZXJcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uOiBcImJhc2ljXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcImh0dHBzOi8vYXBpLm5vdGlvbi5jb20vdjEvdXNlcnMvbWVcIiwge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgXCJOb3Rpb24tVmVyc2lvblwiOiBcIjIwMjItMDYtMjhcIlxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChlcnJvciB8fCAhcHJvZmlsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJQcm9maWxlID0gcHJvZmlsZS5ib3Q/Lm93bmVyPy51c2VyO1xuICAgICAgaWYgKCF1c2VyUHJvZmlsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lih1c2VyUHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHVzZXJQcm9maWxlLmlkLFxuICAgICAgICAgIG5hbWU6IHVzZXJQcm9maWxlLm5hbWUgfHwgXCJOb3Rpb24gVXNlclwiLFxuICAgICAgICAgIGVtYWlsOiB1c2VyUHJvZmlsZS5wZXJzb24/LmVtYWlsIHx8IG51bGwsXG4gICAgICAgICAgaW1hZ2U6IHVzZXJQcm9maWxlLmF2YXRhcl91cmwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogISF1c2VyUHJvZmlsZS5wZXJzb24/LmVtYWlsLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogdXNlclByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBzcG90aWZ5ID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJzcG90aWZ5XCIsXG4gICAgbmFtZTogXCJTcG90aWZ5XCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1widXNlci1yZWFkLWVtYWlsXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcInNwb3RpZnlcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vYWNjb3VudHMuc3BvdGlmeS5jb20vYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hY2NvdW50cy5zcG90aWZ5LmNvbS9hcGkvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvbWVcIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLmRpc3BsYXlfbmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5pbWFnZXNbMF0/LnVybCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCB0d2l0Y2ggPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcInR3aXRjaFwiLFxuICAgIG5hbWU6IFwiVHdpdGNoXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcInVzZXI6cmVhZDplbWFpbFwiLCBcIm9wZW5pZFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJ0d2l0Y2hcIixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludDogXCJodHRwczovL2lkLnR3aXRjaC50di9vYXV0aDIvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNsYWltczogb3B0aW9ucy5jbGFpbXMgfHwgW1xuICAgICAgICAgIFwiZW1haWxcIixcbiAgICAgICAgICBcImVtYWlsX3ZlcmlmaWVkXCIsXG4gICAgICAgICAgXCJwcmVmZXJyZWRfdXNlcm5hbWVcIixcbiAgICAgICAgICBcInBpY3R1cmVcIlxuICAgICAgICBdXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9pZC50d2l0Y2gudHYvb2F1dGgyL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vaWQudHdpdGNoLnR2L29hdXRoMi90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCBpZFRva2VuID0gdG9rZW4uaWRUb2tlbjtcbiAgICAgIGlmICghaWRUb2tlbikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJObyBpZFRva2VuIGZvdW5kIGluIHRva2VuXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByb2ZpbGUgPSBkZWNvZGVKd3QoaWRUb2tlbik7XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuc3ViLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUucHJlZmVycmVkX3VzZXJuYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogcHJvZmlsZS5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCB0d2l0dGVyID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJ0d2l0dGVyXCIsXG4gICAgbmFtZTogXCJUd2l0dGVyXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTChkYXRhKSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJ1c2Vycy5yZWFkXCIsIFwidHdlZXQucmVhZFwiLCBcIm9mZmxpbmUuYWNjZXNzXCIsIFwidXNlcnMuZW1haWxcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIGRhdGEuc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5kYXRhLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcInR3aXR0ZXJcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8veC5jb20vaS9vYXV0aDIvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGU6IGRhdGEuc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcjogZGF0YS5jb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBkYXRhLnJlZGlyZWN0VVJJXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uOiBcImJhc2ljXCIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLnguY29tLzIvb2F1dGgyL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudEtleTogb3B0aW9ucy5jbGllbnRLZXksXG4gICAgICAgICAgY2xpZW50U2VjcmV0OiBvcHRpb25zLmNsaWVudFNlY3JldFxuICAgICAgICB9LFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogXCJiYXNpY1wiLFxuICAgICAgICB0b2tlbkVuZHBvaW50OiBcImh0dHBzOi8vYXBpLnguY29tLzIvb2F1dGgyL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9hcGkueC5jb20vMi91c2Vycy9tZT91c2VyLmZpZWxkcz1wcm9maWxlX2ltYWdlX3VybFwiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKHByb2ZpbGVFcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogZW1haWxEYXRhLCBlcnJvcjogZW1haWxFcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXCJodHRwczovL2FwaS54LmNvbS8yL3VzZXJzL21lP3VzZXIuZmllbGRzPWNvbmZpcm1lZF9lbWFpbFwiLCB7XG4gICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgbGV0IGVtYWlsVmVyaWZpZWQgPSBmYWxzZTtcbiAgICAgIGlmICghZW1haWxFcnJvciAmJiBlbWFpbERhdGE/LmRhdGE/LmNvbmZpcm1lZF9lbWFpbCkge1xuICAgICAgICBwcm9maWxlLmRhdGEuZW1haWwgPSBlbWFpbERhdGEuZGF0YS5jb25maXJtZWRfZW1haWw7XG4gICAgICAgIGVtYWlsVmVyaWZpZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgdXNlck1hcCA9IGF3YWl0IG9wdGlvbnMubWFwUHJvZmlsZVRvVXNlcj8uKHByb2ZpbGUpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmRhdGEuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5kYXRhLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZGF0YS5lbWFpbCB8fCBwcm9maWxlLmRhdGEudXNlcm5hbWUgfHwgbnVsbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5kYXRhLnByb2ZpbGVfaW1hZ2VfdXJsLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgZHJvcGJveCA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tL29hdXRoMi90b2tlblwiO1xuICByZXR1cm4ge1xuICAgIGlkOiBcImRyb3Bib3hcIixcbiAgICBuYW1lOiBcIkRyb3Bib3hcIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMOiBhc3luYyAoe1xuICAgICAgc3RhdGUsXG4gICAgICBzY29wZXMsXG4gICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICByZWRpcmVjdFVSSVxuICAgIH0pID0+IHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImFjY291bnRfaW5mby5yZWFkXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBjb25zdCBhZGRpdGlvbmFsUGFyYW1zID0ge307XG4gICAgICBpZiAob3B0aW9ucy5hY2Nlc3NUeXBlKSB7XG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXMudG9rZW5fYWNjZXNzX3R5cGUgPSBvcHRpb25zLmFjY2Vzc1R5cGU7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImRyb3Bib3hcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vd3d3LmRyb3Bib3guY29tL29hdXRoMi9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgYWRkaXRpb25hbFBhcmFtc1xuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCBjb2RlVmVyaWZpZXIsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiBhd2FpdCB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGkuZHJvcGJveC5jb20vb2F1dGgyL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vYXBpLmRyb3Bib3hhcGkuY29tLzIvdXNlcnMvZ2V0X2N1cnJlbnRfYWNjb3VudFwiLFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5hY2NvdW50X2lkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZT8uZGlzcGxheV9uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLmVtYWlsLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZW1haWxfdmVyaWZpZWQgfHwgZmFsc2UsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucHJvZmlsZV9waG90b191cmwsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgbGluZWFyID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkubGluZWFyLmFwcC9vYXV0aC90b2tlblwiO1xuICByZXR1cm4ge1xuICAgIGlkOiBcImxpbmVhclwiLFxuICAgIG5hbWU6IFwiTGluZWFyXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGxvZ2luSGludCwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicmVhZFwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJsaW5lYXJcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vbGluZWFyLmFwcC9vYXV0aC9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIGxvZ2luSGludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9hcGkubGluZWFyLmFwcC9ncmFwaHFsXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgIHF1ZXJ5OiBgXG5cdFx0XHRcdFx0XHRcdHF1ZXJ5IHtcblx0XHRcdFx0XHRcdFx0XHR2aWV3ZXIge1xuXHRcdFx0XHRcdFx0XHRcdFx0aWRcblx0XHRcdFx0XHRcdFx0XHRcdG5hbWVcblx0XHRcdFx0XHRcdFx0XHRcdGVtYWlsXG5cdFx0XHRcdFx0XHRcdFx0XHRhdmF0YXJVcmxcblx0XHRcdFx0XHRcdFx0XHRcdGFjdGl2ZVxuXHRcdFx0XHRcdFx0XHRcdFx0Y3JlYXRlZEF0XG5cdFx0XHRcdFx0XHRcdFx0XHR1cGRhdGVkQXRcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGBcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yIHx8ICFwcm9maWxlPy5kYXRhPy52aWV3ZXIpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyRGF0YSA9IHByb2ZpbGUuZGF0YS52aWV3ZXI7XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckRhdGEpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdXNlcjoge1xuICAgICAgICAgIGlkOiBwcm9maWxlLmRhdGEudmlld2VyLmlkLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUuZGF0YS52aWV3ZXIubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5kYXRhLnZpZXdlci5lbWFpbCxcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5kYXRhLnZpZXdlci5hdmF0YXJVcmwsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHVzZXJEYXRhXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgbGlua2VkaW4gPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBhdXRob3JpemF0aW9uRW5kcG9pbnQgPSBcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9vYXV0aC92Mi9hdXRob3JpemF0aW9uXCI7XG4gIGNvbnN0IHRva2VuRW5kcG9pbnQgPSBcImh0dHBzOi8vd3d3LmxpbmtlZGluLmNvbS9vYXV0aC92Mi9hY2Nlc3NUb2tlblwiO1xuICByZXR1cm4ge1xuICAgIGlkOiBcImxpbmtlZGluXCIsXG4gICAgbmFtZTogXCJMaW5rZWRpblwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkw6IGFzeW5jICh7XG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3BlcyxcbiAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgbG9naW5IaW50XG4gICAgfSkgPT4ge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wicHJvZmlsZVwiLCBcImVtYWlsXCIsIFwib3BlbmlkXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImxpbmtlZGluXCIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGF1dGhvcml6YXRpb25FbmRwb2ludCxcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgbG9naW5IaW50LFxuICAgICAgICByZWRpcmVjdFVSSVxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICB0b2tlbkVuZHBvaW50XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9hcGkubGlua2VkaW4uY29tL3YyL3VzZXJpbmZvXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuc3ViLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmFtZSxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBwcm9maWxlLmVtYWlsX3ZlcmlmaWVkIHx8IGZhbHNlLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLnBpY3R1cmUsXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgY2xlYW5Eb3VibGVTbGFzaGVzID0gKGlucHV0ID0gXCJcIikgPT4ge1xuICByZXR1cm4gaW5wdXQuc3BsaXQoXCI6Ly9cIikubWFwKChzdHIpID0+IHN0ci5yZXBsYWNlKC9cXC97Mix9L2csIFwiL1wiKSkuam9pbihcIjovL1wiKTtcbn07XG5jb25zdCBpc3N1ZXJUb0VuZHBvaW50cyA9IChpc3N1ZXIpID0+IHtcbiAgbGV0IGJhc2VVcmwgPSBpc3N1ZXIgfHwgXCJodHRwczovL2dpdGxhYi5jb21cIjtcbiAgcmV0dXJuIHtcbiAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IGNsZWFuRG91YmxlU2xhc2hlcyhgJHtiYXNlVXJsfS9vYXV0aC9hdXRob3JpemVgKSxcbiAgICB0b2tlbkVuZHBvaW50OiBjbGVhbkRvdWJsZVNsYXNoZXMoYCR7YmFzZVVybH0vb2F1dGgvdG9rZW5gKSxcbiAgICB1c2VyaW5mb0VuZHBvaW50OiBjbGVhbkRvdWJsZVNsYXNoZXMoYCR7YmFzZVVybH0vYXBpL3Y0L3VzZXJgKVxuICB9O1xufTtcbmNvbnN0IGdpdGxhYiA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IHsgYXV0aG9yaXphdGlvbkVuZHBvaW50LCB0b2tlbkVuZHBvaW50LCB1c2VyaW5mb0VuZHBvaW50IH0gPSBpc3N1ZXJUb0VuZHBvaW50cyhvcHRpb25zLmlzc3Vlcik7XG4gIGNvbnN0IGlzc3VlcklkID0gXCJnaXRsYWJcIjtcbiAgY29uc3QgaXNzdWVyTmFtZSA9IFwiR2l0bGFiXCI7XG4gIHJldHVybiB7XG4gICAgaWQ6IGlzc3VlcklkLFxuICAgIG5hbWU6IGlzc3Vlck5hbWUsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTDogYXN5bmMgKHtcbiAgICAgIHN0YXRlLFxuICAgICAgc2NvcGVzLFxuICAgICAgY29kZVZlcmlmaWVyLFxuICAgICAgbG9naW5IaW50LFxuICAgICAgcmVkaXJlY3RVUklcbiAgICB9KSA9PiB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJyZWFkX3VzZXJcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBhd2FpdCBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IGlzc3VlcklkLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIGxvZ2luSGludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSwgY29kZVZlcmlmaWVyIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICB1c2VyaW5mb0VuZHBvaW50LFxuICAgICAgICB7IGhlYWRlcnM6IHsgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAgfSB9XG4gICAgICApO1xuICAgICAgaWYgKGVycm9yIHx8IHByb2ZpbGUuc3RhdGUgIT09IFwiYWN0aXZlXCIgfHwgcHJvZmlsZS5sb2NrZWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5uYW1lID8/IHByb2ZpbGUudXNlcm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUuYXZhdGFyX3VybCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB0cnVlLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IHRpa3RvayA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwidGlrdG9rXCIsXG4gICAgbmFtZTogXCJUaWtUb2tcIixcbiAgICBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1widXNlci5pbmZvLnByb2ZpbGVcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBuZXcgVVJMKFxuICAgICAgICBgaHR0cHM6Ly93d3cudGlrdG9rLmNvbS92Mi9hdXRoL2F1dGhvcml6ZT9zY29wZT0ke19zY29wZXMuam9pbihcbiAgICAgICAgICBcIixcIlxuICAgICAgICApfSZyZXNwb25zZV90eXBlPWNvZGUmY2xpZW50X2tleT0ke29wdGlvbnMuY2xpZW50S2V5fSZyZWRpcmVjdF91cmk9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgICAgb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSVxuICAgICAgICApfSZzdGF0ZT0ke3N0YXRlfWBcbiAgICAgICk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9vcGVuLnRpa3Rva2FwaXMuY29tL3YyL29hdXRoL3Rva2VuL1wiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9vcGVuLnRpa3Rva2FwaXMuY29tL3YyL29hdXRoL3Rva2VuL1wiLFxuICAgICAgICBhdXRoZW50aWNhdGlvbjogXCJwb3N0XCIsXG4gICAgICAgIGV4dHJhUGFyYW1zOiB7XG4gICAgICAgICAgY2xpZW50X2tleTogb3B0aW9ucy5jbGllbnRLZXlcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgZmllbGRzID0gW1xuICAgICAgICBcIm9wZW5faWRcIixcbiAgICAgICAgXCJhdmF0YXJfbGFyZ2VfdXJsXCIsXG4gICAgICAgIFwiZGlzcGxheV9uYW1lXCIsXG4gICAgICAgIFwidXNlcm5hbWVcIlxuICAgICAgXTtcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBgaHR0cHM6Ly9vcGVuLnRpa3Rva2FwaXMuY29tL3YyL3VzZXIvaW5mby8/ZmllbGRzPSR7ZmllbGRzLmpvaW4oXCIsXCIpfWAsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBhdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5kYXRhLnVzZXIuZW1haWwgfHwgcHJvZmlsZS5kYXRhLnVzZXIudXNlcm5hbWUsXG4gICAgICAgICAgaWQ6IHByb2ZpbGUuZGF0YS51c2VyLm9wZW5faWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5kYXRhLnVzZXIuZGlzcGxheV9uYW1lIHx8IHByb2ZpbGUuZGF0YS51c2VyLnVzZXJuYW1lLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLmRhdGEudXNlci5hdmF0YXJfbGFyZ2VfdXJsLFxuICAgICAgICAgIC8qKiBAbm90ZSBUaWt0b2sgZG9lcyBub3QgcHJvdmlkZSBlbWFpbFZlcmlmaWVkIG9yIGV2ZW4gZW1haWwqL1xuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuZGF0YS51c2VyLmVtYWlsID8gdHJ1ZSA6IGZhbHNlXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCByZWRkaXQgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcInJlZGRpdFwiLFxuICAgIG5hbWU6IFwiUmVkZGl0XCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImlkZW50aXR5XCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcInJlZGRpdFwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9hcGkvdjEvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvblxuICAgICAgfSk7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgIGdyYW50X3R5cGU6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0X3VyaTogb3B0aW9ucy5yZWRpcmVjdFVSSSB8fCByZWRpcmVjdFVSSVxuICAgICAgfSk7XG4gICAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLFxuICAgICAgICBhY2NlcHQ6IFwidGV4dC9wbGFpblwiLFxuICAgICAgICBcInVzZXItYWdlbnRcIjogXCJiZXR0ZXItYXV0aFwiLFxuICAgICAgICBBdXRob3JpemF0aW9uOiBgQmFzaWMgJHtiYXNlNjQuZW5jb2RlKFxuICAgICAgICAgIGAke29wdGlvbnMuY2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXR9YFxuICAgICAgICApfWBcbiAgICAgIH07XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL3d3dy5yZWRkaXQuY29tL2FwaS92MS9hY2Nlc3NfdG9rZW5cIixcbiAgICAgICAge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICBib2R5OiBib2R5LnRvU3RyaW5nKClcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZXRPQXV0aDJUb2tlbnMoZGF0YSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uOiBcImJhc2ljXCIsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly93d3cucmVkZGl0LmNvbS9hcGkvdjEvYWNjZXNzX3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vb2F1dGgucmVkZGl0LmNvbS9hcGkvdjEvbWVcIixcbiAgICAgICAge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gLFxuICAgICAgICAgICAgXCJVc2VyLUFnZW50XCI6IFwiYmV0dGVyLWF1dGhcIlxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS5pZCxcbiAgICAgICAgICBuYW1lOiBwcm9maWxlLm5hbWUsXG4gICAgICAgICAgZW1haWw6IHByb2ZpbGUub2F1dGhfY2xpZW50X2lkLFxuICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHByb2ZpbGUuaGFzX3ZlcmlmaWVkX2VtYWlsLFxuICAgICAgICAgIGltYWdlOiBwcm9maWxlLmljb25faW1nPy5zcGxpdChcIj9cIilbMF0sXG4gICAgICAgICAgLi4udXNlck1hcFxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3Qgcm9ibG94ID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJyb2Jsb3hcIixcbiAgICBuYW1lOiBcIlJvYmxveFwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJwcm9maWxlXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gbmV3IFVSTChcbiAgICAgICAgYGh0dHBzOi8vYXBpcy5yb2Jsb3guY29tL29hdXRoL3YxL2F1dGhvcml6ZT9zY29wZT0ke19zY29wZXMuam9pbihcbiAgICAgICAgICBcIitcIlxuICAgICAgICApfSZyZXNwb25zZV90eXBlPWNvZGUmY2xpZW50X2lkPSR7b3B0aW9ucy5jbGllbnRJZH0mcmVkaXJlY3RfdXJpPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgIG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUklcbiAgICAgICAgKX0mc3RhdGU9JHtzdGF0ZX0mcHJvbXB0PSR7b3B0aW9ucy5wcm9tcHQgfHwgXCJzZWxlY3RfYWNjb3VudCBjb25zZW50XCJ9YFxuICAgICAgKTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9hcGlzLnJvYmxveC5jb20vb2F1dGgvdjEvdG9rZW5cIixcbiAgICAgICAgYXV0aGVudGljYXRpb246IFwicG9zdFwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2FwaXMucm9ibG94LmNvbS9vYXV0aC92MS90b2tlblwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL2FwaXMucm9ibG94LmNvbS9vYXV0aC92MS91c2VyaW5mb1wiLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuc3ViLFxuICAgICAgICAgIG5hbWU6IHByb2ZpbGUubmlja25hbWUgfHwgcHJvZmlsZS5wcmVmZXJyZWRfdXNlcm5hbWUgfHwgXCJcIixcbiAgICAgICAgICBpbWFnZTogcHJvZmlsZS5waWN0dXJlLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLnByZWZlcnJlZF91c2VybmFtZSB8fCBudWxsLFxuICAgICAgICAgIC8vIFJvYmxveCBkb2VzIG5vdCBwcm92aWRlIGVtYWlsXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogdHJ1ZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAuLi5wcm9maWxlXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBzYWxlc2ZvcmNlID0gKG9wdGlvbnMpID0+IHtcbiAgY29uc3QgZW52aXJvbm1lbnQgPSBvcHRpb25zLmVudmlyb25tZW50ID8/IFwicHJvZHVjdGlvblwiO1xuICBjb25zdCBpc1NhbmRib3ggPSBlbnZpcm9ubWVudCA9PT0gXCJzYW5kYm94XCI7XG4gIGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IG9wdGlvbnMubG9naW5VcmwgPyBgaHR0cHM6Ly8ke29wdGlvbnMubG9naW5Vcmx9L3NlcnZpY2VzL29hdXRoMi9hdXRob3JpemVgIDogaXNTYW5kYm94ID8gXCJodHRwczovL3Rlc3Quc2FsZXNmb3JjZS5jb20vc2VydmljZXMvb2F1dGgyL2F1dGhvcml6ZVwiIDogXCJodHRwczovL2xvZ2luLnNhbGVzZm9yY2UuY29tL3NlcnZpY2VzL29hdXRoMi9hdXRob3JpemVcIjtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IG9wdGlvbnMubG9naW5VcmwgPyBgaHR0cHM6Ly8ke29wdGlvbnMubG9naW5Vcmx9L3NlcnZpY2VzL29hdXRoMi90b2tlbmAgOiBpc1NhbmRib3ggPyBcImh0dHBzOi8vdGVzdC5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9vYXV0aDIvdG9rZW5cIiA6IFwiaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9vYXV0aDIvdG9rZW5cIjtcbiAgY29uc3QgdXNlckluZm9FbmRwb2ludCA9IG9wdGlvbnMubG9naW5VcmwgPyBgaHR0cHM6Ly8ke29wdGlvbnMubG9naW5Vcmx9L3NlcnZpY2VzL29hdXRoMi91c2VyaW5mb2AgOiBpc1NhbmRib3ggPyBcImh0dHBzOi8vdGVzdC5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9vYXV0aDIvdXNlcmluZm9cIiA6IFwiaHR0cHM6Ly9sb2dpbi5zYWxlc2ZvcmNlLmNvbS9zZXJ2aWNlcy9vYXV0aDIvdXNlcmluZm9cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJzYWxlc2ZvcmNlXCIsXG4gICAgbmFtZTogXCJTYWxlc2ZvcmNlXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIGNvZGVWZXJpZmllciwgcmVkaXJlY3RVUkkgfSkge1xuICAgICAgaWYgKCFvcHRpb25zLmNsaWVudElkIHx8ICFvcHRpb25zLmNsaWVudFNlY3JldCkge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXG4gICAgICAgICAgXCJDbGllbnQgSWQgYW5kIENsaWVudCBTZWNyZXQgYXJlIHJlcXVpcmVkIGZvciBTYWxlc2ZvcmNlLiBNYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGVtIGluIHRoZSBvcHRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcbiAgICAgIH1cbiAgICAgIGlmICghY29kZVZlcmlmaWVyKSB7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJjb2RlVmVyaWZpZXIgaXMgcmVxdWlyZWQgZm9yIFNhbGVzZm9yY2VcIik7XG4gICAgICB9XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJvcGVuaWRcIiwgXCJlbWFpbFwiLCBcInByb2ZpbGVcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwic2FsZXNmb3JjZVwiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkk6IG9wdGlvbnMucmVkaXJlY3RVUkkgfHwgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgeyBkYXRhOiB1c2VyIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgICB1c2VySW5mb0VuZHBvaW50LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGlmICghdXNlcikge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBTYWxlc2ZvcmNlXCIpO1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lih1c2VyKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgICBpZDogdXNlci51c2VyX2lkLFxuICAgICAgICAgICAgbmFtZTogdXNlci5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsXG4gICAgICAgICAgICBpbWFnZTogdXNlci5waG90b3M/LnBpY3R1cmUgfHwgdXNlci5waG90b3M/LnRodW1ibmFpbCxcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQ6IHVzZXIuZW1haWxfdmVyaWZpZWQgPz8gZmFsc2UsXG4gICAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiB1c2VyXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvIGZyb20gU2FsZXNmb3JjZTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IHZrID0gKG9wdGlvbnMpID0+IHtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJ2a1wiLFxuICAgIG5hbWU6IFwiVktcIixcbiAgICBhc3luYyBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHsgc3RhdGUsIHNjb3BlcywgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJlbWFpbFwiLCBcInBob25lXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICBjb25zdCBhdXRob3JpemF0aW9uRW5kcG9pbnQgPSBcImh0dHBzOi8vaWQudmsuY29tL2F1dGhvcml6ZVwiO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJ2a1wiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBjb2RlVmVyaWZpZXJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHtcbiAgICAgIGNvZGUsXG4gICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICByZWRpcmVjdFVSSSxcbiAgICAgIGRldmljZUlkXG4gICAgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBkZXZpY2VJZCxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLnZrLmNvbS9vYXV0aDIvYXV0aFwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gPyBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA6IGFzeW5jIChyZWZyZXNoVG9rZW4pID0+IHtcbiAgICAgIHJldHVybiByZWZyZXNoQWNjZXNzVG9rZW4oe1xuICAgICAgICByZWZyZXNoVG9rZW4sXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICBjbGllbnRJZDogb3B0aW9ucy5jbGllbnRJZCxcbiAgICAgICAgICBjbGllbnRLZXk6IG9wdGlvbnMuY2xpZW50S2V5LFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL2lkLnZrLmNvbS9vYXV0aDIvYXV0aFwiXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKGRhdGEpIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKGRhdGEpO1xuICAgICAgfVxuICAgICAgaWYgKCFkYXRhLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgY29uc3QgZm9ybUJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgYWNjZXNzX3Rva2VuOiBkYXRhLmFjY2Vzc1Rva2VuLFxuICAgICAgICBjbGllbnRfaWQ6IG9wdGlvbnMuY2xpZW50SWRcbiAgICAgIH0pLnRvU3RyaW5nKCk7XG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgXCJodHRwczovL2lkLnZrLmNvbS9vYXV0aDIvdXNlcl9pbmZvXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJvZHk6IGZvcm1Cb2R5XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoIXByb2ZpbGUudXNlci5lbWFpbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZDogcHJvZmlsZS51c2VyLnVzZXJfaWQsXG4gICAgICAgICAgZmlyc3RfbmFtZTogcHJvZmlsZS51c2VyLmZpcnN0X25hbWUsXG4gICAgICAgICAgbGFzdF9uYW1lOiBwcm9maWxlLnVzZXIubGFzdF9uYW1lLFxuICAgICAgICAgIGVtYWlsOiBwcm9maWxlLnVzZXIuZW1haWwsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUudXNlci5hdmF0YXIsXG4gICAgICAgICAgLyoqIEBub3RlIFZLIGRvZXMgbm90IHByb3ZpZGUgZW1haWxWZXJpZmllZCovXG4gICAgICAgICAgZW1haWxWZXJpZmllZDogISFwcm9maWxlLnVzZXIuZW1haWwsXG4gICAgICAgICAgYmlydGhkYXk6IHByb2ZpbGUudXNlci5iaXJ0aGRheSxcbiAgICAgICAgICBzZXg6IHByb2ZpbGUudXNlci5zZXgsXG4gICAgICAgICAgbmFtZTogYCR7cHJvZmlsZS51c2VyLmZpcnN0X25hbWV9ICR7cHJvZmlsZS51c2VyLmxhc3RfbmFtZX1gLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogcHJvZmlsZVxuICAgICAgfTtcbiAgICB9LFxuICAgIG9wdGlvbnNcbiAgfTtcbn07XG5cbmNvbnN0IHpvb20gPSAodXNlck9wdGlvbnMpID0+IHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBwa2NlOiB0cnVlLFxuICAgIC4uLnVzZXJPcHRpb25zXG4gIH07XG4gIHJldHVybiB7XG4gICAgaWQ6IFwiem9vbVwiLFxuICAgIG5hbWU6IFwiWm9vbVwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkw6IGFzeW5jICh7IHN0YXRlLCByZWRpcmVjdFVSSSwgY29kZVZlcmlmaWVyIH0pID0+IHtcbiAgICAgIGNvbnN0IHBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoe1xuICAgICAgICByZXNwb25zZV90eXBlOiBcImNvZGVcIixcbiAgICAgICAgcmVkaXJlY3RfdXJpOiBvcHRpb25zLnJlZGlyZWN0VVJJID8gb3B0aW9ucy5yZWRpcmVjdFVSSSA6IHJlZGlyZWN0VVJJLFxuICAgICAgICBjbGllbnRfaWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgIHN0YXRlXG4gICAgICB9KTtcbiAgICAgIGlmIChvcHRpb25zLnBrY2UpIHtcbiAgICAgICAgY29uc3QgY29kZUNoYWxsZW5nZSA9IGF3YWl0IGdlbmVyYXRlQ29kZUNoYWxsZW5nZShjb2RlVmVyaWZpZXIpO1xuICAgICAgICBwYXJhbXMuc2V0KFwiY29kZV9jaGFsbGVuZ2VfbWV0aG9kXCIsIFwiUzI1NlwiKTtcbiAgICAgICAgcGFyYW1zLnNldChcImNvZGVfY2hhbGxlbmdlXCIsIGNvZGVDaGFsbGVuZ2UpO1xuICAgICAgfVxuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTChcImh0dHBzOi8vem9vbS51cy9vYXV0aC9hdXRob3JpemVcIik7XG4gICAgICB1cmwuc2VhcmNoID0gcGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkksIGNvZGVWZXJpZmllciB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIHJlZGlyZWN0VVJJOiBvcHRpb25zLnJlZGlyZWN0VVJJIHx8IHJlZGlyZWN0VVJJLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly96b29tLnVzL29hdXRoL3Rva2VuXCIsXG4gICAgICAgIGF1dGhlbnRpY2F0aW9uOiBcInBvc3RcIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9hcGkuem9vbS51cy92Mi91c2Vycy9tZVwiLFxuICAgICAgICB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgYXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgaWQ6IHByb2ZpbGUuaWQsXG4gICAgICAgICAgbmFtZTogcHJvZmlsZS5kaXNwbGF5X25hbWUsXG4gICAgICAgICAgaW1hZ2U6IHByb2ZpbGUucGljX3VybCxcbiAgICAgICAgICBlbWFpbDogcHJvZmlsZS5lbWFpbCxcbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBCb29sZWFuKHByb2ZpbGUudmVyaWZpZWQpLFxuICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgfSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIC4uLnByb2ZpbGVcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59O1xuXG5jb25zdCBrYWthbyA9IChvcHRpb25zKSA9PiB7XG4gIHJldHVybiB7XG4gICAgaWQ6IFwia2FrYW9cIixcbiAgICBuYW1lOiBcIktha2FvXCIsXG4gICAgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7IHN0YXRlLCBzY29wZXMsIHJlZGlyZWN0VVJJIH0pIHtcbiAgICAgIGNvbnN0IF9zY29wZXMgPSBvcHRpb25zLmRpc2FibGVEZWZhdWx0U2NvcGUgPyBbXSA6IFtcImFjY291bnRfZW1haWxcIiwgXCJwcm9maWxlX2ltYWdlXCIsIFwicHJvZmlsZV9uaWNrbmFtZVwiXTtcbiAgICAgIG9wdGlvbnMuc2NvcGUgJiYgX3Njb3Blcy5wdXNoKC4uLm9wdGlvbnMuc2NvcGUpO1xuICAgICAgc2NvcGVzICYmIF9zY29wZXMucHVzaCguLi5zY29wZXMpO1xuICAgICAgcmV0dXJuIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJrYWthb1wiLFxuICAgICAgICBvcHRpb25zLFxuICAgICAgICBhdXRob3JpemF0aW9uRW5kcG9pbnQ6IFwiaHR0cHM6Ly9rYXV0aC5rYWthby5jb20vb2F1dGgvYXV0aG9yaXplXCIsXG4gICAgICAgIHNjb3BlczogX3Njb3BlcyxcbiAgICAgICAgc3RhdGUsXG4gICAgICAgIHJlZGlyZWN0VVJJXG4gICAgICB9KTtcbiAgICB9LFxuICAgIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGU6IGFzeW5jICh7IGNvZGUsIHJlZGlyZWN0VVJJIH0pID0+IHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlKHtcbiAgICAgICAgY29kZSxcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9rYXV0aC5rYWthby5jb20vb2F1dGgvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9rYXV0aC5rYWthby5jb20vb2F1dGgvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgIFwiaHR0cHM6Ly9rYXBpLmtha2FvLmNvbS92Mi91c2VyL21lXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvciB8fCAhcHJvZmlsZSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIGNvbnN0IGFjY291bnQgPSBwcm9maWxlLmtha2FvX2FjY291bnQgfHwge307XG4gICAgICBjb25zdCBrYWthb1Byb2ZpbGUgPSBhY2NvdW50LnByb2ZpbGUgfHwge307XG4gICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICBpZDogU3RyaW5nKHByb2ZpbGUuaWQpLFxuICAgICAgICBuYW1lOiBrYWthb1Byb2ZpbGUubmlja25hbWUgfHwgYWNjb3VudC5uYW1lIHx8IHZvaWQgMCxcbiAgICAgICAgZW1haWw6IGFjY291bnQuZW1haWwsXG4gICAgICAgIGltYWdlOiBrYWthb1Byb2ZpbGUucHJvZmlsZV9pbWFnZV91cmwgfHwga2FrYW9Qcm9maWxlLnRodW1ibmFpbF9pbWFnZV91cmwsXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6ICEhYWNjb3VudC5pc19lbWFpbF92YWxpZCAmJiAhIWFjY291bnQuaXNfZW1haWxfdmVyaWZpZWQsXG4gICAgICAgIC4uLnVzZXJNYXBcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyLFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgbmF2ZXIgPSAob3B0aW9ucykgPT4ge1xuICByZXR1cm4ge1xuICAgIGlkOiBcIm5hdmVyXCIsXG4gICAgbmFtZTogXCJOYXZlclwiLFxuICAgIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgc2NvcGVzLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBjb25zdCBfc2NvcGVzID0gb3B0aW9ucy5kaXNhYmxlRGVmYXVsdFNjb3BlID8gW10gOiBbXCJwcm9maWxlXCIsIFwiZW1haWxcIl07XG4gICAgICBvcHRpb25zLnNjb3BlICYmIF9zY29wZXMucHVzaCguLi5vcHRpb25zLnNjb3BlKTtcbiAgICAgIHNjb3BlcyAmJiBfc2NvcGVzLnB1c2goLi4uc2NvcGVzKTtcbiAgICAgIHJldHVybiBjcmVhdGVBdXRob3JpemF0aW9uVVJMKHtcbiAgICAgICAgaWQ6IFwibmF2ZXJcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50OiBcImh0dHBzOi8vbmlkLm5hdmVyLmNvbS9vYXV0aDIuMC9hdXRob3JpemVcIixcbiAgICAgICAgc2NvcGVzOiBfc2NvcGVzLFxuICAgICAgICBzdGF0ZSxcbiAgICAgICAgcmVkaXJlY3RVUklcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgcmVkaXJlY3RVUkkgfSkgPT4ge1xuICAgICAgcmV0dXJuIHZhbGlkYXRlQXV0aG9yaXphdGlvbkNvZGUoe1xuICAgICAgICBjb2RlLFxuICAgICAgICByZWRpcmVjdFVSSSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgdG9rZW5FbmRwb2ludDogXCJodHRwczovL25pZC5uYXZlci5jb20vb2F1dGgyLjAvdG9rZW5cIlxuICAgICAgfSk7XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICByZXR1cm4gcmVmcmVzaEFjY2Vzc1Rva2VuKHtcbiAgICAgICAgcmVmcmVzaFRva2VuLFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgY2xpZW50SWQ6IG9wdGlvbnMuY2xpZW50SWQsXG4gICAgICAgICAgY2xpZW50S2V5OiBvcHRpb25zLmNsaWVudEtleSxcbiAgICAgICAgICBjbGllbnRTZWNyZXQ6IG9wdGlvbnMuY2xpZW50U2VjcmV0XG4gICAgICAgIH0sXG4gICAgICAgIHRva2VuRW5kcG9pbnQ6IFwiaHR0cHM6Ly9uaWQubmF2ZXIuY29tL29hdXRoMi4wL3Rva2VuXCJcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgYXN5bmMgZ2V0VXNlckluZm8odG9rZW4pIHtcbiAgICAgIGlmIChvcHRpb25zLmdldFVzZXJJbmZvKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLmdldFVzZXJJbmZvKHRva2VuKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IGJldHRlckZldGNoKFxuICAgICAgICBcImh0dHBzOi8vb3BlbmFwaS5uYXZlci5jb20vdjEvbmlkL21lXCIsXG4gICAgICAgIHtcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dG9rZW4uYWNjZXNzVG9rZW59YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKTtcbiAgICAgIGlmIChlcnJvciB8fCAhcHJvZmlsZSB8fCBwcm9maWxlLnJlc3VsdGNvZGUgIT09IFwiMDBcIikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHVzZXJNYXAgPSBhd2FpdCBvcHRpb25zLm1hcFByb2ZpbGVUb1VzZXI/Lihwcm9maWxlKTtcbiAgICAgIGNvbnN0IHJlcyA9IHByb2ZpbGUucmVzcG9uc2UgfHwge307XG4gICAgICBjb25zdCB1c2VyID0ge1xuICAgICAgICBpZDogcmVzLmlkLFxuICAgICAgICBuYW1lOiByZXMubmFtZSB8fCByZXMubmlja25hbWUsXG4gICAgICAgIGVtYWlsOiByZXMuZW1haWwsXG4gICAgICAgIGltYWdlOiByZXMucHJvZmlsZV9pbWFnZSxcbiAgICAgICAgZW1haWxWZXJpZmllZDogZmFsc2UsXG4gICAgICAgIC4uLnVzZXJNYXBcbiAgICAgIH07XG4gICAgICByZXR1cm4ge1xuICAgICAgICB1c2VyLFxuICAgICAgICBkYXRhOiBwcm9maWxlXG4gICAgICB9O1xuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3QgbGluZSA9IChvcHRpb25zKSA9PiB7XG4gIGNvbnN0IGF1dGhvcml6YXRpb25FbmRwb2ludCA9IFwiaHR0cHM6Ly9hY2Nlc3MubGluZS5tZS9vYXV0aDIvdjIuMS9hdXRob3JpemVcIjtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkubGluZS5tZS9vYXV0aDIvdjIuMS90b2tlblwiO1xuICBjb25zdCB1c2VySW5mb0VuZHBvaW50ID0gXCJodHRwczovL2FwaS5saW5lLm1lL29hdXRoMi92Mi4xL3VzZXJpbmZvXCI7XG4gIGNvbnN0IHZlcmlmeUlkVG9rZW5FbmRwb2ludCA9IFwiaHR0cHM6Ly9hcGkubGluZS5tZS9vYXV0aDIvdjIuMS92ZXJpZnlcIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJsaW5lXCIsXG4gICAgbmFtZTogXCJMSU5FXCIsXG4gICAgYXN5bmMgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICBzdGF0ZSxcbiAgICAgIHNjb3BlcyxcbiAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgbG9naW5IaW50XG4gICAgfSkge1xuICAgICAgY29uc3QgX3Njb3BlcyA9IG9wdGlvbnMuZGlzYWJsZURlZmF1bHRTY29wZSA/IFtdIDogW1wib3BlbmlkXCIsIFwicHJvZmlsZVwiLCBcImVtYWlsXCJdO1xuICAgICAgb3B0aW9ucy5zY29wZSAmJiBfc2NvcGVzLnB1c2goLi4ub3B0aW9ucy5zY29wZSk7XG4gICAgICBzY29wZXMgJiYgX3Njb3Blcy5wdXNoKC4uLnNjb3Blcyk7XG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlQXV0aG9yaXphdGlvblVSTCh7XG4gICAgICAgIGlkOiBcImxpbmVcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBsb2dpbkhpbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZTogYXN5bmMgKHsgY29kZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICByZXR1cm4gdmFsaWRhdGVBdXRob3JpemF0aW9uQ29kZSh7XG4gICAgICAgIGNvZGUsXG4gICAgICAgIGNvZGVWZXJpZmllcixcbiAgICAgICAgcmVkaXJlY3RVUkksXG4gICAgICAgIG9wdGlvbnMsXG4gICAgICAgIHRva2VuRW5kcG9pbnRcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcmVmcmVzaEFjY2Vzc1Rva2VuOiBvcHRpb25zLnJlZnJlc2hBY2Nlc3NUb2tlbiA/IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuIDogYXN5bmMgKHJlZnJlc2hUb2tlbikgPT4ge1xuICAgICAgcmV0dXJuIHJlZnJlc2hBY2Nlc3NUb2tlbih7XG4gICAgICAgIHJlZnJlc2hUb2tlbixcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIGNsaWVudElkOiBvcHRpb25zLmNsaWVudElkLFxuICAgICAgICAgIGNsaWVudFNlY3JldDogb3B0aW9ucy5jbGllbnRTZWNyZXRcbiAgICAgICAgfSxcbiAgICAgICAgdG9rZW5FbmRwb2ludFxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhc3luYyB2ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSkge1xuICAgICAgaWYgKG9wdGlvbnMuZGlzYWJsZUlkVG9rZW5TaWduSW4pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudmVyaWZ5SWRUb2tlbikge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy52ZXJpZnlJZFRva2VuKHRva2VuLCBub25jZSk7XG4gICAgICB9XG4gICAgICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICAgICAgYm9keS5zZXQoXCJpZF90b2tlblwiLCB0b2tlbik7XG4gICAgICBib2R5LnNldChcImNsaWVudF9pZFwiLCBvcHRpb25zLmNsaWVudElkKTtcbiAgICAgIGlmIChub25jZSkgYm9keS5zZXQoXCJub25jZVwiLCBub25jZSk7XG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBiZXR0ZXJGZXRjaChcbiAgICAgICAgdmVyaWZ5SWRUb2tlbkVuZHBvaW50LFxuICAgICAgICB7XG4gICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICBcImNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgICBpZiAoZXJyb3IgfHwgIWRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKGRhdGEuYXVkICE9PSBvcHRpb25zLmNsaWVudElkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAobm9uY2UgJiYgZGF0YS5ub25jZSAmJiBkYXRhLm5vbmNlICE9PSBub25jZSkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBhc3luYyBnZXRVc2VySW5mbyh0b2tlbikge1xuICAgICAgaWYgKG9wdGlvbnMuZ2V0VXNlckluZm8pIHtcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZ2V0VXNlckluZm8odG9rZW4pO1xuICAgICAgfVxuICAgICAgbGV0IHByb2ZpbGUgPSBudWxsO1xuICAgICAgaWYgKHRva2VuLmlkVG9rZW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBwcm9maWxlID0gZGVjb2RlSnd0KHRva2VuLmlkVG9rZW4pO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFwcm9maWxlKSB7XG4gICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgYmV0dGVyRmV0Y2godXNlckluZm9FbmRwb2ludCwge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0b2tlbi5hY2Nlc3NUb2tlbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcHJvZmlsZSA9IGRhdGEgfHwgbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICghcHJvZmlsZSkgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4ocHJvZmlsZSk7XG4gICAgICBjb25zdCBpZCA9IHByb2ZpbGUuc3ViIHx8IHByb2ZpbGUudXNlcklkO1xuICAgICAgY29uc3QgbmFtZSA9IHByb2ZpbGUubmFtZSB8fCBwcm9maWxlLmRpc3BsYXlOYW1lO1xuICAgICAgY29uc3QgaW1hZ2UgPSBwcm9maWxlLnBpY3R1cmUgfHwgcHJvZmlsZS5waWN0dXJlVXJsIHx8IHZvaWQgMDtcbiAgICAgIGNvbnN0IGVtYWlsID0gcHJvZmlsZS5lbWFpbDtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHVzZXI6IHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBuYW1lLFxuICAgICAgICAgIGVtYWlsLFxuICAgICAgICAgIGltYWdlLFxuICAgICAgICAgIC8vIExJTkUgZG9lcyBub3QgZXhwb3NlIGVtYWlsIHZlcmlmaWNhdGlvbiBzdGF0dXMgaW4gSUQgdG9rZW4vdXNlcmluZm9cbiAgICAgICAgICBlbWFpbFZlcmlmaWVkOiBmYWxzZSxcbiAgICAgICAgICAuLi51c2VyTWFwXG4gICAgICAgIH0sXG4gICAgICAgIGRhdGE6IHByb2ZpbGVcbiAgICAgIH07XG4gICAgfSxcbiAgICBvcHRpb25zXG4gIH07XG59O1xuXG5jb25zdCBwYXlwYWwgPSAob3B0aW9ucykgPT4ge1xuICBjb25zdCBlbnZpcm9ubWVudCA9IG9wdGlvbnMuZW52aXJvbm1lbnQgfHwgXCJzYW5kYm94XCI7XG4gIGNvbnN0IGlzU2FuZGJveCA9IGVudmlyb25tZW50ID09PSBcInNhbmRib3hcIjtcbiAgY29uc3QgYXV0aG9yaXphdGlvbkVuZHBvaW50ID0gaXNTYW5kYm94ID8gXCJodHRwczovL3d3dy5zYW5kYm94LnBheXBhbC5jb20vc2lnbmluL2F1dGhvcml6ZVwiIDogXCJodHRwczovL3d3dy5wYXlwYWwuY29tL3NpZ25pbi9hdXRob3JpemVcIjtcbiAgY29uc3QgdG9rZW5FbmRwb2ludCA9IGlzU2FuZGJveCA/IFwiaHR0cHM6Ly9hcGktbS5zYW5kYm94LnBheXBhbC5jb20vdjEvb2F1dGgyL3Rva2VuXCIgOiBcImh0dHBzOi8vYXBpLW0ucGF5cGFsLmNvbS92MS9vYXV0aDIvdG9rZW5cIjtcbiAgY29uc3QgdXNlckluZm9FbmRwb2ludCA9IGlzU2FuZGJveCA/IFwiaHR0cHM6Ly9hcGktbS5zYW5kYm94LnBheXBhbC5jb20vdjEvaWRlbnRpdHkvb2F1dGgyL3VzZXJpbmZvXCIgOiBcImh0dHBzOi8vYXBpLW0ucGF5cGFsLmNvbS92MS9pZGVudGl0eS9vYXV0aDIvdXNlcmluZm9cIjtcbiAgcmV0dXJuIHtcbiAgICBpZDogXCJwYXlwYWxcIixcbiAgICBuYW1lOiBcIlBheVBhbFwiLFxuICAgIGFzeW5jIGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoeyBzdGF0ZSwgY29kZVZlcmlmaWVyLCByZWRpcmVjdFVSSSB9KSB7XG4gICAgICBpZiAoIW9wdGlvbnMuY2xpZW50SWQgfHwgIW9wdGlvbnMuY2xpZW50U2VjcmV0KSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcbiAgICAgICAgICBcIkNsaWVudCBJZCBhbmQgQ2xpZW50IFNlY3JldCBpcyByZXF1aXJlZCBmb3IgUGF5UGFsLiBNYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGVtIGluIHRoZSBvcHRpb25zLlwiXG4gICAgICAgICk7XG4gICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJDTElFTlRfSURfQU5EX1NFQ1JFVF9SRVFVSVJFRFwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IF9zY29wZXMgPSBbXTtcbiAgICAgIGNvbnN0IHVybCA9IGF3YWl0IGNyZWF0ZUF1dGhvcml6YXRpb25VUkwoe1xuICAgICAgICBpZDogXCJwYXlwYWxcIixcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgYXV0aG9yaXphdGlvbkVuZHBvaW50LFxuICAgICAgICBzY29wZXM6IF9zY29wZXMsXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBjb2RlVmVyaWZpZXIsXG4gICAgICAgIHJlZGlyZWN0VVJJLFxuICAgICAgICBwcm9tcHQ6IG9wdGlvbnMucHJvbXB0XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB1cmw7XG4gICAgfSxcbiAgICB2YWxpZGF0ZUF1dGhvcml6YXRpb25Db2RlOiBhc3luYyAoeyBjb2RlLCByZWRpcmVjdFVSSSB9KSA9PiB7XG4gICAgICBjb25zdCBjcmVkZW50aWFscyA9IGJhc2U2NC5lbmNvZGUoXG4gICAgICAgIGAke29wdGlvbnMuY2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXR9YFxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7Y3JlZGVudGlhbHN9YCxcbiAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuX1VTXCIsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGdyYW50X3R5cGU6IFwiYXV0aG9yaXphdGlvbl9jb2RlXCIsXG4gICAgICAgICAgICBjb2RlLFxuICAgICAgICAgICAgcmVkaXJlY3RfdXJpOiByZWRpcmVjdFVSSVxuICAgICAgICAgIH0pLnRvU3RyaW5nKClcbiAgICAgICAgfSk7XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIHRocm93IG5ldyBCZXR0ZXJBdXRoRXJyb3IoXCJGQUlMRURfVE9fR0VUX0FDQ0VTU19UT0tFTlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0ge1xuICAgICAgICAgIGFjY2Vzc1Rva2VuOiBkYXRhLmFjY2Vzc190b2tlbixcbiAgICAgICAgICByZWZyZXNoVG9rZW46IGRhdGEucmVmcmVzaF90b2tlbixcbiAgICAgICAgICBhY2Nlc3NUb2tlbkV4cGlyZXNBdDogZGF0YS5leHBpcmVzX2luID8gbmV3IERhdGUoRGF0ZS5ub3coKSArIGRhdGEuZXhwaXJlc19pbiAqIDFlMykgOiB2b2lkIDAsXG4gICAgICAgICAgaWRUb2tlbjogZGF0YS5pZF90b2tlblxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgbG9nZ2VyLmVycm9yKFwiUGF5UGFsIHRva2VuIGV4Y2hhbmdlIGZhaWxlZDpcIiwgZXJyb3IpO1xuICAgICAgICB0aHJvdyBuZXcgQmV0dGVyQXV0aEVycm9yKFwiRkFJTEVEX1RPX0dFVF9BQ0NFU1NfVE9LRU5cIik7XG4gICAgICB9XG4gICAgfSxcbiAgICByZWZyZXNoQWNjZXNzVG9rZW46IG9wdGlvbnMucmVmcmVzaEFjY2Vzc1Rva2VuID8gb3B0aW9ucy5yZWZyZXNoQWNjZXNzVG9rZW4gOiBhc3luYyAocmVmcmVzaFRva2VuKSA9PiB7XG4gICAgICBjb25zdCBjcmVkZW50aWFscyA9IGJhc2U2NC5lbmNvZGUoXG4gICAgICAgIGAke29wdGlvbnMuY2xpZW50SWR9OiR7b3B0aW9ucy5jbGllbnRTZWNyZXR9YFxuICAgICAgKTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2godG9rZW5FbmRwb2ludCwge1xuICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJhc2ljICR7Y3JlZGVudGlhbHN9YCxcbiAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBcIkFjY2VwdC1MYW5ndWFnZVwiOiBcImVuX1VTXCIsXG4gICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBib2R5OiBuZXcgVVJMU2VhcmNoUGFyYW1zKHtcbiAgICAgICAgICAgIGdyYW50X3R5cGU6IFwicmVmcmVzaF90b2tlblwiLFxuICAgICAgICAgICAgcmVmcmVzaF90b2tlbjogcmVmcmVzaFRva2VuXG4gICAgICAgICAgfSkudG9TdHJpbmcoKVxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19SRUZSRVNIX0FDQ0VTU19UT0tFTlwiKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhY2Nlc3NUb2tlbjogZGF0YS5hY2Nlc3NfdG9rZW4sXG4gICAgICAgICAgcmVmcmVzaFRva2VuOiBkYXRhLnJlZnJlc2hfdG9rZW4sXG4gICAgICAgICAgYWNjZXNzVG9rZW5FeHBpcmVzQXQ6IGRhdGEuZXhwaXJlc19pbiA/IG5ldyBEYXRlKERhdGUubm93KCkgKyBkYXRhLmV4cGlyZXNfaW4gKiAxZTMpIDogdm9pZCAwXG4gICAgICAgIH07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJQYXlQYWwgdG9rZW4gcmVmcmVzaCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgbmV3IEJldHRlckF1dGhFcnJvcihcIkZBSUxFRF9UT19SRUZSRVNIX0FDQ0VTU19UT0tFTlwiKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIHZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKSB7XG4gICAgICBpZiAob3B0aW9ucy5kaXNhYmxlSWRUb2tlblNpZ25Jbikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBpZiAob3B0aW9ucy52ZXJpZnlJZFRva2VuKSB7XG4gICAgICAgIHJldHVybiBvcHRpb25zLnZlcmlmeUlkVG9rZW4odG9rZW4sIG5vbmNlKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBkZWNvZGVKd3QodG9rZW4pO1xuICAgICAgICByZXR1cm4gISFwYXlsb2FkLnN1YjtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byB2ZXJpZnkgUGF5UGFsIElEIHRva2VuOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGFzeW5jIGdldFVzZXJJbmZvKHRva2VuKSB7XG4gICAgICBpZiAob3B0aW9ucy5nZXRVc2VySW5mbykge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5nZXRVc2VySW5mbyh0b2tlbik7XG4gICAgICB9XG4gICAgICBpZiAoIXRva2VuLmFjY2Vzc1Rva2VuKSB7XG4gICAgICAgIGxvZ2dlci5lcnJvcihcIkFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZCB0byBmZXRjaCBQYXlQYWwgdXNlciBpbmZvXCIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYmV0dGVyRmV0Y2goXG4gICAgICAgICAgYCR7dXNlckluZm9FbmRwb2ludH0/c2NoZW1hPXBheXBhbHYxLjFgLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3Rva2VuLmFjY2Vzc1Rva2VufWAsXG4gICAgICAgICAgICAgIEFjY2VwdDogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICAgIGlmICghcmVzcG9uc2UuZGF0YSkge1xuICAgICAgICAgIGxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCB1c2VyIGluZm8gZnJvbSBQYXlQYWxcIik7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNlckluZm8gPSByZXNwb25zZS5kYXRhO1xuICAgICAgICBjb25zdCB1c2VyTWFwID0gYXdhaXQgb3B0aW9ucy5tYXBQcm9maWxlVG9Vc2VyPy4odXNlckluZm8pO1xuICAgICAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgaWQ6IHVzZXJJbmZvLnVzZXJfaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VySW5mby5uYW1lLFxuICAgICAgICAgICAgZW1haWw6IHVzZXJJbmZvLmVtYWlsLFxuICAgICAgICAgICAgaW1hZ2U6IHVzZXJJbmZvLnBpY3R1cmUsXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkOiB1c2VySW5mby5lbWFpbF92ZXJpZmllZCxcbiAgICAgICAgICAgIC4uLnVzZXJNYXBcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHVzZXJJbmZvXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBsb2dnZXIuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggdXNlciBpbmZvIGZyb20gUGF5UGFsOlwiLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH0sXG4gICAgb3B0aW9uc1xuICB9O1xufTtcblxuY29uc3Qgc29jaWFsUHJvdmlkZXJzID0ge1xuICBhcHBsZSxcbiAgYXRsYXNzaWFuLFxuICBjb2duaXRvLFxuICBkaXNjb3JkLFxuICBmYWNlYm9vayxcbiAgZmlnbWEsXG4gIGdpdGh1YixcbiAgbWljcm9zb2Z0LFxuICBnb29nbGUsXG4gIGh1Z2dpbmdmYWNlLFxuICBzbGFjayxcbiAgc3BvdGlmeSxcbiAgdHdpdGNoLFxuICB0d2l0dGVyLFxuICBkcm9wYm94LFxuICBraWNrLFxuICBsaW5lYXIsXG4gIGxpbmtlZGluLFxuICBnaXRsYWIsXG4gIHRpa3RvayxcbiAgcmVkZGl0LFxuICByb2Jsb3gsXG4gIHNhbGVzZm9yY2UsXG4gIHZrLFxuICB6b29tLFxuICBub3Rpb24sXG4gIGtha2FvLFxuICBuYXZlcixcbiAgbGluZSxcbiAgcGF5cGFsXG59O1xuY29uc3Qgc29jaWFsUHJvdmlkZXJMaXN0ID0gT2JqZWN0LmtleXMoc29jaWFsUHJvdmlkZXJzKTtcbmNvbnN0IFNvY2lhbFByb3ZpZGVyTGlzdEVudW0gPSB6LmVudW0oc29jaWFsUHJvdmlkZXJMaXN0KS5vcih6LnN0cmluZygpKTtcblxuZXhwb3J0IHsgU29jaWFsUHJvdmlkZXJMaXN0RW51bSwgYXBwbGUsIGF0bGFzc2lhbiwgY29nbml0bywgZGlzY29yZCwgZHJvcGJveCwgZmFjZWJvb2ssIGZpZ21hLCBnZXRBcHBsZVB1YmxpY0tleSwgZ2V0Q29nbml0b1B1YmxpY0tleSwgZ2l0aHViLCBnaXRsYWIsIGdvb2dsZSwgaHVnZ2luZ2ZhY2UsIGtha2FvLCBraWNrLCBsaW5lLCBsaW5lYXIsIGxpbmtlZGluLCBtaWNyb3NvZnQsIG5hdmVyLCBub3Rpb24sIHBheXBhbCwgcmVkZGl0LCByb2Jsb3gsIHNhbGVzZm9yY2UsIHNsYWNrLCBzb2NpYWxQcm92aWRlckxpc3QsIHNvY2lhbFByb3ZpZGVycywgc3BvdGlmeSwgdGlrdG9rLCB0d2l0Y2gsIHR3aXR0ZXIsIHZrLCB6b29tIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/social-providers/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/@better-auth/core/dist/utils/index.mjs ***!
  \*************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   defineErrorCodes: () => (/* binding */ defineErrorCodes)\n/* harmony export */ });\nfunction defineErrorCodes(codes) {\n  return codes;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC91dGlscy9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTs7QUFFNEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL2NvcmUvZGlzdC91dGlscy9pbmRleC5tanM/OWYyMyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBkZWZpbmVFcnJvckNvZGVzKGNvZGVzKSB7XG4gIHJldHVybiBjb2Rlcztcbn1cblxuZXhwb3J0IHsgZGVmaW5lRXJyb3JDb2RlcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/core/dist/utils/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/telemetry/dist/index.mjs":
/*!************************************************************!*\
  !*** ./node_modules/@better-auth/telemetry/dist/index.mjs ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createTelemetry: () => (/* binding */ createTelemetry),\n/* harmony export */   getTelemetryAuthConfig: () => (/* binding */ getTelemetryAuthConfig)\n/* harmony export */ });\n/* harmony import */ var _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @better-auth/core/env */ \"(rsc)/./node_modules/@better-auth/core/dist/env/index.mjs\");\n/* harmony import */ var _better_auth_utils_random__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @better-auth/utils/random */ \"(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\");\n/* harmony import */ var _better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @better-auth/utils/hash */ \"(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\");\n/* harmony import */ var _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @better-auth/utils/base64 */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _better_fetch_fetch__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @better-fetch/fetch */ \"(rsc)/./node_modules/@better-fetch/fetch/dist/index.js\");\n\n\n\n\n\n\nconst generateId = (size) => {\n  return (0,_better_auth_utils_random__WEBPACK_IMPORTED_MODULE_1__.createRandomStringGenerator)(\"a-z\", \"A-Z\", \"0-9\")(size);\n};\n\nasync function hashToBase64(data) {\n  const buffer = await (0,_better_auth_utils_hash__WEBPACK_IMPORTED_MODULE_2__.createHash)(\"SHA-256\").digest(data);\n  return _better_auth_utils_base64__WEBPACK_IMPORTED_MODULE_3__.base64.encode(buffer);\n}\n\nlet packageJSONCache;\nasync function readRootPackageJson() {\n  if (packageJSONCache) return packageJSONCache;\n  try {\n    const cwd = typeof process !== \"undefined\" && typeof process.cwd === \"function\" ? process.cwd() : \"\";\n    if (!cwd) return void 0;\n    const importRuntime = (m) => Function(\"mm\", \"return import(mm)\")(m);\n    const [{ default: fs }, { default: path }] = await Promise.all([\n      importRuntime(\"fs/promises\"),\n      importRuntime(\"path\")\n    ]);\n    const raw = await fs.readFile(path.join(cwd, \"package.json\"), \"utf-8\");\n    packageJSONCache = JSON.parse(raw);\n    return packageJSONCache;\n  } catch {\n  }\n  return void 0;\n}\nasync function getPackageVersion(pkg) {\n  if (packageJSONCache) {\n    return packageJSONCache.dependencies?.[pkg] || packageJSONCache.devDependencies?.[pkg] || packageJSONCache.peerDependencies?.[pkg];\n  }\n  try {\n    const cwd = typeof process !== \"undefined\" && typeof process.cwd === \"function\" ? process.cwd() : \"\";\n    if (!cwd) throw new Error(\"no-cwd\");\n    const importRuntime = (m) => Function(\"mm\", \"return import(mm)\")(m);\n    const [{ default: fs }, { default: path }] = await Promise.all([\n      importRuntime(\"fs/promises\"),\n      importRuntime(\"path\")\n    ]);\n    const pkgJsonPath = path.join(cwd, \"node_modules\", pkg, \"package.json\");\n    const raw = await fs.readFile(pkgJsonPath, \"utf-8\");\n    const json = JSON.parse(raw);\n    const resolved = json.version || await getVersionFromLocalPackageJson(pkg) || void 0;\n    return resolved;\n  } catch {\n  }\n  const fromRoot = await getVersionFromLocalPackageJson(pkg);\n  return fromRoot;\n}\nasync function getVersionFromLocalPackageJson(pkg) {\n  const json = await readRootPackageJson();\n  if (!json) return void 0;\n  const allDeps = {\n    ...json.dependencies,\n    ...json.devDependencies,\n    ...json.peerDependencies\n  };\n  return allDeps[pkg];\n}\nasync function getNameFromLocalPackageJson() {\n  const json = await readRootPackageJson();\n  return json?.name;\n}\n\nlet projectIdCached = null;\nasync function getProjectId(baseUrl) {\n  if (projectIdCached) return projectIdCached;\n  const projectName = await getNameFromLocalPackageJson();\n  if (projectName) {\n    projectIdCached = await hashToBase64(\n      baseUrl ? baseUrl + projectName : projectName\n    );\n    return projectIdCached;\n  }\n  if (baseUrl) {\n    projectIdCached = await hashToBase64(baseUrl);\n    return projectIdCached;\n  }\n  projectIdCached = generateId(32);\n  return projectIdCached;\n}\n\nconst importRuntime = (m) => {\n  return Function(\"mm\", \"return import(mm)\")(m);\n};\n\nfunction getVendor() {\n  const hasAny = (...keys) => keys.some((k) => Boolean(_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env[k]));\n  if (hasAny(\"CF_PAGES\", \"CF_PAGES_URL\", \"CF_ACCOUNT_ID\") || typeof navigator !== \"undefined\" && navigator.userAgent === \"Cloudflare-Workers\") {\n    return \"cloudflare\";\n  }\n  if (hasAny(\"VERCEL\", \"VERCEL_URL\", \"VERCEL_ENV\")) return \"vercel\";\n  if (hasAny(\"NETLIFY\", \"NETLIFY_URL\")) return \"netlify\";\n  if (hasAny(\n    \"RENDER\",\n    \"RENDER_URL\",\n    \"RENDER_INTERNAL_HOSTNAME\",\n    \"RENDER_SERVICE_ID\"\n  )) {\n    return \"render\";\n  }\n  if (hasAny(\"AWS_LAMBDA_FUNCTION_NAME\", \"AWS_EXECUTION_ENV\", \"LAMBDA_TASK_ROOT\")) {\n    return \"aws\";\n  }\n  if (hasAny(\n    \"GOOGLE_CLOUD_FUNCTION_NAME\",\n    \"GOOGLE_CLOUD_PROJECT\",\n    \"GCP_PROJECT\",\n    \"K_SERVICE\"\n  )) {\n    return \"gcp\";\n  }\n  if (hasAny(\n    \"AZURE_FUNCTION_NAME\",\n    \"FUNCTIONS_WORKER_RUNTIME\",\n    \"WEBSITE_INSTANCE_ID\",\n    \"WEBSITE_SITE_NAME\"\n  )) {\n    return \"azure\";\n  }\n  if (hasAny(\"DENO_DEPLOYMENT_ID\", \"DENO_REGION\")) return \"deno-deploy\";\n  if (hasAny(\"FLY_APP_NAME\", \"FLY_REGION\", \"FLY_ALLOC_ID\")) return \"fly-io\";\n  if (hasAny(\"RAILWAY_STATIC_URL\", \"RAILWAY_ENVIRONMENT_NAME\"))\n    return \"railway\";\n  if (hasAny(\"DYNO\", \"HEROKU_APP_NAME\")) return \"heroku\";\n  if (hasAny(\"DO_DEPLOYMENT_ID\", \"DO_APP_NAME\", \"DIGITALOCEAN\"))\n    return \"digitalocean\";\n  if (hasAny(\"KOYEB\", \"KOYEB_DEPLOYMENT_ID\", \"KOYEB_APP_NAME\")) return \"koyeb\";\n  return null;\n}\nasync function detectSystemInfo() {\n  try {\n    if (getVendor() === \"cloudflare\") return \"cloudflare\";\n    const os = await importRuntime(\"os\");\n    const cpus = os.cpus();\n    return {\n      deploymentVendor: getVendor(),\n      systemPlatform: os.platform(),\n      systemRelease: os.release(),\n      systemArchitecture: os.arch(),\n      cpuCount: cpus.length,\n      cpuModel: cpus.length ? cpus[0].model : null,\n      cpuSpeed: cpus.length ? cpus[0].speed : null,\n      memory: os.totalmem(),\n      isWSL: await isWsl(),\n      isDocker: await isDocker(),\n      isTTY: typeof process !== \"undefined\" && process.stdout ? process.stdout.isTTY : null\n    };\n  } catch (e) {\n    return {\n      systemPlatform: null,\n      systemRelease: null,\n      systemArchitecture: null,\n      cpuCount: null,\n      cpuModel: null,\n      cpuSpeed: null,\n      memory: null,\n      isWSL: null,\n      isDocker: null,\n      isTTY: null\n    };\n  }\n}\nlet isDockerCached;\nasync function hasDockerEnv() {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    fs.statSync(\"/.dockerenv\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nasync function hasDockerCGroup() {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    return fs.readFileSync(\"/proc/self/cgroup\", \"utf8\").includes(\"docker\");\n  } catch {\n    return false;\n  }\n}\nasync function isDocker() {\n  if (getVendor() === \"cloudflare\") return false;\n  if (isDockerCached === void 0) {\n    isDockerCached = await hasDockerEnv() || await hasDockerCGroup();\n  }\n  return isDockerCached;\n}\nasync function isWsl() {\n  try {\n    if (getVendor() === \"cloudflare\") return false;\n    if (typeof process === \"undefined\" || process?.platform !== \"linux\") {\n      return false;\n    }\n    const fs = await importRuntime(\"fs\");\n    const os = await importRuntime(\"os\");\n    if (os.release().toLowerCase().includes(\"microsoft\")) {\n      if (await isInsideContainer()) {\n        return false;\n      }\n      return true;\n    }\n    return fs.readFileSync(\"/proc/version\", \"utf8\").toLowerCase().includes(\"microsoft\") ? !await isInsideContainer() : false;\n  } catch {\n    return false;\n  }\n}\nlet isInsideContainerCached;\nconst hasContainerEnv = async () => {\n  if (getVendor() === \"cloudflare\") return false;\n  try {\n    const fs = await importRuntime(\"fs\");\n    fs.statSync(\"/run/.containerenv\");\n    return true;\n  } catch {\n    return false;\n  }\n};\nasync function isInsideContainer() {\n  if (isInsideContainerCached === void 0) {\n    isInsideContainerCached = await hasContainerEnv() || await isDocker();\n  }\n  return isInsideContainerCached;\n}\nfunction isCI() {\n  return _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.CI !== \"false\" && (\"BUILD_ID\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Jenkins, Cloudbees\n  \"BUILD_NUMBER\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Jenkins, TeamCity (fixed typo: extra space removed)\n  \"CI\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Travis CI, CircleCI, Cirrus CI, Gitlab CI, Appveyor, CodeShip, dsari, Cloudflare\n  \"CI_APP_ID\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Appflow\n  \"CI_BUILD_ID\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Appflow\n  \"CI_BUILD_NUMBER\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Appflow\n  \"CI_NAME\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Codeship and others\n  \"CONTINUOUS_INTEGRATION\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env || // Travis CI, Cirrus CI\n  \"RUN_ID\" in _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env);\n}\n\nfunction detectRuntime() {\n  if (typeof Deno !== \"undefined\") {\n    const denoVersion = Deno?.version?.deno ?? null;\n    return { name: \"deno\", version: denoVersion };\n  }\n  if (typeof Bun !== \"undefined\") {\n    const bunVersion = Bun?.version ?? null;\n    return { name: \"bun\", version: bunVersion };\n  }\n  if (typeof process !== \"undefined\" && process?.versions?.node) {\n    return { name: \"node\", version: process.versions.node ?? null };\n  }\n  return { name: \"edge\", version: null };\n}\nfunction detectEnvironment() {\n  return (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.getEnvVar)(\"NODE_ENV\") === \"production\" ? \"production\" : isCI() ? \"ci\" : (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isTest)() ? \"test\" : \"development\";\n}\n\nconst DATABASES = {\n  pg: \"postgresql\",\n  mysql: \"mysql\",\n  mariadb: \"mariadb\",\n  sqlite3: \"sqlite\",\n  \"better-sqlite3\": \"sqlite\",\n  \"@prisma/client\": \"prisma\",\n  mongoose: \"mongodb\",\n  mongodb: \"mongodb\",\n  \"drizzle-orm\": \"drizzle\"\n};\nasync function detectDatabase() {\n  for (const [pkg, name] of Object.entries(DATABASES)) {\n    const version = await getPackageVersion(pkg);\n    if (version) return { name, version };\n  }\n  return void 0;\n}\n\nconst FRAMEWORKS = {\n  next: \"next\",\n  nuxt: \"nuxt\",\n  \"@remix-run/server-runtime\": \"remix\",\n  astro: \"astro\",\n  \"@sveltejs/kit\": \"sveltekit\",\n  \"solid-start\": \"solid-start\",\n  \"tanstack-start\": \"tanstack-start\",\n  hono: \"hono\",\n  express: \"express\",\n  elysia: \"elysia\",\n  expo: \"expo\"\n};\nasync function detectFramework() {\n  for (const [pkg, name] of Object.entries(FRAMEWORKS)) {\n    const version = await getPackageVersion(pkg);\n    if (version) return { name, version };\n  }\n  return void 0;\n}\n\nfunction detectPackageManager() {\n  const userAgent = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.env.npm_config_user_agent;\n  if (!userAgent) {\n    return void 0;\n  }\n  const pmSpec = userAgent.split(\" \")[0];\n  const separatorPos = pmSpec.lastIndexOf(\"/\");\n  const name = pmSpec.substring(0, separatorPos);\n  return {\n    name: name === \"npminstall\" ? \"cnpm\" : name,\n    version: pmSpec.substring(separatorPos + 1)\n  };\n}\n\nfunction getTelemetryAuthConfig(options, context) {\n  return {\n    database: context?.database,\n    adapter: context?.adapter,\n    emailVerification: {\n      sendVerificationEmail: !!options.emailVerification?.sendVerificationEmail,\n      sendOnSignUp: !!options.emailVerification?.sendOnSignUp,\n      sendOnSignIn: !!options.emailVerification?.sendOnSignIn,\n      autoSignInAfterVerification: !!options.emailVerification?.autoSignInAfterVerification,\n      expiresIn: options.emailVerification?.expiresIn,\n      onEmailVerification: !!options.emailVerification?.onEmailVerification,\n      afterEmailVerification: !!options.emailVerification?.afterEmailVerification\n    },\n    emailAndPassword: {\n      enabled: !!options.emailAndPassword?.enabled,\n      disableSignUp: !!options.emailAndPassword?.disableSignUp,\n      requireEmailVerification: !!options.emailAndPassword?.requireEmailVerification,\n      maxPasswordLength: options.emailAndPassword?.maxPasswordLength,\n      minPasswordLength: options.emailAndPassword?.minPasswordLength,\n      sendResetPassword: !!options.emailAndPassword?.sendResetPassword,\n      resetPasswordTokenExpiresIn: options.emailAndPassword?.resetPasswordTokenExpiresIn,\n      onPasswordReset: !!options.emailAndPassword?.onPasswordReset,\n      password: {\n        hash: !!options.emailAndPassword?.password?.hash,\n        verify: !!options.emailAndPassword?.password?.verify\n      },\n      autoSignIn: !!options.emailAndPassword?.autoSignIn,\n      revokeSessionsOnPasswordReset: !!options.emailAndPassword?.revokeSessionsOnPasswordReset\n    },\n    socialProviders: Object.keys(options.socialProviders || {}).map((p) => {\n      const provider = options.socialProviders?.[p];\n      if (!provider) return {};\n      return {\n        id: p,\n        mapProfileToUser: !!provider.mapProfileToUser,\n        disableDefaultScope: !!provider.disableDefaultScope,\n        disableIdTokenSignIn: !!provider.disableIdTokenSignIn,\n        disableImplicitSignUp: provider.disableImplicitSignUp,\n        disableSignUp: provider.disableSignUp,\n        getUserInfo: !!provider.getUserInfo,\n        overrideUserInfoOnSignIn: !!provider.overrideUserInfoOnSignIn,\n        prompt: provider.prompt,\n        verifyIdToken: !!provider.verifyIdToken,\n        scope: provider.scope,\n        refreshAccessToken: !!provider.refreshAccessToken\n      };\n    }),\n    plugins: options.plugins?.map((p) => p.id.toString()),\n    user: {\n      modelName: options.user?.modelName,\n      fields: options.user?.fields,\n      additionalFields: options.user?.additionalFields,\n      changeEmail: {\n        enabled: options.user?.changeEmail?.enabled,\n        sendChangeEmailVerification: !!options.user?.changeEmail?.sendChangeEmailVerification\n      }\n    },\n    verification: {\n      modelName: options.verification?.modelName,\n      disableCleanup: options.verification?.disableCleanup,\n      fields: options.verification?.fields\n    },\n    session: {\n      modelName: options.session?.modelName,\n      additionalFields: options.session?.additionalFields,\n      cookieCache: {\n        enabled: options.session?.cookieCache?.enabled,\n        maxAge: options.session?.cookieCache?.maxAge\n      },\n      disableSessionRefresh: options.session?.disableSessionRefresh,\n      expiresIn: options.session?.expiresIn,\n      fields: options.session?.fields,\n      freshAge: options.session?.freshAge,\n      preserveSessionInDatabase: options.session?.preserveSessionInDatabase,\n      storeSessionInDatabase: options.session?.storeSessionInDatabase,\n      updateAge: options.session?.updateAge\n    },\n    account: {\n      modelName: options.account?.modelName,\n      fields: options.account?.fields,\n      encryptOAuthTokens: options.account?.encryptOAuthTokens,\n      updateAccountOnSignIn: options.account?.updateAccountOnSignIn,\n      accountLinking: {\n        enabled: options.account?.accountLinking?.enabled,\n        trustedProviders: options.account?.accountLinking?.trustedProviders,\n        updateUserInfoOnLink: options.account?.accountLinking?.updateUserInfoOnLink,\n        allowUnlinkingAll: options.account?.accountLinking?.allowUnlinkingAll\n      }\n    },\n    hooks: {\n      after: !!options.hooks?.after,\n      before: !!options.hooks?.before\n    },\n    secondaryStorage: !!options.secondaryStorage,\n    advanced: {\n      cookiePrefix: !!options.advanced?.cookiePrefix,\n      //this shouldn't be tracked\n      cookies: !!options.advanced?.cookies,\n      crossSubDomainCookies: {\n        domain: !!options.advanced?.crossSubDomainCookies?.domain,\n        enabled: options.advanced?.crossSubDomainCookies?.enabled,\n        additionalCookies: options.advanced?.crossSubDomainCookies?.additionalCookies\n      },\n      database: {\n        useNumberId: !!options.advanced?.database?.useNumberId,\n        generateId: options.advanced?.database?.generateId,\n        defaultFindManyLimit: options.advanced?.database?.defaultFindManyLimit\n      },\n      useSecureCookies: options.advanced?.useSecureCookies,\n      ipAddress: {\n        disableIpTracking: options.advanced?.ipAddress?.disableIpTracking,\n        ipAddressHeaders: options.advanced?.ipAddress?.ipAddressHeaders\n      },\n      disableCSRFCheck: options.advanced?.disableCSRFCheck,\n      cookieAttributes: {\n        expires: options.advanced?.defaultCookieAttributes?.expires,\n        secure: options.advanced?.defaultCookieAttributes?.secure,\n        sameSite: options.advanced?.defaultCookieAttributes?.sameSite,\n        domain: !!options.advanced?.defaultCookieAttributes?.domain,\n        path: options.advanced?.defaultCookieAttributes?.path,\n        httpOnly: options.advanced?.defaultCookieAttributes?.httpOnly\n      }\n    },\n    trustedOrigins: options.trustedOrigins?.length,\n    rateLimit: {\n      storage: options.rateLimit?.storage,\n      modelName: options.rateLimit?.modelName,\n      window: options.rateLimit?.window,\n      customStorage: !!options.rateLimit?.customStorage,\n      enabled: options.rateLimit?.enabled,\n      max: options.rateLimit?.max\n    },\n    onAPIError: {\n      errorURL: options.onAPIError?.errorURL,\n      onError: !!options.onAPIError?.onError,\n      throw: options.onAPIError?.throw\n    },\n    logger: {\n      disabled: options.logger?.disabled,\n      level: options.logger?.level,\n      log: !!options.logger?.log\n    },\n    databaseHooks: {\n      user: {\n        create: {\n          after: !!options.databaseHooks?.user?.create?.after,\n          before: !!options.databaseHooks?.user?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.user?.update?.after,\n          before: !!options.databaseHooks?.user?.update?.before\n        }\n      },\n      session: {\n        create: {\n          after: !!options.databaseHooks?.session?.create?.after,\n          before: !!options.databaseHooks?.session?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.session?.update?.after,\n          before: !!options.databaseHooks?.session?.update?.before\n        }\n      },\n      account: {\n        create: {\n          after: !!options.databaseHooks?.account?.create?.after,\n          before: !!options.databaseHooks?.account?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.account?.update?.after,\n          before: !!options.databaseHooks?.account?.update?.before\n        }\n      },\n      verification: {\n        create: {\n          after: !!options.databaseHooks?.verification?.create?.after,\n          before: !!options.databaseHooks?.verification?.create?.before\n        },\n        update: {\n          after: !!options.databaseHooks?.verification?.update?.after,\n          before: !!options.databaseHooks?.verification?.update?.before\n        }\n      }\n    }\n  };\n}\n\nasync function createTelemetry(options, context) {\n  const debugEnabled = options.telemetry?.debug || (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.getBooleanEnvVar)(\"BETTER_AUTH_TELEMETRY_DEBUG\", false);\n  const TELEMETRY_ENDPOINT = _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.ENV.BETTER_AUTH_TELEMETRY_ENDPOINT;\n  const track = async (event) => {\n    try {\n      if (context?.customTrack) {\n        await context.customTrack(event);\n      } else {\n        if (debugEnabled) {\n          await Promise.resolve(\n            _better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.logger.info(\"telemetry event\", JSON.stringify(event, null, 2))\n          );\n        } else {\n          await (0,_better_fetch_fetch__WEBPACK_IMPORTED_MODULE_4__.betterFetch)(TELEMETRY_ENDPOINT, {\n            method: \"POST\",\n            body: event\n          });\n        }\n      }\n    } catch {\n    }\n  };\n  const isEnabled = async () => {\n    const telemetryEnabled = options.telemetry?.enabled !== void 0 ? options.telemetry.enabled : false;\n    const envEnabled = (0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.getBooleanEnvVar)(\"BETTER_AUTH_TELEMETRY\", false);\n    return (envEnabled || telemetryEnabled) && (context?.skipTestCheck || !(0,_better_auth_core_env__WEBPACK_IMPORTED_MODULE_0__.isTest)());\n  };\n  const enabled = await isEnabled();\n  let anonymousId;\n  if (enabled) {\n    anonymousId = await getProjectId(options.baseURL);\n    const payload = {\n      config: getTelemetryAuthConfig(options),\n      runtime: detectRuntime(),\n      database: await detectDatabase(),\n      framework: await detectFramework(),\n      environment: detectEnvironment(),\n      systemInfo: await detectSystemInfo(),\n      packageManager: detectPackageManager()\n    };\n    void track({ type: \"init\", payload, anonymousId });\n  }\n  return {\n    publish: async (event) => {\n      if (!enabled) return;\n      if (!anonymousId) {\n        anonymousId = await getProjectId(options.baseURL);\n      }\n      await track({\n        type: event.type,\n        payload: event.payload,\n        anonymousId\n      });\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3RlbGVtZXRyeS9kaXN0L2luZGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQThGO0FBQ3RCO0FBQ25CO0FBQ0Y7QUFDRDs7QUFFbEQ7QUFDQSxTQUFTLHNGQUEyQjtBQUNwQzs7QUFFQTtBQUNBLHVCQUF1QixtRUFBVTtBQUNqQyxTQUFTLDZEQUFNO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLGFBQWEsSUFBSSxlQUFlO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxhQUFhLElBQUksZUFBZTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVEQUF1RCxzREFBRztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLHNEQUFHLG9CQUFvQixvRUFBaUI7QUFDakQsRUFBRSx3RUFBcUI7QUFDdkIsRUFBRSw4REFBVztBQUNiLEVBQUUscUVBQWtCO0FBQ3BCLEVBQUUsdUVBQW9CO0FBQ3RCLEVBQUUsMkVBQXdCO0FBQzFCLEVBQUUsbUVBQWdCO0FBQ2xCLEVBQUUsa0ZBQStCO0FBQ2pDLEVBQUUsa0VBQWU7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTLGdFQUFTLCtEQUErRCw2REFBTTtBQUN2Rjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0Isc0RBQUc7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsOERBQThEO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1EQUFtRCx1RUFBZ0I7QUFDbkUsNkJBQTZCLHNEQUFHO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQSxZQUFZLHlEQUFNO0FBQ2xCO0FBQ0EsVUFBVTtBQUNWLGdCQUFnQixnRUFBVztBQUMzQjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsdUVBQWdCO0FBQ3ZDLDJFQUEyRSw2REFBTTtBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLG9DQUFvQztBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTs7QUFFbUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3RlbGVtZXRyeS9kaXN0L2luZGV4Lm1qcz8xMjQ1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVudiwgZ2V0RW52VmFyLCBpc1Rlc3QsIGdldEJvb2xlYW5FbnZWYXIsIEVOViwgbG9nZ2VyIH0gZnJvbSAnQGJldHRlci1hdXRoL2NvcmUvZW52JztcbmltcG9ydCB7IGNyZWF0ZVJhbmRvbVN0cmluZ0dlbmVyYXRvciB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9yYW5kb20nO1xuaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9oYXNoJztcbmltcG9ydCB7IGJhc2U2NCB9IGZyb20gJ0BiZXR0ZXItYXV0aC91dGlscy9iYXNlNjQnO1xuaW1wb3J0IHsgYmV0dGVyRmV0Y2ggfSBmcm9tICdAYmV0dGVyLWZldGNoL2ZldGNoJztcblxuY29uc3QgZ2VuZXJhdGVJZCA9IChzaXplKSA9PiB7XG4gIHJldHVybiBjcmVhdGVSYW5kb21TdHJpbmdHZW5lcmF0b3IoXCJhLXpcIiwgXCJBLVpcIiwgXCIwLTlcIikoc2l6ZSk7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBoYXNoVG9CYXNlNjQoZGF0YSkge1xuICBjb25zdCBidWZmZXIgPSBhd2FpdCBjcmVhdGVIYXNoKFwiU0hBLTI1NlwiKS5kaWdlc3QoZGF0YSk7XG4gIHJldHVybiBiYXNlNjQuZW5jb2RlKGJ1ZmZlcik7XG59XG5cbmxldCBwYWNrYWdlSlNPTkNhY2hlO1xuYXN5bmMgZnVuY3Rpb24gcmVhZFJvb3RQYWNrYWdlSnNvbigpIHtcbiAgaWYgKHBhY2thZ2VKU09OQ2FjaGUpIHJldHVybiBwYWNrYWdlSlNPTkNhY2hlO1xuICB0cnkge1xuICAgIGNvbnN0IGN3ZCA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBwcm9jZXNzLmN3ZCA9PT0gXCJmdW5jdGlvblwiID8gcHJvY2Vzcy5jd2QoKSA6IFwiXCI7XG4gICAgaWYgKCFjd2QpIHJldHVybiB2b2lkIDA7XG4gICAgY29uc3QgaW1wb3J0UnVudGltZSA9IChtKSA9PiBGdW5jdGlvbihcIm1tXCIsIFwicmV0dXJuIGltcG9ydChtbSlcIikobSk7XG4gICAgY29uc3QgW3sgZGVmYXVsdDogZnMgfSwgeyBkZWZhdWx0OiBwYXRoIH1dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgaW1wb3J0UnVudGltZShcImZzL3Byb21pc2VzXCIpLFxuICAgICAgaW1wb3J0UnVudGltZShcInBhdGhcIilcbiAgICBdKTtcbiAgICBjb25zdCByYXcgPSBhd2FpdCBmcy5yZWFkRmlsZShwYXRoLmpvaW4oY3dkLCBcInBhY2thZ2UuanNvblwiKSwgXCJ1dGYtOFwiKTtcbiAgICBwYWNrYWdlSlNPTkNhY2hlID0gSlNPTi5wYXJzZShyYXcpO1xuICAgIHJldHVybiBwYWNrYWdlSlNPTkNhY2hlO1xuICB9IGNhdGNoIHtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0UGFja2FnZVZlcnNpb24ocGtnKSB7XG4gIGlmIChwYWNrYWdlSlNPTkNhY2hlKSB7XG4gICAgcmV0dXJuIHBhY2thZ2VKU09OQ2FjaGUuZGVwZW5kZW5jaWVzPy5bcGtnXSB8fCBwYWNrYWdlSlNPTkNhY2hlLmRldkRlcGVuZGVuY2llcz8uW3BrZ10gfHwgcGFja2FnZUpTT05DYWNoZS5wZWVyRGVwZW5kZW5jaWVzPy5bcGtnXTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IGN3ZCA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHR5cGVvZiBwcm9jZXNzLmN3ZCA9PT0gXCJmdW5jdGlvblwiID8gcHJvY2Vzcy5jd2QoKSA6IFwiXCI7XG4gICAgaWYgKCFjd2QpIHRocm93IG5ldyBFcnJvcihcIm5vLWN3ZFwiKTtcbiAgICBjb25zdCBpbXBvcnRSdW50aW1lID0gKG0pID0+IEZ1bmN0aW9uKFwibW1cIiwgXCJyZXR1cm4gaW1wb3J0KG1tKVwiKShtKTtcbiAgICBjb25zdCBbeyBkZWZhdWx0OiBmcyB9LCB7IGRlZmF1bHQ6IHBhdGggfV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICBpbXBvcnRSdW50aW1lKFwiZnMvcHJvbWlzZXNcIiksXG4gICAgICBpbXBvcnRSdW50aW1lKFwicGF0aFwiKVxuICAgIF0pO1xuICAgIGNvbnN0IHBrZ0pzb25QYXRoID0gcGF0aC5qb2luKGN3ZCwgXCJub2RlX21vZHVsZXNcIiwgcGtnLCBcInBhY2thZ2UuanNvblwiKTtcbiAgICBjb25zdCByYXcgPSBhd2FpdCBmcy5yZWFkRmlsZShwa2dKc29uUGF0aCwgXCJ1dGYtOFwiKTtcbiAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZShyYXcpO1xuICAgIGNvbnN0IHJlc29sdmVkID0ganNvbi52ZXJzaW9uIHx8IGF3YWl0IGdldFZlcnNpb25Gcm9tTG9jYWxQYWNrYWdlSnNvbihwa2cpIHx8IHZvaWQgMDtcbiAgICByZXR1cm4gcmVzb2x2ZWQ7XG4gIH0gY2F0Y2gge1xuICB9XG4gIGNvbnN0IGZyb21Sb290ID0gYXdhaXQgZ2V0VmVyc2lvbkZyb21Mb2NhbFBhY2thZ2VKc29uKHBrZyk7XG4gIHJldHVybiBmcm9tUm9vdDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFZlcnNpb25Gcm9tTG9jYWxQYWNrYWdlSnNvbihwa2cpIHtcbiAgY29uc3QganNvbiA9IGF3YWl0IHJlYWRSb290UGFja2FnZUpzb24oKTtcbiAgaWYgKCFqc29uKSByZXR1cm4gdm9pZCAwO1xuICBjb25zdCBhbGxEZXBzID0ge1xuICAgIC4uLmpzb24uZGVwZW5kZW5jaWVzLFxuICAgIC4uLmpzb24uZGV2RGVwZW5kZW5jaWVzLFxuICAgIC4uLmpzb24ucGVlckRlcGVuZGVuY2llc1xuICB9O1xuICByZXR1cm4gYWxsRGVwc1twa2ddO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0TmFtZUZyb21Mb2NhbFBhY2thZ2VKc29uKCkge1xuICBjb25zdCBqc29uID0gYXdhaXQgcmVhZFJvb3RQYWNrYWdlSnNvbigpO1xuICByZXR1cm4ganNvbj8ubmFtZTtcbn1cblxubGV0IHByb2plY3RJZENhY2hlZCA9IG51bGw7XG5hc3luYyBmdW5jdGlvbiBnZXRQcm9qZWN0SWQoYmFzZVVybCkge1xuICBpZiAocHJvamVjdElkQ2FjaGVkKSByZXR1cm4gcHJvamVjdElkQ2FjaGVkO1xuICBjb25zdCBwcm9qZWN0TmFtZSA9IGF3YWl0IGdldE5hbWVGcm9tTG9jYWxQYWNrYWdlSnNvbigpO1xuICBpZiAocHJvamVjdE5hbWUpIHtcbiAgICBwcm9qZWN0SWRDYWNoZWQgPSBhd2FpdCBoYXNoVG9CYXNlNjQoXG4gICAgICBiYXNlVXJsID8gYmFzZVVybCArIHByb2plY3ROYW1lIDogcHJvamVjdE5hbWVcbiAgICApO1xuICAgIHJldHVybiBwcm9qZWN0SWRDYWNoZWQ7XG4gIH1cbiAgaWYgKGJhc2VVcmwpIHtcbiAgICBwcm9qZWN0SWRDYWNoZWQgPSBhd2FpdCBoYXNoVG9CYXNlNjQoYmFzZVVybCk7XG4gICAgcmV0dXJuIHByb2plY3RJZENhY2hlZDtcbiAgfVxuICBwcm9qZWN0SWRDYWNoZWQgPSBnZW5lcmF0ZUlkKDMyKTtcbiAgcmV0dXJuIHByb2plY3RJZENhY2hlZDtcbn1cblxuY29uc3QgaW1wb3J0UnVudGltZSA9IChtKSA9PiB7XG4gIHJldHVybiBGdW5jdGlvbihcIm1tXCIsIFwicmV0dXJuIGltcG9ydChtbSlcIikobSk7XG59O1xuXG5mdW5jdGlvbiBnZXRWZW5kb3IoKSB7XG4gIGNvbnN0IGhhc0FueSA9ICguLi5rZXlzKSA9PiBrZXlzLnNvbWUoKGspID0+IEJvb2xlYW4oZW52W2tdKSk7XG4gIGlmIChoYXNBbnkoXCJDRl9QQUdFU1wiLCBcIkNGX1BBR0VTX1VSTFwiLCBcIkNGX0FDQ09VTlRfSURcIikgfHwgdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiBuYXZpZ2F0b3IudXNlckFnZW50ID09PSBcIkNsb3VkZmxhcmUtV29ya2Vyc1wiKSB7XG4gICAgcmV0dXJuIFwiY2xvdWRmbGFyZVwiO1xuICB9XG4gIGlmIChoYXNBbnkoXCJWRVJDRUxcIiwgXCJWRVJDRUxfVVJMXCIsIFwiVkVSQ0VMX0VOVlwiKSkgcmV0dXJuIFwidmVyY2VsXCI7XG4gIGlmIChoYXNBbnkoXCJORVRMSUZZXCIsIFwiTkVUTElGWV9VUkxcIikpIHJldHVybiBcIm5ldGxpZnlcIjtcbiAgaWYgKGhhc0FueShcbiAgICBcIlJFTkRFUlwiLFxuICAgIFwiUkVOREVSX1VSTFwiLFxuICAgIFwiUkVOREVSX0lOVEVSTkFMX0hPU1ROQU1FXCIsXG4gICAgXCJSRU5ERVJfU0VSVklDRV9JRFwiXG4gICkpIHtcbiAgICByZXR1cm4gXCJyZW5kZXJcIjtcbiAgfVxuICBpZiAoaGFzQW55KFwiQVdTX0xBTUJEQV9GVU5DVElPTl9OQU1FXCIsIFwiQVdTX0VYRUNVVElPTl9FTlZcIiwgXCJMQU1CREFfVEFTS19ST09UXCIpKSB7XG4gICAgcmV0dXJuIFwiYXdzXCI7XG4gIH1cbiAgaWYgKGhhc0FueShcbiAgICBcIkdPT0dMRV9DTE9VRF9GVU5DVElPTl9OQU1FXCIsXG4gICAgXCJHT09HTEVfQ0xPVURfUFJPSkVDVFwiLFxuICAgIFwiR0NQX1BST0pFQ1RcIixcbiAgICBcIktfU0VSVklDRVwiXG4gICkpIHtcbiAgICByZXR1cm4gXCJnY3BcIjtcbiAgfVxuICBpZiAoaGFzQW55KFxuICAgIFwiQVpVUkVfRlVOQ1RJT05fTkFNRVwiLFxuICAgIFwiRlVOQ1RJT05TX1dPUktFUl9SVU5USU1FXCIsXG4gICAgXCJXRUJTSVRFX0lOU1RBTkNFX0lEXCIsXG4gICAgXCJXRUJTSVRFX1NJVEVfTkFNRVwiXG4gICkpIHtcbiAgICByZXR1cm4gXCJhenVyZVwiO1xuICB9XG4gIGlmIChoYXNBbnkoXCJERU5PX0RFUExPWU1FTlRfSURcIiwgXCJERU5PX1JFR0lPTlwiKSkgcmV0dXJuIFwiZGVuby1kZXBsb3lcIjtcbiAgaWYgKGhhc0FueShcIkZMWV9BUFBfTkFNRVwiLCBcIkZMWV9SRUdJT05cIiwgXCJGTFlfQUxMT0NfSURcIikpIHJldHVybiBcImZseS1pb1wiO1xuICBpZiAoaGFzQW55KFwiUkFJTFdBWV9TVEFUSUNfVVJMXCIsIFwiUkFJTFdBWV9FTlZJUk9OTUVOVF9OQU1FXCIpKVxuICAgIHJldHVybiBcInJhaWx3YXlcIjtcbiAgaWYgKGhhc0FueShcIkRZTk9cIiwgXCJIRVJPS1VfQVBQX05BTUVcIikpIHJldHVybiBcImhlcm9rdVwiO1xuICBpZiAoaGFzQW55KFwiRE9fREVQTE9ZTUVOVF9JRFwiLCBcIkRPX0FQUF9OQU1FXCIsIFwiRElHSVRBTE9DRUFOXCIpKVxuICAgIHJldHVybiBcImRpZ2l0YWxvY2VhblwiO1xuICBpZiAoaGFzQW55KFwiS09ZRUJcIiwgXCJLT1lFQl9ERVBMT1lNRU5UX0lEXCIsIFwiS09ZRUJfQVBQX05BTUVcIikpIHJldHVybiBcImtveWViXCI7XG4gIHJldHVybiBudWxsO1xufVxuYXN5bmMgZnVuY3Rpb24gZGV0ZWN0U3lzdGVtSW5mbygpIHtcbiAgdHJ5IHtcbiAgICBpZiAoZ2V0VmVuZG9yKCkgPT09IFwiY2xvdWRmbGFyZVwiKSByZXR1cm4gXCJjbG91ZGZsYXJlXCI7XG4gICAgY29uc3Qgb3MgPSBhd2FpdCBpbXBvcnRSdW50aW1lKFwib3NcIik7XG4gICAgY29uc3QgY3B1cyA9IG9zLmNwdXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgZGVwbG95bWVudFZlbmRvcjogZ2V0VmVuZG9yKCksXG4gICAgICBzeXN0ZW1QbGF0Zm9ybTogb3MucGxhdGZvcm0oKSxcbiAgICAgIHN5c3RlbVJlbGVhc2U6IG9zLnJlbGVhc2UoKSxcbiAgICAgIHN5c3RlbUFyY2hpdGVjdHVyZTogb3MuYXJjaCgpLFxuICAgICAgY3B1Q291bnQ6IGNwdXMubGVuZ3RoLFxuICAgICAgY3B1TW9kZWw6IGNwdXMubGVuZ3RoID8gY3B1c1swXS5tb2RlbCA6IG51bGwsXG4gICAgICBjcHVTcGVlZDogY3B1cy5sZW5ndGggPyBjcHVzWzBdLnNwZWVkIDogbnVsbCxcbiAgICAgIG1lbW9yeTogb3MudG90YWxtZW0oKSxcbiAgICAgIGlzV1NMOiBhd2FpdCBpc1dzbCgpLFxuICAgICAgaXNEb2NrZXI6IGF3YWl0IGlzRG9ja2VyKCksXG4gICAgICBpc1RUWTogdHlwZW9mIHByb2Nlc3MgIT09IFwidW5kZWZpbmVkXCIgJiYgcHJvY2Vzcy5zdGRvdXQgPyBwcm9jZXNzLnN0ZG91dC5pc1RUWSA6IG51bGxcbiAgICB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN5c3RlbVBsYXRmb3JtOiBudWxsLFxuICAgICAgc3lzdGVtUmVsZWFzZTogbnVsbCxcbiAgICAgIHN5c3RlbUFyY2hpdGVjdHVyZTogbnVsbCxcbiAgICAgIGNwdUNvdW50OiBudWxsLFxuICAgICAgY3B1TW9kZWw6IG51bGwsXG4gICAgICBjcHVTcGVlZDogbnVsbCxcbiAgICAgIG1lbW9yeTogbnVsbCxcbiAgICAgIGlzV1NMOiBudWxsLFxuICAgICAgaXNEb2NrZXI6IG51bGwsXG4gICAgICBpc1RUWTogbnVsbFxuICAgIH07XG4gIH1cbn1cbmxldCBpc0RvY2tlckNhY2hlZDtcbmFzeW5jIGZ1bmN0aW9uIGhhc0RvY2tlckVudigpIHtcbiAgaWYgKGdldFZlbmRvcigpID09PSBcImNsb3VkZmxhcmVcIikgcmV0dXJuIGZhbHNlO1xuICB0cnkge1xuICAgIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0UnVudGltZShcImZzXCIpO1xuICAgIGZzLnN0YXRTeW5jKFwiLy5kb2NrZXJlbnZcIik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuYXN5bmMgZnVuY3Rpb24gaGFzRG9ja2VyQ0dyb3VwKCkge1xuICBpZiAoZ2V0VmVuZG9yKCkgPT09IFwiY2xvdWRmbGFyZVwiKSByZXR1cm4gZmFsc2U7XG4gIHRyeSB7XG4gICAgY29uc3QgZnMgPSBhd2FpdCBpbXBvcnRSdW50aW1lKFwiZnNcIik7XG4gICAgcmV0dXJuIGZzLnJlYWRGaWxlU3luYyhcIi9wcm9jL3NlbGYvY2dyb3VwXCIsIFwidXRmOFwiKS5pbmNsdWRlcyhcImRvY2tlclwiKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5hc3luYyBmdW5jdGlvbiBpc0RvY2tlcigpIHtcbiAgaWYgKGdldFZlbmRvcigpID09PSBcImNsb3VkZmxhcmVcIikgcmV0dXJuIGZhbHNlO1xuICBpZiAoaXNEb2NrZXJDYWNoZWQgPT09IHZvaWQgMCkge1xuICAgIGlzRG9ja2VyQ2FjaGVkID0gYXdhaXQgaGFzRG9ja2VyRW52KCkgfHwgYXdhaXQgaGFzRG9ja2VyQ0dyb3VwKCk7XG4gIH1cbiAgcmV0dXJuIGlzRG9ja2VyQ2FjaGVkO1xufVxuYXN5bmMgZnVuY3Rpb24gaXNXc2woKSB7XG4gIHRyeSB7XG4gICAgaWYgKGdldFZlbmRvcigpID09PSBcImNsb3VkZmxhcmVcIikgcmV0dXJuIGZhbHNlO1xuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJ1bmRlZmluZWRcIiB8fCBwcm9jZXNzPy5wbGF0Zm9ybSAhPT0gXCJsaW51eFwiKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IGZzID0gYXdhaXQgaW1wb3J0UnVudGltZShcImZzXCIpO1xuICAgIGNvbnN0IG9zID0gYXdhaXQgaW1wb3J0UnVudGltZShcIm9zXCIpO1xuICAgIGlmIChvcy5yZWxlYXNlKCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1pY3Jvc29mdFwiKSkge1xuICAgICAgaWYgKGF3YWl0IGlzSW5zaWRlQ29udGFpbmVyKCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmcy5yZWFkRmlsZVN5bmMoXCIvcHJvYy92ZXJzaW9uXCIsIFwidXRmOFwiKS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwibWljcm9zb2Z0XCIpID8gIWF3YWl0IGlzSW5zaWRlQ29udGFpbmVyKCkgOiBmYWxzZTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5sZXQgaXNJbnNpZGVDb250YWluZXJDYWNoZWQ7XG5jb25zdCBoYXNDb250YWluZXJFbnYgPSBhc3luYyAoKSA9PiB7XG4gIGlmIChnZXRWZW5kb3IoKSA9PT0gXCJjbG91ZGZsYXJlXCIpIHJldHVybiBmYWxzZTtcbiAgdHJ5IHtcbiAgICBjb25zdCBmcyA9IGF3YWl0IGltcG9ydFJ1bnRpbWUoXCJmc1wiKTtcbiAgICBmcy5zdGF0U3luYyhcIi9ydW4vLmNvbnRhaW5lcmVudlwiKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59O1xuYXN5bmMgZnVuY3Rpb24gaXNJbnNpZGVDb250YWluZXIoKSB7XG4gIGlmIChpc0luc2lkZUNvbnRhaW5lckNhY2hlZCA9PT0gdm9pZCAwKSB7XG4gICAgaXNJbnNpZGVDb250YWluZXJDYWNoZWQgPSBhd2FpdCBoYXNDb250YWluZXJFbnYoKSB8fCBhd2FpdCBpc0RvY2tlcigpO1xuICB9XG4gIHJldHVybiBpc0luc2lkZUNvbnRhaW5lckNhY2hlZDtcbn1cbmZ1bmN0aW9uIGlzQ0koKSB7XG4gIHJldHVybiBlbnYuQ0kgIT09IFwiZmFsc2VcIiAmJiAoXCJCVUlMRF9JRFwiIGluIGVudiB8fCAvLyBKZW5raW5zLCBDbG91ZGJlZXNcbiAgXCJCVUlMRF9OVU1CRVJcIiBpbiBlbnYgfHwgLy8gSmVua2lucywgVGVhbUNpdHkgKGZpeGVkIHR5cG86IGV4dHJhIHNwYWNlIHJlbW92ZWQpXG4gIFwiQ0lcIiBpbiBlbnYgfHwgLy8gVHJhdmlzIENJLCBDaXJjbGVDSSwgQ2lycnVzIENJLCBHaXRsYWIgQ0ksIEFwcHZleW9yLCBDb2RlU2hpcCwgZHNhcmksIENsb3VkZmxhcmVcbiAgXCJDSV9BUFBfSURcIiBpbiBlbnYgfHwgLy8gQXBwZmxvd1xuICBcIkNJX0JVSUxEX0lEXCIgaW4gZW52IHx8IC8vIEFwcGZsb3dcbiAgXCJDSV9CVUlMRF9OVU1CRVJcIiBpbiBlbnYgfHwgLy8gQXBwZmxvd1xuICBcIkNJX05BTUVcIiBpbiBlbnYgfHwgLy8gQ29kZXNoaXAgYW5kIG90aGVyc1xuICBcIkNPTlRJTlVPVVNfSU5URUdSQVRJT05cIiBpbiBlbnYgfHwgLy8gVHJhdmlzIENJLCBDaXJydXMgQ0lcbiAgXCJSVU5fSURcIiBpbiBlbnYpO1xufVxuXG5mdW5jdGlvbiBkZXRlY3RSdW50aW1lKCkge1xuICBpZiAodHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBjb25zdCBkZW5vVmVyc2lvbiA9IERlbm8/LnZlcnNpb24/LmRlbm8gPz8gbnVsbDtcbiAgICByZXR1cm4geyBuYW1lOiBcImRlbm9cIiwgdmVyc2lvbjogZGVub1ZlcnNpb24gfTtcbiAgfVxuICBpZiAodHlwZW9mIEJ1biAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGNvbnN0IGJ1blZlcnNpb24gPSBCdW4/LnZlcnNpb24gPz8gbnVsbDtcbiAgICByZXR1cm4geyBuYW1lOiBcImJ1blwiLCB2ZXJzaW9uOiBidW5WZXJzaW9uIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3M/LnZlcnNpb25zPy5ub2RlKSB7XG4gICAgcmV0dXJuIHsgbmFtZTogXCJub2RlXCIsIHZlcnNpb246IHByb2Nlc3MudmVyc2lvbnMubm9kZSA/PyBudWxsIH07XG4gIH1cbiAgcmV0dXJuIHsgbmFtZTogXCJlZGdlXCIsIHZlcnNpb246IG51bGwgfTtcbn1cbmZ1bmN0aW9uIGRldGVjdEVudmlyb25tZW50KCkge1xuICByZXR1cm4gZ2V0RW52VmFyKFwiTk9ERV9FTlZcIikgPT09IFwicHJvZHVjdGlvblwiID8gXCJwcm9kdWN0aW9uXCIgOiBpc0NJKCkgPyBcImNpXCIgOiBpc1Rlc3QoKSA/IFwidGVzdFwiIDogXCJkZXZlbG9wbWVudFwiO1xufVxuXG5jb25zdCBEQVRBQkFTRVMgPSB7XG4gIHBnOiBcInBvc3RncmVzcWxcIixcbiAgbXlzcWw6IFwibXlzcWxcIixcbiAgbWFyaWFkYjogXCJtYXJpYWRiXCIsXG4gIHNxbGl0ZTM6IFwic3FsaXRlXCIsXG4gIFwiYmV0dGVyLXNxbGl0ZTNcIjogXCJzcWxpdGVcIixcbiAgXCJAcHJpc21hL2NsaWVudFwiOiBcInByaXNtYVwiLFxuICBtb25nb29zZTogXCJtb25nb2RiXCIsXG4gIG1vbmdvZGI6IFwibW9uZ29kYlwiLFxuICBcImRyaXp6bGUtb3JtXCI6IFwiZHJpenpsZVwiXG59O1xuYXN5bmMgZnVuY3Rpb24gZGV0ZWN0RGF0YWJhc2UoKSB7XG4gIGZvciAoY29uc3QgW3BrZywgbmFtZV0gb2YgT2JqZWN0LmVudHJpZXMoREFUQUJBU0VTKSkge1xuICAgIGNvbnN0IHZlcnNpb24gPSBhd2FpdCBnZXRQYWNrYWdlVmVyc2lvbihwa2cpO1xuICAgIGlmICh2ZXJzaW9uKSByZXR1cm4geyBuYW1lLCB2ZXJzaW9uIH07XG4gIH1cbiAgcmV0dXJuIHZvaWQgMDtcbn1cblxuY29uc3QgRlJBTUVXT1JLUyA9IHtcbiAgbmV4dDogXCJuZXh0XCIsXG4gIG51eHQ6IFwibnV4dFwiLFxuICBcIkByZW1peC1ydW4vc2VydmVyLXJ1bnRpbWVcIjogXCJyZW1peFwiLFxuICBhc3RybzogXCJhc3Ryb1wiLFxuICBcIkBzdmVsdGVqcy9raXRcIjogXCJzdmVsdGVraXRcIixcbiAgXCJzb2xpZC1zdGFydFwiOiBcInNvbGlkLXN0YXJ0XCIsXG4gIFwidGFuc3RhY2stc3RhcnRcIjogXCJ0YW5zdGFjay1zdGFydFwiLFxuICBob25vOiBcImhvbm9cIixcbiAgZXhwcmVzczogXCJleHByZXNzXCIsXG4gIGVseXNpYTogXCJlbHlzaWFcIixcbiAgZXhwbzogXCJleHBvXCJcbn07XG5hc3luYyBmdW5jdGlvbiBkZXRlY3RGcmFtZXdvcmsoKSB7XG4gIGZvciAoY29uc3QgW3BrZywgbmFtZV0gb2YgT2JqZWN0LmVudHJpZXMoRlJBTUVXT1JLUykpIHtcbiAgICBjb25zdCB2ZXJzaW9uID0gYXdhaXQgZ2V0UGFja2FnZVZlcnNpb24ocGtnKTtcbiAgICBpZiAodmVyc2lvbikgcmV0dXJuIHsgbmFtZSwgdmVyc2lvbiB9O1xuICB9XG4gIHJldHVybiB2b2lkIDA7XG59XG5cbmZ1bmN0aW9uIGRldGVjdFBhY2thZ2VNYW5hZ2VyKCkge1xuICBjb25zdCB1c2VyQWdlbnQgPSBlbnYubnBtX2NvbmZpZ191c2VyX2FnZW50O1xuICBpZiAoIXVzZXJBZ2VudCkge1xuICAgIHJldHVybiB2b2lkIDA7XG4gIH1cbiAgY29uc3QgcG1TcGVjID0gdXNlckFnZW50LnNwbGl0KFwiIFwiKVswXTtcbiAgY29uc3Qgc2VwYXJhdG9yUG9zID0gcG1TcGVjLmxhc3RJbmRleE9mKFwiL1wiKTtcbiAgY29uc3QgbmFtZSA9IHBtU3BlYy5zdWJzdHJpbmcoMCwgc2VwYXJhdG9yUG9zKTtcbiAgcmV0dXJuIHtcbiAgICBuYW1lOiBuYW1lID09PSBcIm5wbWluc3RhbGxcIiA/IFwiY25wbVwiIDogbmFtZSxcbiAgICB2ZXJzaW9uOiBwbVNwZWMuc3Vic3RyaW5nKHNlcGFyYXRvclBvcyArIDEpXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldFRlbGVtZXRyeUF1dGhDb25maWcob3B0aW9ucywgY29udGV4dCkge1xuICByZXR1cm4ge1xuICAgIGRhdGFiYXNlOiBjb250ZXh0Py5kYXRhYmFzZSxcbiAgICBhZGFwdGVyOiBjb250ZXh0Py5hZGFwdGVyLFxuICAgIGVtYWlsVmVyaWZpY2F0aW9uOiB7XG4gICAgICBzZW5kVmVyaWZpY2F0aW9uRW1haWw6ICEhb3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uc2VuZFZlcmlmaWNhdGlvbkVtYWlsLFxuICAgICAgc2VuZE9uU2lnblVwOiAhIW9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LnNlbmRPblNpZ25VcCxcbiAgICAgIHNlbmRPblNpZ25JbjogISFvcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5zZW5kT25TaWduSW4sXG4gICAgICBhdXRvU2lnbkluQWZ0ZXJWZXJpZmljYXRpb246ICEhb3B0aW9ucy5lbWFpbFZlcmlmaWNhdGlvbj8uYXV0b1NpZ25JbkFmdGVyVmVyaWZpY2F0aW9uLFxuICAgICAgZXhwaXJlc0luOiBvcHRpb25zLmVtYWlsVmVyaWZpY2F0aW9uPy5leHBpcmVzSW4sXG4gICAgICBvbkVtYWlsVmVyaWZpY2F0aW9uOiAhIW9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/Lm9uRW1haWxWZXJpZmljYXRpb24sXG4gICAgICBhZnRlckVtYWlsVmVyaWZpY2F0aW9uOiAhIW9wdGlvbnMuZW1haWxWZXJpZmljYXRpb24/LmFmdGVyRW1haWxWZXJpZmljYXRpb25cbiAgICB9LFxuICAgIGVtYWlsQW5kUGFzc3dvcmQ6IHtcbiAgICAgIGVuYWJsZWQ6ICEhb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5lbmFibGVkLFxuICAgICAgZGlzYWJsZVNpZ25VcDogISFvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LmRpc2FibGVTaWduVXAsXG4gICAgICByZXF1aXJlRW1haWxWZXJpZmljYXRpb246ICEhb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5yZXF1aXJlRW1haWxWZXJpZmljYXRpb24sXG4gICAgICBtYXhQYXNzd29yZExlbmd0aDogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5tYXhQYXNzd29yZExlbmd0aCxcbiAgICAgIG1pblBhc3N3b3JkTGVuZ3RoOiBvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/Lm1pblBhc3N3b3JkTGVuZ3RoLFxuICAgICAgc2VuZFJlc2V0UGFzc3dvcmQ6ICEhb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5zZW5kUmVzZXRQYXNzd29yZCxcbiAgICAgIHJlc2V0UGFzc3dvcmRUb2tlbkV4cGlyZXNJbjogb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5yZXNldFBhc3N3b3JkVG9rZW5FeHBpcmVzSW4sXG4gICAgICBvblBhc3N3b3JkUmVzZXQ6ICEhb3B0aW9ucy5lbWFpbEFuZFBhc3N3b3JkPy5vblBhc3N3b3JkUmVzZXQsXG4gICAgICBwYXNzd29yZDoge1xuICAgICAgICBoYXNoOiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucGFzc3dvcmQ/Lmhhc2gsXG4gICAgICAgIHZlcmlmeTogISFvcHRpb25zLmVtYWlsQW5kUGFzc3dvcmQ/LnBhc3N3b3JkPy52ZXJpZnlcbiAgICAgIH0sXG4gICAgICBhdXRvU2lnbkluOiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8uYXV0b1NpZ25JbixcbiAgICAgIHJldm9rZVNlc3Npb25zT25QYXNzd29yZFJlc2V0OiAhIW9wdGlvbnMuZW1haWxBbmRQYXNzd29yZD8ucmV2b2tlU2Vzc2lvbnNPblBhc3N3b3JkUmVzZXRcbiAgICB9LFxuICAgIHNvY2lhbFByb3ZpZGVyczogT2JqZWN0LmtleXMob3B0aW9ucy5zb2NpYWxQcm92aWRlcnMgfHwge30pLm1hcCgocCkgPT4ge1xuICAgICAgY29uc3QgcHJvdmlkZXIgPSBvcHRpb25zLnNvY2lhbFByb3ZpZGVycz8uW3BdO1xuICAgICAgaWYgKCFwcm92aWRlcikgcmV0dXJuIHt9O1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHAsXG4gICAgICAgIG1hcFByb2ZpbGVUb1VzZXI6ICEhcHJvdmlkZXIubWFwUHJvZmlsZVRvVXNlcixcbiAgICAgICAgZGlzYWJsZURlZmF1bHRTY29wZTogISFwcm92aWRlci5kaXNhYmxlRGVmYXVsdFNjb3BlLFxuICAgICAgICBkaXNhYmxlSWRUb2tlblNpZ25JbjogISFwcm92aWRlci5kaXNhYmxlSWRUb2tlblNpZ25JbixcbiAgICAgICAgZGlzYWJsZUltcGxpY2l0U2lnblVwOiBwcm92aWRlci5kaXNhYmxlSW1wbGljaXRTaWduVXAsXG4gICAgICAgIGRpc2FibGVTaWduVXA6IHByb3ZpZGVyLmRpc2FibGVTaWduVXAsXG4gICAgICAgIGdldFVzZXJJbmZvOiAhIXByb3ZpZGVyLmdldFVzZXJJbmZvLFxuICAgICAgICBvdmVycmlkZVVzZXJJbmZvT25TaWduSW46ICEhcHJvdmlkZXIub3ZlcnJpZGVVc2VySW5mb09uU2lnbkluLFxuICAgICAgICBwcm9tcHQ6IHByb3ZpZGVyLnByb21wdCxcbiAgICAgICAgdmVyaWZ5SWRUb2tlbjogISFwcm92aWRlci52ZXJpZnlJZFRva2VuLFxuICAgICAgICBzY29wZTogcHJvdmlkZXIuc2NvcGUsXG4gICAgICAgIHJlZnJlc2hBY2Nlc3NUb2tlbjogISFwcm92aWRlci5yZWZyZXNoQWNjZXNzVG9rZW5cbiAgICAgIH07XG4gICAgfSksXG4gICAgcGx1Z2luczogb3B0aW9ucy5wbHVnaW5zPy5tYXAoKHApID0+IHAuaWQudG9TdHJpbmcoKSksXG4gICAgdXNlcjoge1xuICAgICAgbW9kZWxOYW1lOiBvcHRpb25zLnVzZXI/Lm1vZGVsTmFtZSxcbiAgICAgIGZpZWxkczogb3B0aW9ucy51c2VyPy5maWVsZHMsXG4gICAgICBhZGRpdGlvbmFsRmllbGRzOiBvcHRpb25zLnVzZXI/LmFkZGl0aW9uYWxGaWVsZHMsXG4gICAgICBjaGFuZ2VFbWFpbDoge1xuICAgICAgICBlbmFibGVkOiBvcHRpb25zLnVzZXI/LmNoYW5nZUVtYWlsPy5lbmFibGVkLFxuICAgICAgICBzZW5kQ2hhbmdlRW1haWxWZXJpZmljYXRpb246ICEhb3B0aW9ucy51c2VyPy5jaGFuZ2VFbWFpbD8uc2VuZENoYW5nZUVtYWlsVmVyaWZpY2F0aW9uXG4gICAgICB9XG4gICAgfSxcbiAgICB2ZXJpZmljYXRpb246IHtcbiAgICAgIG1vZGVsTmFtZTogb3B0aW9ucy52ZXJpZmljYXRpb24/Lm1vZGVsTmFtZSxcbiAgICAgIGRpc2FibGVDbGVhbnVwOiBvcHRpb25zLnZlcmlmaWNhdGlvbj8uZGlzYWJsZUNsZWFudXAsXG4gICAgICBmaWVsZHM6IG9wdGlvbnMudmVyaWZpY2F0aW9uPy5maWVsZHNcbiAgICB9LFxuICAgIHNlc3Npb246IHtcbiAgICAgIG1vZGVsTmFtZTogb3B0aW9ucy5zZXNzaW9uPy5tb2RlbE5hbWUsXG4gICAgICBhZGRpdGlvbmFsRmllbGRzOiBvcHRpb25zLnNlc3Npb24/LmFkZGl0aW9uYWxGaWVsZHMsXG4gICAgICBjb29raWVDYWNoZToge1xuICAgICAgICBlbmFibGVkOiBvcHRpb25zLnNlc3Npb24/LmNvb2tpZUNhY2hlPy5lbmFibGVkLFxuICAgICAgICBtYXhBZ2U6IG9wdGlvbnMuc2Vzc2lvbj8uY29va2llQ2FjaGU/Lm1heEFnZVxuICAgICAgfSxcbiAgICAgIGRpc2FibGVTZXNzaW9uUmVmcmVzaDogb3B0aW9ucy5zZXNzaW9uPy5kaXNhYmxlU2Vzc2lvblJlZnJlc2gsXG4gICAgICBleHBpcmVzSW46IG9wdGlvbnMuc2Vzc2lvbj8uZXhwaXJlc0luLFxuICAgICAgZmllbGRzOiBvcHRpb25zLnNlc3Npb24/LmZpZWxkcyxcbiAgICAgIGZyZXNoQWdlOiBvcHRpb25zLnNlc3Npb24/LmZyZXNoQWdlLFxuICAgICAgcHJlc2VydmVTZXNzaW9uSW5EYXRhYmFzZTogb3B0aW9ucy5zZXNzaW9uPy5wcmVzZXJ2ZVNlc3Npb25JbkRhdGFiYXNlLFxuICAgICAgc3RvcmVTZXNzaW9uSW5EYXRhYmFzZTogb3B0aW9ucy5zZXNzaW9uPy5zdG9yZVNlc3Npb25JbkRhdGFiYXNlLFxuICAgICAgdXBkYXRlQWdlOiBvcHRpb25zLnNlc3Npb24/LnVwZGF0ZUFnZVxuICAgIH0sXG4gICAgYWNjb3VudDoge1xuICAgICAgbW9kZWxOYW1lOiBvcHRpb25zLmFjY291bnQ/Lm1vZGVsTmFtZSxcbiAgICAgIGZpZWxkczogb3B0aW9ucy5hY2NvdW50Py5maWVsZHMsXG4gICAgICBlbmNyeXB0T0F1dGhUb2tlbnM6IG9wdGlvbnMuYWNjb3VudD8uZW5jcnlwdE9BdXRoVG9rZW5zLFxuICAgICAgdXBkYXRlQWNjb3VudE9uU2lnbkluOiBvcHRpb25zLmFjY291bnQ/LnVwZGF0ZUFjY291bnRPblNpZ25JbixcbiAgICAgIGFjY291bnRMaW5raW5nOiB7XG4gICAgICAgIGVuYWJsZWQ6IG9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmVuYWJsZWQsXG4gICAgICAgIHRydXN0ZWRQcm92aWRlcnM6IG9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LnRydXN0ZWRQcm92aWRlcnMsXG4gICAgICAgIHVwZGF0ZVVzZXJJbmZvT25MaW5rOiBvcHRpb25zLmFjY291bnQ/LmFjY291bnRMaW5raW5nPy51cGRhdGVVc2VySW5mb09uTGluayxcbiAgICAgICAgYWxsb3dVbmxpbmtpbmdBbGw6IG9wdGlvbnMuYWNjb3VudD8uYWNjb3VudExpbmtpbmc/LmFsbG93VW5saW5raW5nQWxsXG4gICAgICB9XG4gICAgfSxcbiAgICBob29rczoge1xuICAgICAgYWZ0ZXI6ICEhb3B0aW9ucy5ob29rcz8uYWZ0ZXIsXG4gICAgICBiZWZvcmU6ICEhb3B0aW9ucy5ob29rcz8uYmVmb3JlXG4gICAgfSxcbiAgICBzZWNvbmRhcnlTdG9yYWdlOiAhIW9wdGlvbnMuc2Vjb25kYXJ5U3RvcmFnZSxcbiAgICBhZHZhbmNlZDoge1xuICAgICAgY29va2llUHJlZml4OiAhIW9wdGlvbnMuYWR2YW5jZWQ/LmNvb2tpZVByZWZpeCxcbiAgICAgIC8vdGhpcyBzaG91bGRuJ3QgYmUgdHJhY2tlZFxuICAgICAgY29va2llczogISFvcHRpb25zLmFkdmFuY2VkPy5jb29raWVzLFxuICAgICAgY3Jvc3NTdWJEb21haW5Db29raWVzOiB7XG4gICAgICAgIGRvbWFpbjogISFvcHRpb25zLmFkdmFuY2VkPy5jcm9zc1N1YkRvbWFpbkNvb2tpZXM/LmRvbWFpbixcbiAgICAgICAgZW5hYmxlZDogb3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5lbmFibGVkLFxuICAgICAgICBhZGRpdGlvbmFsQ29va2llczogb3B0aW9ucy5hZHZhbmNlZD8uY3Jvc3NTdWJEb21haW5Db29raWVzPy5hZGRpdGlvbmFsQ29va2llc1xuICAgICAgfSxcbiAgICAgIGRhdGFiYXNlOiB7XG4gICAgICAgIHVzZU51bWJlcklkOiAhIW9wdGlvbnMuYWR2YW5jZWQ/LmRhdGFiYXNlPy51c2VOdW1iZXJJZCxcbiAgICAgICAgZ2VuZXJhdGVJZDogb3B0aW9ucy5hZHZhbmNlZD8uZGF0YWJhc2U/LmdlbmVyYXRlSWQsXG4gICAgICAgIGRlZmF1bHRGaW5kTWFueUxpbWl0OiBvcHRpb25zLmFkdmFuY2VkPy5kYXRhYmFzZT8uZGVmYXVsdEZpbmRNYW55TGltaXRcbiAgICAgIH0sXG4gICAgICB1c2VTZWN1cmVDb29raWVzOiBvcHRpb25zLmFkdmFuY2VkPy51c2VTZWN1cmVDb29raWVzLFxuICAgICAgaXBBZGRyZXNzOiB7XG4gICAgICAgIGRpc2FibGVJcFRyYWNraW5nOiBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmRpc2FibGVJcFRyYWNraW5nLFxuICAgICAgICBpcEFkZHJlc3NIZWFkZXJzOiBvcHRpb25zLmFkdmFuY2VkPy5pcEFkZHJlc3M/LmlwQWRkcmVzc0hlYWRlcnNcbiAgICAgIH0sXG4gICAgICBkaXNhYmxlQ1NSRkNoZWNrOiBvcHRpb25zLmFkdmFuY2VkPy5kaXNhYmxlQ1NSRkNoZWNrLFxuICAgICAgY29va2llQXR0cmlidXRlczoge1xuICAgICAgICBleHBpcmVzOiBvcHRpb25zLmFkdmFuY2VkPy5kZWZhdWx0Q29va2llQXR0cmlidXRlcz8uZXhwaXJlcyxcbiAgICAgICAgc2VjdXJlOiBvcHRpb25zLmFkdmFuY2VkPy5kZWZhdWx0Q29va2llQXR0cmlidXRlcz8uc2VjdXJlLFxuICAgICAgICBzYW1lU2l0ZTogb3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXM/LnNhbWVTaXRlLFxuICAgICAgICBkb21haW46ICEhb3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXM/LmRvbWFpbixcbiAgICAgICAgcGF0aDogb3B0aW9ucy5hZHZhbmNlZD8uZGVmYXVsdENvb2tpZUF0dHJpYnV0ZXM/LnBhdGgsXG4gICAgICAgIGh0dHBPbmx5OiBvcHRpb25zLmFkdmFuY2VkPy5kZWZhdWx0Q29va2llQXR0cmlidXRlcz8uaHR0cE9ubHlcbiAgICAgIH1cbiAgICB9LFxuICAgIHRydXN0ZWRPcmlnaW5zOiBvcHRpb25zLnRydXN0ZWRPcmlnaW5zPy5sZW5ndGgsXG4gICAgcmF0ZUxpbWl0OiB7XG4gICAgICBzdG9yYWdlOiBvcHRpb25zLnJhdGVMaW1pdD8uc3RvcmFnZSxcbiAgICAgIG1vZGVsTmFtZTogb3B0aW9ucy5yYXRlTGltaXQ/Lm1vZGVsTmFtZSxcbiAgICAgIHdpbmRvdzogb3B0aW9ucy5yYXRlTGltaXQ/LndpbmRvdyxcbiAgICAgIGN1c3RvbVN0b3JhZ2U6ICEhb3B0aW9ucy5yYXRlTGltaXQ/LmN1c3RvbVN0b3JhZ2UsXG4gICAgICBlbmFibGVkOiBvcHRpb25zLnJhdGVMaW1pdD8uZW5hYmxlZCxcbiAgICAgIG1heDogb3B0aW9ucy5yYXRlTGltaXQ/Lm1heFxuICAgIH0sXG4gICAgb25BUElFcnJvcjoge1xuICAgICAgZXJyb3JVUkw6IG9wdGlvbnMub25BUElFcnJvcj8uZXJyb3JVUkwsXG4gICAgICBvbkVycm9yOiAhIW9wdGlvbnMub25BUElFcnJvcj8ub25FcnJvcixcbiAgICAgIHRocm93OiBvcHRpb25zLm9uQVBJRXJyb3I/LnRocm93XG4gICAgfSxcbiAgICBsb2dnZXI6IHtcbiAgICAgIGRpc2FibGVkOiBvcHRpb25zLmxvZ2dlcj8uZGlzYWJsZWQsXG4gICAgICBsZXZlbDogb3B0aW9ucy5sb2dnZXI/LmxldmVsLFxuICAgICAgbG9nOiAhIW9wdGlvbnMubG9nZ2VyPy5sb2dcbiAgICB9LFxuICAgIGRhdGFiYXNlSG9va3M6IHtcbiAgICAgIHVzZXI6IHtcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgYWZ0ZXI6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy51c2VyPy5jcmVhdGU/LmFmdGVyLFxuICAgICAgICAgIGJlZm9yZTogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnVzZXI/LmNyZWF0ZT8uYmVmb3JlXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgIGFmdGVyOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8udXNlcj8udXBkYXRlPy5hZnRlcixcbiAgICAgICAgICBiZWZvcmU6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy51c2VyPy51cGRhdGU/LmJlZm9yZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgc2Vzc2lvbjoge1xuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBhZnRlcjogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnNlc3Npb24/LmNyZWF0ZT8uYWZ0ZXIsXG4gICAgICAgICAgYmVmb3JlOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8uc2Vzc2lvbj8uY3JlYXRlPy5iZWZvcmVcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgYWZ0ZXI6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy5zZXNzaW9uPy51cGRhdGU/LmFmdGVyLFxuICAgICAgICAgIGJlZm9yZTogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnNlc3Npb24/LnVwZGF0ZT8uYmVmb3JlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhY2NvdW50OiB7XG4gICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgIGFmdGVyOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8uYWNjb3VudD8uY3JlYXRlPy5hZnRlcixcbiAgICAgICAgICBiZWZvcmU6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy5hY2NvdW50Py5jcmVhdGU/LmJlZm9yZVxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICBhZnRlcjogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LmFjY291bnQ/LnVwZGF0ZT8uYWZ0ZXIsXG4gICAgICAgICAgYmVmb3JlOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8uYWNjb3VudD8udXBkYXRlPy5iZWZvcmVcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHZlcmlmaWNhdGlvbjoge1xuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBhZnRlcjogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnZlcmlmaWNhdGlvbj8uY3JlYXRlPy5hZnRlcixcbiAgICAgICAgICBiZWZvcmU6ICEhb3B0aW9ucy5kYXRhYmFzZUhvb2tzPy52ZXJpZmljYXRpb24/LmNyZWF0ZT8uYmVmb3JlXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgIGFmdGVyOiAhIW9wdGlvbnMuZGF0YWJhc2VIb29rcz8udmVyaWZpY2F0aW9uPy51cGRhdGU/LmFmdGVyLFxuICAgICAgICAgIGJlZm9yZTogISFvcHRpb25zLmRhdGFiYXNlSG9va3M/LnZlcmlmaWNhdGlvbj8udXBkYXRlPy5iZWZvcmVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVGVsZW1ldHJ5KG9wdGlvbnMsIGNvbnRleHQpIHtcbiAgY29uc3QgZGVidWdFbmFibGVkID0gb3B0aW9ucy50ZWxlbWV0cnk/LmRlYnVnIHx8IGdldEJvb2xlYW5FbnZWYXIoXCJCRVRURVJfQVVUSF9URUxFTUVUUllfREVCVUdcIiwgZmFsc2UpO1xuICBjb25zdCBURUxFTUVUUllfRU5EUE9JTlQgPSBFTlYuQkVUVEVSX0FVVEhfVEVMRU1FVFJZX0VORFBPSU5UO1xuICBjb25zdCB0cmFjayA9IGFzeW5jIChldmVudCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBpZiAoY29udGV4dD8uY3VzdG9tVHJhY2spIHtcbiAgICAgICAgYXdhaXQgY29udGV4dC5jdXN0b21UcmFjayhldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZGVidWdFbmFibGVkKSB7XG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFxuICAgICAgICAgICAgbG9nZ2VyLmluZm8oXCJ0ZWxlbWV0cnkgZXZlbnRcIiwgSlNPTi5zdHJpbmdpZnkoZXZlbnQsIG51bGwsIDIpKVxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgYmV0dGVyRmV0Y2goVEVMRU1FVFJZX0VORFBPSU5ULCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgICAgYm9keTogZXZlbnRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gY2F0Y2gge1xuICAgIH1cbiAgfTtcbiAgY29uc3QgaXNFbmFibGVkID0gYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRlbGVtZXRyeUVuYWJsZWQgPSBvcHRpb25zLnRlbGVtZXRyeT8uZW5hYmxlZCAhPT0gdm9pZCAwID8gb3B0aW9ucy50ZWxlbWV0cnkuZW5hYmxlZCA6IGZhbHNlO1xuICAgIGNvbnN0IGVudkVuYWJsZWQgPSBnZXRCb29sZWFuRW52VmFyKFwiQkVUVEVSX0FVVEhfVEVMRU1FVFJZXCIsIGZhbHNlKTtcbiAgICByZXR1cm4gKGVudkVuYWJsZWQgfHwgdGVsZW1ldHJ5RW5hYmxlZCkgJiYgKGNvbnRleHQ/LnNraXBUZXN0Q2hlY2sgfHwgIWlzVGVzdCgpKTtcbiAgfTtcbiAgY29uc3QgZW5hYmxlZCA9IGF3YWl0IGlzRW5hYmxlZCgpO1xuICBsZXQgYW5vbnltb3VzSWQ7XG4gIGlmIChlbmFibGVkKSB7XG4gICAgYW5vbnltb3VzSWQgPSBhd2FpdCBnZXRQcm9qZWN0SWQob3B0aW9ucy5iYXNlVVJMKTtcbiAgICBjb25zdCBwYXlsb2FkID0ge1xuICAgICAgY29uZmlnOiBnZXRUZWxlbWV0cnlBdXRoQ29uZmlnKG9wdGlvbnMpLFxuICAgICAgcnVudGltZTogZGV0ZWN0UnVudGltZSgpLFxuICAgICAgZGF0YWJhc2U6IGF3YWl0IGRldGVjdERhdGFiYXNlKCksXG4gICAgICBmcmFtZXdvcms6IGF3YWl0IGRldGVjdEZyYW1ld29yaygpLFxuICAgICAgZW52aXJvbm1lbnQ6IGRldGVjdEVudmlyb25tZW50KCksXG4gICAgICBzeXN0ZW1JbmZvOiBhd2FpdCBkZXRlY3RTeXN0ZW1JbmZvKCksXG4gICAgICBwYWNrYWdlTWFuYWdlcjogZGV0ZWN0UGFja2FnZU1hbmFnZXIoKVxuICAgIH07XG4gICAgdm9pZCB0cmFjayh7IHR5cGU6IFwiaW5pdFwiLCBwYXlsb2FkLCBhbm9ueW1vdXNJZCB9KTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHB1Ymxpc2g6IGFzeW5jIChldmVudCkgPT4ge1xuICAgICAgaWYgKCFlbmFibGVkKSByZXR1cm47XG4gICAgICBpZiAoIWFub255bW91c0lkKSB7XG4gICAgICAgIGFub255bW91c0lkID0gYXdhaXQgZ2V0UHJvamVjdElkKG9wdGlvbnMuYmFzZVVSTCk7XG4gICAgICB9XG4gICAgICBhd2FpdCB0cmFjayh7XG4gICAgICAgIHR5cGU6IGV2ZW50LnR5cGUsXG4gICAgICAgIHBheWxvYWQ6IGV2ZW50LnBheWxvYWQsXG4gICAgICAgIGFub255bW91c0lkXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB7IGNyZWF0ZVRlbGVtZXRyeSwgZ2V0VGVsZW1ldHJ5QXV0aENvbmZpZyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/telemetry/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/base64.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   base64: () => (/* binding */ base64),\n/* harmony export */   base64Url: () => (/* binding */ base64Url)\n/* harmony export */ });\nfunction getAlphabet(urlSafe) {\n  return urlSafe ? \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_\" : \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n}\nfunction base64Encode(data, alphabet, padding) {\n  let result = \"\";\n  let buffer = 0;\n  let shift = 0;\n  for (const byte of data) {\n    buffer = buffer << 8 | byte;\n    shift += 8;\n    while (shift >= 6) {\n      shift -= 6;\n      result += alphabet[buffer >> shift & 63];\n    }\n  }\n  if (shift > 0) {\n    result += alphabet[buffer << 6 - shift & 63];\n  }\n  if (padding) {\n    const padCount = (4 - result.length % 4) % 4;\n    result += \"=\".repeat(padCount);\n  }\n  return result;\n}\nfunction base64Decode(data, alphabet) {\n  const decodeMap = /* @__PURE__ */ new Map();\n  for (let i = 0; i < alphabet.length; i++) {\n    decodeMap.set(alphabet[i], i);\n  }\n  const result = [];\n  let buffer = 0;\n  let bitsCollected = 0;\n  for (const char of data) {\n    if (char === \"=\")\n      break;\n    const value = decodeMap.get(char);\n    if (value === void 0) {\n      throw new Error(`Invalid Base64 character: ${char}`);\n    }\n    buffer = buffer << 6 | value;\n    bitsCollected += 6;\n    if (bitsCollected >= 8) {\n      bitsCollected -= 8;\n      result.push(buffer >> bitsCollected & 255);\n    }\n  }\n  return Uint8Array.from(result);\n}\nconst base64 = {\n  encode(data, options = {}) {\n    const alphabet = getAlphabet(false);\n    const buffer = typeof data === \"string\" ? new TextEncoder().encode(data) : new Uint8Array(data);\n    return base64Encode(buffer, alphabet, options.padding ?? true);\n  },\n  decode(data) {\n    if (typeof data !== \"string\") {\n      data = new TextDecoder().decode(data);\n    }\n    const urlSafe = data.includes(\"-\") || data.includes(\"_\");\n    const alphabet = getAlphabet(urlSafe);\n    return base64Decode(data, alphabet);\n  }\n};\nconst base64Url = {\n  encode(data, options = {}) {\n    const alphabet = getAlphabet(true);\n    const buffer = typeof data === \"string\" ? new TextEncoder().encode(data) : new Uint8Array(data);\n    return base64Encode(buffer, alphabet, options.padding ?? true);\n  },\n  decode(data) {\n    const urlSafe = data.includes(\"-\") || data.includes(\"_\");\n    const alphabet = getAlphabet(urlSafe);\n    return base64Decode(data, alphabet);\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvYmFzZTY0Lm1qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELEtBQUs7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFNkIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvYmFzZTY0Lm1qcz85N2ExIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldEFscGhhYmV0KHVybFNhZmUpIHtcbiAgcmV0dXJuIHVybFNhZmUgPyBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5LV9cIiA6IFwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiO1xufVxuZnVuY3Rpb24gYmFzZTY0RW5jb2RlKGRhdGEsIGFscGhhYmV0LCBwYWRkaW5nKSB7XG4gIGxldCByZXN1bHQgPSBcIlwiO1xuICBsZXQgYnVmZmVyID0gMDtcbiAgbGV0IHNoaWZ0ID0gMDtcbiAgZm9yIChjb25zdCBieXRlIG9mIGRhdGEpIHtcbiAgICBidWZmZXIgPSBidWZmZXIgPDwgOCB8IGJ5dGU7XG4gICAgc2hpZnQgKz0gODtcbiAgICB3aGlsZSAoc2hpZnQgPj0gNikge1xuICAgICAgc2hpZnQgLT0gNjtcbiAgICAgIHJlc3VsdCArPSBhbHBoYWJldFtidWZmZXIgPj4gc2hpZnQgJiA2M107XG4gICAgfVxuICB9XG4gIGlmIChzaGlmdCA+IDApIHtcbiAgICByZXN1bHQgKz0gYWxwaGFiZXRbYnVmZmVyIDw8IDYgLSBzaGlmdCAmIDYzXTtcbiAgfVxuICBpZiAocGFkZGluZykge1xuICAgIGNvbnN0IHBhZENvdW50ID0gKDQgLSByZXN1bHQubGVuZ3RoICUgNCkgJSA0O1xuICAgIHJlc3VsdCArPSBcIj1cIi5yZXBlYXQocGFkQ291bnQpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBiYXNlNjREZWNvZGUoZGF0YSwgYWxwaGFiZXQpIHtcbiAgY29uc3QgZGVjb2RlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhbHBoYWJldC5sZW5ndGg7IGkrKykge1xuICAgIGRlY29kZU1hcC5zZXQoYWxwaGFiZXRbaV0sIGkpO1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBsZXQgYnVmZmVyID0gMDtcbiAgbGV0IGJpdHNDb2xsZWN0ZWQgPSAwO1xuICBmb3IgKGNvbnN0IGNoYXIgb2YgZGF0YSkge1xuICAgIGlmIChjaGFyID09PSBcIj1cIilcbiAgICAgIGJyZWFrO1xuICAgIGNvbnN0IHZhbHVlID0gZGVjb2RlTWFwLmdldChjaGFyKTtcbiAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIEJhc2U2NCBjaGFyYWN0ZXI6ICR7Y2hhcn1gKTtcbiAgICB9XG4gICAgYnVmZmVyID0gYnVmZmVyIDw8IDYgfCB2YWx1ZTtcbiAgICBiaXRzQ29sbGVjdGVkICs9IDY7XG4gICAgaWYgKGJpdHNDb2xsZWN0ZWQgPj0gOCkge1xuICAgICAgYml0c0NvbGxlY3RlZCAtPSA4O1xuICAgICAgcmVzdWx0LnB1c2goYnVmZmVyID4+IGJpdHNDb2xsZWN0ZWQgJiAyNTUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gVWludDhBcnJheS5mcm9tKHJlc3VsdCk7XG59XG5jb25zdCBiYXNlNjQgPSB7XG4gIGVuY29kZShkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhbHBoYWJldCA9IGdldEFscGhhYmV0KGZhbHNlKTtcbiAgICBjb25zdCBidWZmZXIgPSB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKSA6IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoYnVmZmVyLCBhbHBoYWJldCwgb3B0aW9ucy5wYWRkaW5nID8/IHRydWUpO1xuICB9LFxuICBkZWNvZGUoZGF0YSkge1xuICAgIGlmICh0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgZGF0YSA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShkYXRhKTtcbiAgICB9XG4gICAgY29uc3QgdXJsU2FmZSA9IGRhdGEuaW5jbHVkZXMoXCItXCIpIHx8IGRhdGEuaW5jbHVkZXMoXCJfXCIpO1xuICAgIGNvbnN0IGFscGhhYmV0ID0gZ2V0QWxwaGFiZXQodXJsU2FmZSk7XG4gICAgcmV0dXJuIGJhc2U2NERlY29kZShkYXRhLCBhbHBoYWJldCk7XG4gIH1cbn07XG5jb25zdCBiYXNlNjRVcmwgPSB7XG4gIGVuY29kZShkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBhbHBoYWJldCA9IGdldEFscGhhYmV0KHRydWUpO1xuICAgIGNvbnN0IGJ1ZmZlciA9IHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpIDogbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gICAgcmV0dXJuIGJhc2U2NEVuY29kZShidWZmZXIsIGFscGhhYmV0LCBvcHRpb25zLnBhZGRpbmcgPz8gdHJ1ZSk7XG4gIH0sXG4gIGRlY29kZShkYXRhKSB7XG4gICAgY29uc3QgdXJsU2FmZSA9IGRhdGEuaW5jbHVkZXMoXCItXCIpIHx8IGRhdGEuaW5jbHVkZXMoXCJfXCIpO1xuICAgIGNvbnN0IGFscGhhYmV0ID0gZ2V0QWxwaGFiZXQodXJsU2FmZSk7XG4gICAgcmV0dXJuIGJhc2U2NERlY29kZShkYXRhLCBhbHBoYWJldCk7XG4gIH1cbn07XG5cbmV4cG9ydCB7IGJhc2U2NCwgYmFzZTY0VXJsIH07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/binary.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   binary: () => (/* binding */ binary)\n/* harmony export */ });\nconst decoders = /* @__PURE__ */ new Map();\nconst encoder = new TextEncoder();\nconst binary = {\n  decode: (data, encoding = \"utf-8\") => {\n    if (!decoders.has(encoding)) {\n      decoders.set(encoding, new TextDecoder(encoding));\n    }\n    const decoder = decoders.get(encoding);\n    return decoder.decode(data);\n  },\n  encode: encoder.encode\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvYmluYXJ5Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRWtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC91dGlscy9kaXN0L2JpbmFyeS5tanM/MmQyOSJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkZWNvZGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG5jb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5jb25zdCBiaW5hcnkgPSB7XG4gIGRlY29kZTogKGRhdGEsIGVuY29kaW5nID0gXCJ1dGYtOFwiKSA9PiB7XG4gICAgaWYgKCFkZWNvZGVycy5oYXMoZW5jb2RpbmcpKSB7XG4gICAgICBkZWNvZGVycy5zZXQoZW5jb2RpbmcsIG5ldyBUZXh0RGVjb2RlcihlbmNvZGluZykpO1xuICAgIH1cbiAgICBjb25zdCBkZWNvZGVyID0gZGVjb2RlcnMuZ2V0KGVuY29kaW5nKTtcbiAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoZGF0YSk7XG4gIH0sXG4gIGVuY29kZTogZW5jb2Rlci5lbmNvZGVcbn07XG5cbmV4cG9ydCB7IGJpbmFyeSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/binary.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/hash.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHash: () => (/* binding */ createHash)\n/* harmony export */ });\n/* harmony import */ var _base64_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64.mjs */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n\n\n\nfunction createHash(algorithm, encoding) {\n  return {\n    digest: async (input) => {\n      const encoder = new TextEncoder();\n      const data = typeof input === \"string\" ? encoder.encode(input) : input;\n      const hashBuffer = await (0,_index_mjs__WEBPACK_IMPORTED_MODULE_1__.getWebcryptoSubtle)().digest(algorithm, data);\n      if (encoding === \"hex\") {\n        const hashArray = Array.from(new Uint8Array(hashBuffer));\n        const hashHex = hashArray.map((b) => b.toString(16).padStart(2, \"0\")).join(\"\");\n        return hashHex;\n      }\n      if (encoding === \"base64\" || encoding === \"base64url\" || encoding === \"base64urlnopad\") {\n        if (encoding.includes(\"url\")) {\n          return _base64_mjs__WEBPACK_IMPORTED_MODULE_0__.base64Url.encode(hashBuffer, {\n            padding: encoding !== \"base64urlnopad\"\n          });\n        }\n        const hashBase64 = _base64_mjs__WEBPACK_IMPORTED_MODULE_0__.base64.encode(hashBuffer);\n        return hashBase64;\n      }\n      return hashBuffer;\n    }\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvaGFzaC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWlEO0FBQ0E7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsOERBQWtCO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtEQUFTO0FBQzFCO0FBQ0EsV0FBVztBQUNYO0FBQ0EsMkJBQTJCLCtDQUFNO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFc0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvaGFzaC5tanM/MGRlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBiYXNlNjRVcmwsIGJhc2U2NCB9IGZyb20gJy4vYmFzZTY0Lm1qcyc7XG5pbXBvcnQgeyBnZXRXZWJjcnlwdG9TdWJ0bGUgfSBmcm9tICcuL2luZGV4Lm1qcyc7XG5cbmZ1bmN0aW9uIGNyZWF0ZUhhc2goYWxnb3JpdGhtLCBlbmNvZGluZykge1xuICByZXR1cm4ge1xuICAgIGRpZ2VzdDogYXN5bmMgKGlucHV0KSA9PiB7XG4gICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICBjb25zdCBkYXRhID0gdHlwZW9mIGlucHV0ID09PSBcInN0cmluZ1wiID8gZW5jb2Rlci5lbmNvZGUoaW5wdXQpIDogaW5wdXQ7XG4gICAgICBjb25zdCBoYXNoQnVmZmVyID0gYXdhaXQgZ2V0V2ViY3J5cHRvU3VidGxlKCkuZGlnZXN0KGFsZ29yaXRobSwgZGF0YSk7XG4gICAgICBpZiAoZW5jb2RpbmcgPT09IFwiaGV4XCIpIHtcbiAgICAgICAgY29uc3QgaGFzaEFycmF5ID0gQXJyYXkuZnJvbShuZXcgVWludDhBcnJheShoYXNoQnVmZmVyKSk7XG4gICAgICAgIGNvbnN0IGhhc2hIZXggPSBoYXNoQXJyYXkubWFwKChiKSA9PiBiLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpLmpvaW4oXCJcIik7XG4gICAgICAgIHJldHVybiBoYXNoSGV4O1xuICAgICAgfVxuICAgICAgaWYgKGVuY29kaW5nID09PSBcImJhc2U2NFwiIHx8IGVuY29kaW5nID09PSBcImJhc2U2NHVybFwiIHx8IGVuY29kaW5nID09PSBcImJhc2U2NHVybG5vcGFkXCIpIHtcbiAgICAgICAgaWYgKGVuY29kaW5nLmluY2x1ZGVzKFwidXJsXCIpKSB7XG4gICAgICAgICAgcmV0dXJuIGJhc2U2NFVybC5lbmNvZGUoaGFzaEJ1ZmZlciwge1xuICAgICAgICAgICAgcGFkZGluZzogZW5jb2RpbmcgIT09IFwiYmFzZTY0dXJsbm9wYWRcIlxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhhc2hCYXNlNjQgPSBiYXNlNjQuZW5jb2RlKGhhc2hCdWZmZXIpO1xuICAgICAgICByZXR1cm4gaGFzaEJhc2U2NDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNoQnVmZmVyO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IHsgY3JlYXRlSGFzaCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/hash.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs":
/*!******************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/hex.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   hex: () => (/* binding */ hex)\n/* harmony export */ });\nconst hexadecimal = \"0123456789abcdef\";\nconst hex = {\n  encode: (data) => {\n    if (typeof data === \"string\") {\n      data = new TextEncoder().encode(data);\n    }\n    if (data.byteLength === 0) {\n      return \"\";\n    }\n    const buffer = new Uint8Array(data);\n    let result = \"\";\n    for (const byte of buffer) {\n      result += byte.toString(16).padStart(2, \"0\");\n    }\n    return result;\n  },\n  decode: (data) => {\n    if (!data) {\n      return \"\";\n    }\n    if (typeof data === \"string\") {\n      if (data.length % 2 !== 0) {\n        throw new Error(\"Invalid hexadecimal string\");\n      }\n      if (!new RegExp(`^[${hexadecimal}]+$`).test(data)) {\n        throw new Error(\"Invalid hexadecimal string\");\n      }\n      const result = new Uint8Array(data.length / 2);\n      for (let i = 0; i < data.length; i += 2) {\n        result[i / 2] = parseInt(data.slice(i, i + 2), 16);\n      }\n      return new TextDecoder().decode(result);\n    }\n    return new TextDecoder().decode(data);\n  }\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvaGV4Lm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsWUFBWTtBQUN2QztBQUNBO0FBQ0E7QUFDQSxzQkFBc0IsaUJBQWlCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVlIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC91dGlscy9kaXN0L2hleC5tanM/YjZhMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBoZXhhZGVjaW1hbCA9IFwiMDEyMzQ1Njc4OWFiY2RlZlwiO1xuY29uc3QgaGV4ID0ge1xuICBlbmNvZGU6IChkYXRhKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBkYXRhID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpO1xuICAgIH1cbiAgICBpZiAoZGF0YS5ieXRlTGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gICAgbGV0IHJlc3VsdCA9IFwiXCI7XG4gICAgZm9yIChjb25zdCBieXRlIG9mIGJ1ZmZlcikge1xuICAgICAgcmVzdWx0ICs9IGJ5dGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbiAgZGVjb2RlOiAoZGF0YSkgPT4ge1xuICAgIGlmICghZGF0YSkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgaWYgKGRhdGEubGVuZ3RoICUgMiAhPT0gMCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGhleGFkZWNpbWFsIHN0cmluZ1wiKTtcbiAgICAgIH1cbiAgICAgIGlmICghbmV3IFJlZ0V4cChgXlske2hleGFkZWNpbWFsfV0rJGApLnRlc3QoZGF0YSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBoZXhhZGVjaW1hbCBzdHJpbmdcIik7XG4gICAgICB9XG4gICAgICBjb25zdCByZXN1bHQgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCAvIDIpO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSArPSAyKSB7XG4gICAgICAgIHJlc3VsdFtpIC8gMl0gPSBwYXJzZUludChkYXRhLnNsaWNlKGksIGkgKyAyKSwgMTYpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShyZXN1bHQpO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IFRleHREZWNvZGVyKCkuZGVjb2RlKGRhdGEpO1xuICB9XG59O1xuXG5leHBvcnQgeyBoZXggfTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs":
/*!*******************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/hmac.mjs ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createHMAC: () => (/* binding */ createHMAC)\n/* harmony export */ });\n/* harmony import */ var _hex_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hex.mjs */ \"(rsc)/./node_modules/@better-auth/utils/dist/hex.mjs\");\n/* harmony import */ var _base64_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./base64.mjs */ \"(rsc)/./node_modules/@better-auth/utils/dist/base64.mjs\");\n/* harmony import */ var _index_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./index.mjs */ \"(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\");\n\n\n\n\nconst createHMAC = (algorithm = \"SHA-256\", encoding = \"none\") => {\n  const hmac = {\n    importKey: async (key, keyUsage) => {\n      return (0,_index_mjs__WEBPACK_IMPORTED_MODULE_2__.getWebcryptoSubtle)().importKey(\n        \"raw\",\n        typeof key === \"string\" ? new TextEncoder().encode(key) : key,\n        { name: \"HMAC\", hash: { name: algorithm } },\n        false,\n        [keyUsage]\n      );\n    },\n    sign: async (hmacKey, data) => {\n      if (typeof hmacKey === \"string\") {\n        hmacKey = await hmac.importKey(hmacKey, \"sign\");\n      }\n      const signature = await (0,_index_mjs__WEBPACK_IMPORTED_MODULE_2__.getWebcryptoSubtle)().sign(\n        \"HMAC\",\n        hmacKey,\n        typeof data === \"string\" ? new TextEncoder().encode(data) : data\n      );\n      if (encoding === \"hex\") {\n        return _hex_mjs__WEBPACK_IMPORTED_MODULE_0__.hex.encode(signature);\n      }\n      if (encoding === \"base64\" || encoding === \"base64url\" || encoding === \"base64urlnopad\") {\n        return _base64_mjs__WEBPACK_IMPORTED_MODULE_1__.base64Url.encode(signature, {\n          padding: encoding !== \"base64urlnopad\"\n        });\n      }\n      return signature;\n    },\n    verify: async (hmacKey, data, signature) => {\n      if (typeof hmacKey === \"string\") {\n        hmacKey = await hmac.importKey(hmacKey, \"verify\");\n      }\n      if (encoding === \"hex\") {\n        signature = _hex_mjs__WEBPACK_IMPORTED_MODULE_0__.hex.decode(signature);\n      }\n      if (encoding === \"base64\" || encoding === \"base64url\" || encoding === \"base64urlnopad\") {\n        signature = await _base64_mjs__WEBPACK_IMPORTED_MODULE_1__.base64.decode(signature);\n      }\n      return (0,_index_mjs__WEBPACK_IMPORTED_MODULE_2__.getWebcryptoSubtle)().verify(\n        \"HMAC\",\n        hmacKey,\n        typeof signature === \"string\" ? new TextEncoder().encode(signature) : signature,\n        typeof data === \"string\" ? new TextEncoder().encode(data) : data\n      );\n    }\n  };\n  return hmac;\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvaG1hYy5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFnQztBQUNpQjtBQUNBOztBQUVqRDtBQUNBO0FBQ0E7QUFDQSxhQUFhLDhEQUFrQjtBQUMvQjtBQUNBO0FBQ0EsVUFBVSxzQkFBc0IsbUJBQW1CO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4Qiw4REFBa0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseUNBQUc7QUFDbEI7QUFDQTtBQUNBLGVBQWUsa0RBQVM7QUFDeEI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlDQUFHO0FBQ3ZCO0FBQ0E7QUFDQSwwQkFBMEIsK0NBQU07QUFDaEM7QUFDQSxhQUFhLDhEQUFrQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRXNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC91dGlscy9kaXN0L2htYWMubWpzP2VkNzAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaGV4IH0gZnJvbSAnLi9oZXgubWpzJztcbmltcG9ydCB7IGJhc2U2NFVybCwgYmFzZTY0IH0gZnJvbSAnLi9iYXNlNjQubWpzJztcbmltcG9ydCB7IGdldFdlYmNyeXB0b1N1YnRsZSB9IGZyb20gJy4vaW5kZXgubWpzJztcblxuY29uc3QgY3JlYXRlSE1BQyA9IChhbGdvcml0aG0gPSBcIlNIQS0yNTZcIiwgZW5jb2RpbmcgPSBcIm5vbmVcIikgPT4ge1xuICBjb25zdCBobWFjID0ge1xuICAgIGltcG9ydEtleTogYXN5bmMgKGtleSwga2V5VXNhZ2UpID0+IHtcbiAgICAgIHJldHVybiBnZXRXZWJjcnlwdG9TdWJ0bGUoKS5pbXBvcnRLZXkoXG4gICAgICAgIFwicmF3XCIsXG4gICAgICAgIHR5cGVvZiBrZXkgPT09IFwic3RyaW5nXCIgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoa2V5KSA6IGtleSxcbiAgICAgICAgeyBuYW1lOiBcIkhNQUNcIiwgaGFzaDogeyBuYW1lOiBhbGdvcml0aG0gfSB9LFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgW2tleVVzYWdlXVxuICAgICAgKTtcbiAgICB9LFxuICAgIHNpZ246IGFzeW5jIChobWFjS2V5LCBkYXRhKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGhtYWNLZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaG1hY0tleSA9IGF3YWl0IGhtYWMuaW1wb3J0S2V5KGhtYWNLZXksIFwic2lnblwiKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IGF3YWl0IGdldFdlYmNyeXB0b1N1YnRsZSgpLnNpZ24oXG4gICAgICAgIFwiSE1BQ1wiLFxuICAgICAgICBobWFjS2V5LFxuICAgICAgICB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShkYXRhKSA6IGRhdGFcbiAgICAgICk7XG4gICAgICBpZiAoZW5jb2RpbmcgPT09IFwiaGV4XCIpIHtcbiAgICAgICAgcmV0dXJuIGhleC5lbmNvZGUoc2lnbmF0dXJlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmNvZGluZyA9PT0gXCJiYXNlNjRcIiB8fCBlbmNvZGluZyA9PT0gXCJiYXNlNjR1cmxcIiB8fCBlbmNvZGluZyA9PT0gXCJiYXNlNjR1cmxub3BhZFwiKSB7XG4gICAgICAgIHJldHVybiBiYXNlNjRVcmwuZW5jb2RlKHNpZ25hdHVyZSwge1xuICAgICAgICAgIHBhZGRpbmc6IGVuY29kaW5nICE9PSBcImJhc2U2NHVybG5vcGFkXCJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2lnbmF0dXJlO1xuICAgIH0sXG4gICAgdmVyaWZ5OiBhc3luYyAoaG1hY0tleSwgZGF0YSwgc2lnbmF0dXJlKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIGhtYWNLZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgaG1hY0tleSA9IGF3YWl0IGhtYWMuaW1wb3J0S2V5KGhtYWNLZXksIFwidmVyaWZ5XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGVuY29kaW5nID09PSBcImhleFwiKSB7XG4gICAgICAgIHNpZ25hdHVyZSA9IGhleC5kZWNvZGUoc2lnbmF0dXJlKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbmNvZGluZyA9PT0gXCJiYXNlNjRcIiB8fCBlbmNvZGluZyA9PT0gXCJiYXNlNjR1cmxcIiB8fCBlbmNvZGluZyA9PT0gXCJiYXNlNjR1cmxub3BhZFwiKSB7XG4gICAgICAgIHNpZ25hdHVyZSA9IGF3YWl0IGJhc2U2NC5kZWNvZGUoc2lnbmF0dXJlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZXRXZWJjcnlwdG9TdWJ0bGUoKS52ZXJpZnkoXG4gICAgICAgIFwiSE1BQ1wiLFxuICAgICAgICBobWFjS2V5LFxuICAgICAgICB0eXBlb2Ygc2lnbmF0dXJlID09PSBcInN0cmluZ1wiID8gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHNpZ25hdHVyZSkgOiBzaWduYXR1cmUsXG4gICAgICAgIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiID8gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGRhdGEpIDogZGF0YVxuICAgICAgKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBobWFjO1xufTtcblxuZXhwb3J0IHsgY3JlYXRlSE1BQyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/hmac.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/index.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/index.mjs ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getWebcryptoSubtle: () => (/* binding */ getWebcryptoSubtle)\n/* harmony export */ });\nfunction getWebcryptoSubtle() {\n  const cr = typeof globalThis !== \"undefined\" && globalThis.crypto;\n  if (cr && typeof cr.subtle === \"object\" && cr.subtle != null)\n    return cr.subtle;\n  throw new Error(\"crypto.subtle must be defined\");\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRThCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd29ya3NwYWNlLy4vbm9kZV9tb2R1bGVzL0BiZXR0ZXItYXV0aC91dGlscy9kaXN0L2luZGV4Lm1qcz8zZGJmIl0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldFdlYmNyeXB0b1N1YnRsZSgpIHtcbiAgY29uc3QgY3IgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBnbG9iYWxUaGlzLmNyeXB0bztcbiAgaWYgKGNyICYmIHR5cGVvZiBjci5zdWJ0bGUgPT09IFwib2JqZWN0XCIgJiYgY3Iuc3VidGxlICE9IG51bGwpXG4gICAgcmV0dXJuIGNyLnN1YnRsZTtcbiAgdGhyb3cgbmV3IEVycm9yKFwiY3J5cHRvLnN1YnRsZSBtdXN0IGJlIGRlZmluZWRcIik7XG59XG5cbmV4cG9ydCB7IGdldFdlYmNyeXB0b1N1YnRsZSB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/index.mjs\n");

/***/ }),

/***/ "(rsc)/./node_modules/@better-auth/utils/dist/random.mjs":
/*!*********************************************************!*\
  !*** ./node_modules/@better-auth/utils/dist/random.mjs ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createRandomStringGenerator: () => (/* binding */ createRandomStringGenerator)\n/* harmony export */ });\nfunction expandAlphabet(alphabet) {\n  switch (alphabet) {\n    case \"a-z\":\n      return \"abcdefghijklmnopqrstuvwxyz\";\n    case \"A-Z\":\n      return \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n    case \"0-9\":\n      return \"0123456789\";\n    case \"-_\":\n      return \"-_\";\n    default:\n      throw new Error(`Unsupported alphabet: ${alphabet}`);\n  }\n}\nfunction createRandomStringGenerator(...baseAlphabets) {\n  const baseCharSet = baseAlphabets.map(expandAlphabet).join(\"\");\n  if (baseCharSet.length === 0) {\n    throw new Error(\n      \"No valid characters provided for random string generation.\"\n    );\n  }\n  const baseCharSetLength = baseCharSet.length;\n  return (length, ...alphabets) => {\n    if (length <= 0) {\n      throw new Error(\"Length must be a positive integer.\");\n    }\n    let charSet = baseCharSet;\n    let charSetLength = baseCharSetLength;\n    if (alphabets.length > 0) {\n      charSet = alphabets.map(expandAlphabet).join(\"\");\n      charSetLength = charSet.length;\n    }\n    const maxValid = Math.floor(256 / charSetLength) * charSetLength;\n    const buf = new Uint8Array(length * 2);\n    const bufLength = buf.length;\n    let result = \"\";\n    let bufIndex = bufLength;\n    let rand;\n    while (result.length < length) {\n      if (bufIndex >= bufLength) {\n        crypto.getRandomValues(buf);\n        bufIndex = 0;\n      }\n      rand = buf[bufIndex++];\n      if (rand < maxValid) {\n        result += charSet[rand % charSetLength];\n      }\n    }\n    return result;\n  };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvcmFuZG9tLm1qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxTQUFTO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFdUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93b3Jrc3BhY2UvLi9ub2RlX21vZHVsZXMvQGJldHRlci1hdXRoL3V0aWxzL2Rpc3QvcmFuZG9tLm1qcz81ZmI1Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGV4cGFuZEFscGhhYmV0KGFscGhhYmV0KSB7XG4gIHN3aXRjaCAoYWxwaGFiZXQpIHtcbiAgICBjYXNlIFwiYS16XCI6XG4gICAgICByZXR1cm4gXCJhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5elwiO1xuICAgIGNhc2UgXCJBLVpcIjpcbiAgICAgIHJldHVybiBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaXCI7XG4gICAgY2FzZSBcIjAtOVwiOlxuICAgICAgcmV0dXJuIFwiMDEyMzQ1Njc4OVwiO1xuICAgIGNhc2UgXCItX1wiOlxuICAgICAgcmV0dXJuIFwiLV9cIjtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnN1cHBvcnRlZCBhbHBoYWJldDogJHthbHBoYWJldH1gKTtcbiAgfVxufVxuZnVuY3Rpb24gY3JlYXRlUmFuZG9tU3RyaW5nR2VuZXJhdG9yKC4uLmJhc2VBbHBoYWJldHMpIHtcbiAgY29uc3QgYmFzZUNoYXJTZXQgPSBiYXNlQWxwaGFiZXRzLm1hcChleHBhbmRBbHBoYWJldCkuam9pbihcIlwiKTtcbiAgaWYgKGJhc2VDaGFyU2V0Lmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIFwiTm8gdmFsaWQgY2hhcmFjdGVycyBwcm92aWRlZCBmb3IgcmFuZG9tIHN0cmluZyBnZW5lcmF0aW9uLlwiXG4gICAgKTtcbiAgfVxuICBjb25zdCBiYXNlQ2hhclNldExlbmd0aCA9IGJhc2VDaGFyU2V0Lmxlbmd0aDtcbiAgcmV0dXJuIChsZW5ndGgsIC4uLmFscGhhYmV0cykgPT4ge1xuICAgIGlmIChsZW5ndGggPD0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTGVuZ3RoIG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLlwiKTtcbiAgICB9XG4gICAgbGV0IGNoYXJTZXQgPSBiYXNlQ2hhclNldDtcbiAgICBsZXQgY2hhclNldExlbmd0aCA9IGJhc2VDaGFyU2V0TGVuZ3RoO1xuICAgIGlmIChhbHBoYWJldHMubGVuZ3RoID4gMCkge1xuICAgICAgY2hhclNldCA9IGFscGhhYmV0cy5tYXAoZXhwYW5kQWxwaGFiZXQpLmpvaW4oXCJcIik7XG4gICAgICBjaGFyU2V0TGVuZ3RoID0gY2hhclNldC5sZW5ndGg7XG4gICAgfVxuICAgIGNvbnN0IG1heFZhbGlkID0gTWF0aC5mbG9vcigyNTYgLyBjaGFyU2V0TGVuZ3RoKSAqIGNoYXJTZXRMZW5ndGg7XG4gICAgY29uc3QgYnVmID0gbmV3IFVpbnQ4QXJyYXkobGVuZ3RoICogMik7XG4gICAgY29uc3QgYnVmTGVuZ3RoID0gYnVmLmxlbmd0aDtcbiAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICBsZXQgYnVmSW5kZXggPSBidWZMZW5ndGg7XG4gICAgbGV0IHJhbmQ7XG4gICAgd2hpbGUgKHJlc3VsdC5sZW5ndGggPCBsZW5ndGgpIHtcbiAgICAgIGlmIChidWZJbmRleCA+PSBidWZMZW5ndGgpIHtcbiAgICAgICAgY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhidWYpO1xuICAgICAgICBidWZJbmRleCA9IDA7XG4gICAgICB9XG4gICAgICByYW5kID0gYnVmW2J1ZkluZGV4KytdO1xuICAgICAgaWYgKHJhbmQgPCBtYXhWYWxpZCkge1xuICAgICAgICByZXN1bHQgKz0gY2hhclNldFtyYW5kICUgY2hhclNldExlbmd0aF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbmV4cG9ydCB7IGNyZWF0ZVJhbmRvbVN0cmluZ0dlbmVyYXRvciB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/@better-auth/utils/dist/random.mjs\n");

/***/ })

};
;